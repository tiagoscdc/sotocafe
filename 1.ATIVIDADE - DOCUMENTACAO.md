# Documentação Completa do Projeto
## Soto Café - E-commerce de Cafeteria Gourmet

**Versão:** 1.0  
**Data:** 2025  
**Autor:** Tiago Soares Carneiro da Cunha  
**RGM:** 44030509

---

# Índice

1. [Documento de Visão do Projeto](#1-documento-de-visão-do-projeto)
2. [Business Model Canvas](#2-business-model-canvas)
3. [Design Thinking](#3-design-thinking)
4. [BPMN - Fluxos de Processo](#4-bpmn---fluxos-de-processo)
5. [Requisitos Funcionais](#5-requisitos-funcionais)
6. [Requisitos Não Funcionais](#6-requisitos-não-funcionais)
7. [Histórias de Usuário](#7-histórias-de-usuário)
8. [Casos de Uso](#8-casos-de-uso)
9. [Regras de Negócio](#9-regras-de-negócio)
10. [Arquitetura do Sistema](#10-arquitetura-do-sistema)
11. [Diagrama de Classes](#11-diagrama-de-classes)
12. [Diagrama de Componentes](#12-diagrama-de-componentes)
13. [Tecnologias](#13-tecnologias)
14. [Modelo de Domínio](#14-modelo-de-domínio)
15. [Diagrama ER](#15-diagrama-er)
16. [Dicionário de Dados](#16-dicionário-de-dados)
17. [Script SQL do Banco de Dados](#17-script-sql-do-banco-de-dados)
18. [Plano de Testes](#18-plano-de-testes)
19. [Testes de Aceitação](#19-testes-de-aceitação)
20. [Estratégia TDD](#20-estratégia-tdd)
21. [Casos de Teste](#21-casos-de-teste)
22. [Wireframes](#22-wireframes)
23. [Mockups](#23-mockups)
24. [Protótipos](#24-prototipos)
25. [Especificação de API](#25-especificação-de-api)
26. [Endpoints](#26-endpoints)
27. [Integrações](#27-integrações)
28. [Manual do Usuário](#28-manual-do-usuário)
29. [Manual do Administrador](#29-manual-do-administrador)
30. [Manual de Expedição](#30-manual-de-expedição)
31. [Backlog de Produto](#31-backlog-de-produto)
32. [Sprint Backlog](#32-sprint-backlog)
33. [Cronograma do Projeto](#33-cronograma-do-projeto)
34. [Glossário](#34-glossário)
35. [Referências](#35-referências)
36. [Apêndices](#36-apêndices)

---

# 1. Documento de Visão do Projeto

## 1.1 Introdução

### 1.1.1 Propósito do Documento

Este documento apresenta a visão geral do projeto Soto Café, um e-commerce especializado em cafés gourmet. O documento descreve o problema que o sistema resolve, as necessidades dos stakeholders, os objetivos do projeto e as funcionalidades principais.

### 1.1.2 Escopo do Projeto

O projeto consiste no desenvolvimento de uma plataforma de e-commerce completa para venda de cafés gourmet, incluindo:

- Catálogo de produtos (cafés em grão, moído, cápsulas, kits e acessórios)
- Sistema de carrinho e checkout
- Gestão de pedidos e expedição
- Programa de fidelidade
- Painel administrativo completo
- Sistema de assinaturas (clube de café)
- Blog e conteúdo educativo sobre café

### 1.1.3 Definições, Acrônimos e Abreviações

- **BMC**: Business Model Canvas
- **BPMN**: Business Process Modeling Notation
- **DT**: Design Thinking
- **HU**: História de Usuário
- **UAT**: User Acceptance Test (Teste de Aceitação do Usuário)
- **TDD**: Test-Driven Development (Desenvolvimento Orientado a Testes)
- **API**: Application Programming Interface
- **CMS**: Content Management System
- **CRM**: Customer Relationship Management
- **PCI-DSS**: Payment Card Industry Data Security Standard

## 1.2 Posicionamento

### 1.2.1 Oportunidade de Negócio

O mercado de cafés especiais e gourmet está em crescimento no Brasil, com consumidores cada vez mais interessados em qualidade, origem e experiência. A pandemia acelerou a migração para compras online, criando uma oportunidade para cafeterias especializadas expandirem seu alcance através do e-commerce.

### 1.2.2 Declaração do Problema

Atualmente, a cafeteria Soto Café possui apenas uma loja física, limitando seu alcance geográfico e horário de atendimento. Os clientes que desejam adquirir cafés especiais precisam se deslocar até a loja, o que pode ser inconveniente. Além disso, não há um sistema eficiente para:

- Gerenciar pedidos online
- Oferecer programas de fidelidade
- Personalizar kits de presente
- Gerenciar assinaturas recorrentes
- Fornecer informações detalhadas sobre os produtos

### 1.2.3 Declaração da Solução

O e-commerce Soto Café será uma plataforma digital completa que permitirá:

- Venda online de cafés gourmet e acessórios
- Experiência de compra personalizada e intuitiva
- Gestão eficiente de pedidos e estoque
- Programa de fidelidade para recompensar clientes
- Clube de assinatura para entrega recorrente
- Conteúdo educativo sobre café
- Painel administrativo para gestão completa do negócio

## 1.3 Descrição dos Stakeholders

### 1.3.1 Stakeholders Principais

#### Clientes Finais

**Perfil 1: João Monteiro (34 anos)**
- Analista de suporte, trabalha em home office
- Interesses: Café de qualidade, tecnologia, música instrumental, leitura
- Comportamento: Compra pela internet semanalmente, usa redes sociais para buscar recomendações
- Objetivos: Explorar novos sabores de café sem sair de casa, montar kits customizados
- Frustrações: Sites lentos, falta de informações sobre cafés, frete caro

**Perfil 2: Ana Carolina Silva (27 anos)**
- Designer Gráfica
- Interesses: Estilo, criatividade, presentes com significado, cafés aromáticos
- Comportamento: Muito ativa em redes sociais, busca inspirações visuais
- Objetivos: Encontrar presentes criativos e personalizados
- Frustrações: Falta de opções de personalização, sites com poucas imagens

**Perfil 3: Roberto Martins (58 anos)**
- Aposentado, ex-professor de história
- Interesses: Leitura, cultura, café de qualidade, tecnologia sem complicação
- Comportamento: Usa Google e e-mail com frequência, ainda se adaptando a compras online
- Objetivos: Ter café de qualidade em casa, com entrega prática
- Frustrações: Sites complicados, falta de opção para pagamento via boleto

#### Administradores do E-commerce

- Proprietários da cafeteria
- Gerentes de operações
- Responsáveis por gestão de produtos, pedidos e relatórios

#### Funcionários da Expedição

- Equipe responsável pela separação e envio dos pedidos
- Necessitam de interface simples e eficiente para gerenciar expedições

#### Baristas / Produção

- Responsáveis pela torrefação (se aplicável)
- Necessitam registrar lotes de café torrado para rastreabilidade

## 1.4 Visão Geral do Produto

### 1.4.1 Perspectiva do Produto

O e-commerce Soto Café é uma plataforma web responsiva que integra:

- **Frontend**: Interface moderna e intuitiva para clientes
- **Backend**: API RESTful para gerenciamento de dados
- **Painel Administrativo**: Interface de gestão completa
- **Sistema de Pagamento**: Integração com gateways de pagamento
- **Sistema de Frete**: Cálculo automático de frete
- **Sistema de Notificações**: E-mails transacionais

### 1.4.2 Funcionalidades Principais

1. **Gestão de Contas e Acesso**
   - Cadastro e autenticação de usuários
   - Gerenciamento de permissões (clientes, administradores, funcionários)

2. **Navegação e Catálogo**
   - Navegação por categorias
   - Busca de produtos
   - Gerenciamento de catálogo (admin)

3. **Carrinho e Checkout**
   - Carrinho de compras
   - Aplicação de cupons de desconto
   - Cálculo de frete
   - Processamento de pagamento (Cartão, Pix, Boleto)

4. **Pós-Venda e Fidelidade**
   - Acompanhamento de pedidos
   - Programa de pontos
   - Histórico de compras

5. **Funcionalidades Adicionais**
   - Kits de presente personalizáveis
   - Clube de assinatura
   - Blog de conteúdo
   - FAQ

6. **Gestão e Operações**
   - Painel de controle de vendas
   - Gerenciamento de pedidos
   - Relatórios
   - Configuração de frete

7. **Expedição**
   - Lista de pedidos para separação
   - Registro de baixa de estoque
   - Geração de etiquetas e notas fiscais

### 1.4.3 Características e Benefícios

| Característica | Benefício |
|----------------|-----------|
| Interface responsiva | Acesso de qualquer dispositivo |
| Busca inteligente | Encontrar produtos rapidamente |
| Programa de fidelidade | Recompensar clientes frequentes |
| Clube de assinatura | Receita recorrente e fidelização |
| Painel administrativo completo | Gestão eficiente do negócio |
| Múltiplas formas de pagamento | Facilidade para o cliente |
| Cálculo automático de frete | Transparência nos custos |

## 1.5 Objetivos do Projeto

### 1.5.1 Objetivos de Negócio

1. Expandir o alcance geográfico da cafeteria
2. Aumentar as vendas através do canal online
3. Melhorar a experiência do cliente
4. Implementar programa de fidelidade para aumentar retenção
5. Criar receita recorrente através do clube de assinatura

### 1.5.2 Objetivos Técnicos

1. Desenvolver uma plataforma escalável e performática
2. Garantir segurança nas transações
3. Implementar testes automatizados (TDD)
4. Criar documentação completa
5. Seguir boas práticas de desenvolvimento

### 1.5.3 Objetivos do Usuário

1. Comprar cafés gourmet de forma fácil e rápida
2. Receber informações detalhadas sobre os produtos
3. Acompanhar pedidos em tempo real
4. Participar de programa de fidelidade
5. Personalizar kits de presente

## 1.6 Restrições e Premissas

### 1.6.1 Restrições

- **Tecnológicas**: Compatibilidade com navegadores modernos (Chrome, Firefox, Safari, Edge)
- **Orçamentárias**: Integração com gateways de pagamento disponíveis no Brasil
- **Temporais**: Desenvolvimento em sprints de 2 semanas
- **Regulatórias**: Conformidade com LGPD (Lei Geral de Proteção de Dados)
- **Segurança**: Conformidade com PCI-DSS para pagamentos

### 1.6.2 Premissas

- A cafeteria possui estoque físico para atender pedidos online
- Existe equipe de expedição para processar pedidos
- Há integração disponível com transportadoras
- O sistema de pagamento será integrado com gateway brasileiro (ex: PagSeguro, Mercado Pago)
- A torrefação pode ser interna ou externa (funcionalidade opcional)

## 1.7 Riscos

### 1.7.1 Riscos Técnicos

| Risco | Probabilidade | Impacto | Mitigação |
|-------|---------------|---------|-----------|
| Problemas de integração com gateway de pagamento | Média | Alto | Escolher gateway com boa documentação e suporte |
| Performance do sistema com muitos produtos | Baixa | Médio | Implementar cache e otimizações |
| Problemas de segurança | Baixa | Alto | Seguir boas práticas de segurança, auditorias regulares |

### 1.7.2 Riscos de Negócio

| Risco | Probabilidade | Impacto | Mitigação |
|-------|---------------|---------|-----------|
| Baixa adesão inicial | Média | Médio | Campanha de marketing, programa de lançamento |
| Problemas logísticos de entrega | Média | Alto | Parcerias com transportadoras confiáveis |
| Concorrência | Alta | Médio | Diferenciação através de qualidade e experiência |

---

# 2. Business Model Canvas

## 2.1 Introdução

Este documento apresenta o Business Model Canvas (BMC) do projeto Soto Café, uma plataforma de e-commerce especializada em cafés gourmet. O BMC é uma ferramenta estratégica que permite visualizar o modelo de negócio de forma clara e estruturada.

## 2.2 Business Model Canvas

### 2.2.1 Parceiros-Chave (Key Partners)

**Fornecedores:**
- Torrefadores e produtores de café especial
- Fornecedores de acessórios (xícaras, cafeteiras, etc.)
- Fornecedores de embalagens para kits

**Parceiros Estratégicos:**
- Transportadoras e serviços de logística (Correios, transportadoras privadas)
- Gateway de pagamento (PagSeguro, Mercado Pago, Stripe)
- Serviços de e-mail transacional (SendGrid, Mailchimp)
- Plataformas de marketing digital (Google Ads, Facebook Ads)
- Influenciadores e blogueiros especializados em café

**Parceiros Tecnológicos:**
- Provedores de hospedagem (AWS, Azure, Google Cloud)
- Serviços de CDN para otimização de imagens
- Serviços de monitoramento e analytics

### 2.2.2 Atividades-Chave (Key Activities)

**Operacionais:**
- Gestão de estoque e produtos
- Processamento e expedição de pedidos
- Torrefação de café (se aplicável)
- Embalagem e preparação de kits personalizados
- Atendimento ao cliente

**Tecnológicas:**
- Desenvolvimento e manutenção da plataforma
- Gestão de infraestrutura e segurança
- Otimização de performance e SEO
- Análise de dados e métricas

**Marketing e Vendas:**
- Criação de conteúdo para blog
- Gestão de redes sociais
- Campanhas de marketing digital
- Programa de fidelidade e relacionamento

### 2.2.3 Recursos-Chave (Key Resources)

**Recursos Físicos:**
- Estoque de cafés e produtos
- Infraestrutura de armazenamento
- Equipamentos de torrefação (se aplicável)
- Espaço para expedição

**Recursos Humanos:**
- Equipe de desenvolvimento
- Equipe de atendimento ao cliente
- Equipe de expedição
- Baristas e especialistas em café
- Equipe de marketing e conteúdo

**Recursos Intelectuais:**
- Conhecimento sobre cafés especiais
- Receitas e blends exclusivos
- Conteúdo educativo sobre café
- Brand e identidade visual

**Recursos Tecnológicos:**
- Plataforma de e-commerce
- Sistema de gestão de pedidos
- Sistema de pagamento integrado
- Sistema de gestão de estoque
- CRM e ferramentas de analytics

### 2.2.4 Proposta de Valor (Value Proposition)

**Para Clientes:**
- **Variedade e Qualidade**: Acesso a cafés gourmet e especiais de diferentes origens
- **Conveniência**: Compra online com entrega em casa
- **Personalização**: Kits de presente personalizáveis e clube de assinatura
- **Educação**: Conteúdo educativo sobre café, preparo e harmonização
- **Experiência Premium**: Produtos selecionados e embalagens especiais
- **Programa de Fidelidade**: Pontos e benefícios exclusivos

**Diferenciais Competitivos:**
- Foco em cafés especiais e gourmet
- Experiência de compra personalizada
- Conteúdo educativo de qualidade
- Programa de assinatura flexível
- Atendimento especializado

### 2.2.5 Relacionamento com Clientes (Customer Relationships)

**Tipos de Relacionamento:**
- **Self-Service**: Plataforma intuitiva para compras autônomas
- **Assistência Pessoal**: Atendimento via chat, e-mail e telefone
- **Comunidades**: Blog, redes sociais e conteúdo educativo
- **Co-criação**: Personalização de kits e feedback de produtos

**Estratégias de Relacionamento:**
- Programa de fidelidade com pontos
- Clube de assinatura com descontos
- Newsletter com dicas e novidades
- Redes sociais ativas
- Programa de indicação

### 2.2.6 Canais (Channels)

**Canais de Venda:**
- E-commerce próprio (plataforma web)
- Redes sociais (Instagram, Facebook)
- Marketplace (opcional - Mercado Livre, Amazon)

**Canais de Comunicação:**
- Website e blog
- E-mail marketing
- Redes sociais
- Chat online
- WhatsApp Business

**Canais de Distribuição:**
- Correios (PAC, SEDEX)
- Transportadoras privadas
- Entrega local (motoboy)
- Retirada na loja física (se aplicável)

### 2.2.7 Segmentos de Clientes (Customer Segments)

**Segmento Primário:**
- **Entusiastas de Café (25-45 anos)**: Pessoas que valorizam qualidade e variedade
- **Profissionais Home Office (30-50 anos)**: Trabalhadores remotos que buscam praticidade
- **Presenteiros (25-40 anos)**: Pessoas que buscam presentes criativos e personalizados

**Segmento Secundário:**
- **Aposentados (55+ anos)**: Pessoas que apreciam café de qualidade e buscam conveniência
- **Empresas**: Escritórios e empresas que buscam café premium para funcionários
- **Cafeterias e Restaurantes**: B2B para revenda

**Personas Principais:**
1. **João Monteiro (34 anos)**: Analista de suporte, home office, busca variedade e praticidade
2. **Ana Carolina Silva (27 anos)**: Designer, busca presentes criativos e personalizados
3. **Roberto Martins (58 anos)**: Aposentado, busca qualidade sem complicação

### 2.2.8 Estrutura de Custos (Cost Structure)

**Custos Fixos:**
- Infraestrutura tecnológica (hospedagem, domínio, SSL)
- Salários da equipe
- Aluguel de espaço (se aplicável)
- Marketing e publicidade
- Licenças de software

**Custos Variáveis:**
- Custo dos produtos (café, acessórios)
- Embalagens e materiais
- Frete e logística
- Taxas de gateway de pagamento
- Comissões de marketplace (se aplicável)
- Marketing por performance

**Principais Custos:**
- Aquisição de produtos: ~40-50% da receita
- Logística e frete: ~10-15% da receita
- Marketing: ~10-15% da receita
- Tecnologia e operação: ~10-15% da receita
- Margem líquida: ~10-20% da receita

### 2.2.9 Fontes de Receita (Revenue Streams)

**Receita Primária:**
- **Venda de Produtos**: Cafés, acessórios, kits
  - Margem: 40-60% sobre custo
  - Frequência: Variável (compra única ou recorrente)

**Receita Secundária:**
- **Clube de Assinatura**: Receita recorrente mensal
  - Margem: 50-70% sobre custo
  - Frequência: Mensal/trimestral

- **Kits Personalizados**: Premium pricing
  - Margem: 50-70% sobre custo
  - Frequência: Sazonal (datas comemorativas)

**Receita Adicional:**
- **Programa de Fidelidade**: Aumenta retenção e ticket médio
- **Conteúdo Premium**: Cursos ou guias (futuro)
- **Parcerias B2B**: Venda para cafeterias e restaurantes

**Modelo de Precificação:**
- Preço competitivo com mercado
- Premium para produtos exclusivos
- Descontos para assinantes
- Promoções sazonais

## 2.3 Análise SWOT

### 2.3.1 Forças (Strengths)
- Produtos de alta qualidade
- Experiência de compra personalizada
- Conteúdo educativo diferenciado
- Programa de fidelidade
- Plataforma tecnológica moderna

### 2.3.2 Fraquezas (Weaknesses)
- Dependência de fornecedores
- Custos de logística
- Necessidade de investimento em marketing
- Competição com grandes players

### 2.3.3 Oportunidades (Opportunities)
- Crescimento do mercado de cafés especiais
- Aumento de compras online
- Tendência de personalização
- Mercado B2B (empresas)
- Expansão geográfica

### 2.3.4 Ameaças (Threats)
- Concorrência de grandes e-commerces
- Flutuação de preços de café
- Problemas logísticos
- Mudanças regulatórias
- Dependência de gateways de pagamento

## 2.4 Métricas de Sucesso (KPIs)

### 2.4.1 Métricas de Vendas
- Receita mensal recorrente (MRR)
- Ticket médio
- Taxa de conversão
- Taxa de abandono de carrinho
- Lifetime Value (LTV) do cliente

### 2.4.2 Métricas de Operação
- Tempo médio de entrega
- Taxa de satisfação do cliente (NPS)
- Taxa de reembolso/devolução
- Eficiência de estoque

### 2.4.3 Métricas de Marketing
- Custo de aquisição de cliente (CAC)
- Taxa de retenção
- Taxa de conversão de assinaturas
- Engajamento em redes sociais

## 2.5 Projeções Financeiras (Resumo)

### 2.5.1 Primeiro Ano
- **Meta de Receita**: R$ 500.000 - R$ 1.000.000
- **Clientes Ativos**: 1.000 - 2.000
- **Assinantes**: 100 - 200
- **Ticket Médio**: R$ 150 - R$ 200

### 2.5.2 Crescimento Esperado
- **Ano 2**: 2x a receita do ano 1
- **Ano 3**: 3x a receita do ano 1
- Expansão para novos segmentos
- Expansão geográfica

---

# 3. Design Thinking

## 3.1 Introdução

Este documento apresenta o processo de Design Thinking aplicado ao projeto Soto Café, uma abordagem centrada no usuário para entender necessidades, definir problemas e criar soluções inovadoras para o e-commerce de cafés gourmet.

## 3.2 Fases do Design Thinking

### 3.2.1 Empatia (Empathize)

#### Objetivo
Entender profundamente os usuários, suas necessidades, desejos, frustrações e comportamentos relacionados à compra de café online.

#### Métodos Utilizados

**Entrevistas com Clientes:**
- Entrevistas com clientes da loja física Soto Café
- Entrevistas com potenciais clientes online
- Pesquisa sobre hábitos de compra de café

**Observação:**
- Análise de comportamento em lojas físicas
- Análise de comportamento em e-commerces concorrentes
- Análise de reviews e feedbacks

**Pesquisa Secundária:**
- Estudos de mercado sobre cafés especiais
- Tendências de e-commerce
- Comportamento do consumidor brasileiro

### 3.2.2 Personas Identificadas

#### Persona 1: João Monteiro - O Entusiasta de Café

**Dados Demográficos:**
- Idade: 34 anos
- Profissão: Analista de suporte
- Localização: Trabalha em home office
- Renda: Classe média-alta

**Comportamento:**
- Compra pela internet semanalmente
- Usa redes sociais (Instagram, YouTube) para buscar recomendações
- Valoriza qualidade e variedade
- Gosta de explorar novos sabores

**Objetivos:**
- Explorar novos sabores de café sem sair de casa
- Montar kits de café customizados
- Ter uma experiência de compra prática e prazerosa
- Aprender sobre origens e notas sensoriais

**Frustrações:**
- Sites lentos ou confusos
- Falta de informações sobre os cafés (origem, notas sensoriais)
- Frete caro ou demorado
- Dificuldade em encontrar cafés especiais

**Citação Típica:**
> "Eu gosto de café como uma experiência, não só como bebida. Gosto de entender o que estou tomando."

**Necessidades:**
- Informações detalhadas sobre produtos
- Filtros avançados de busca
- Opções de frete flexíveis
- Programa de fidelidade

#### Persona 2: Ana Carolina Silva - A Presenteira Criativa

**Dados Demográficos:**
- Idade: 27 anos
- Profissão: Designer Gráfica
- Localização: Urbana
- Renda: Classe média

**Comportamento:**
- Muito ativa em redes sociais (Instagram, Pinterest)
- Busca inspirações visuais
- Compra online com frequência em datas comemorativas
- Valoriza estética e criatividade

**Objetivos:**
- Encontrar presentes criativos e personalizados
- Comprar kits de café que encantem visualmente
- Surpreender pessoas queridas com algo fora do comum
- Ter opções de personalização

**Frustrações:**
- Falta de opções de personalização nos kits
- Sites com poucas imagens ou pouca inspiração
- Dificuldade em entender o que é incluído no presente
- Embalagens pouco atraentes

**Citação Típica:**
> "Gosto de dar presentes que tenham a minha cara e que encantem de verdade quem recebe. Café é mais que bebida, é carinho."

**Necessidades:**
- Interface visualmente atraente
- Opções de personalização de kits
- Galeria de imagens de qualidade
- Mensagens personalizadas

#### Persona 3: Roberto Martins - O Tradicional Adaptado

**Dados Demográficos:**
- Idade: 58 anos
- Profissão: Aposentado, ex-professor de história
- Localização: Urbana
- Renda: Classe média

**Comportamento:**
- Usa Google e e-mail com frequência
- WhatsApp para comunicação
- Ainda se adaptando a compras online
- Prefere simplicidade e segurança

**Objetivos:**
- Ter café de qualidade em casa, com entrega prática
- Receber produtos bem embalados, com explicação clara
- Ser bem atendido caso precise de ajuda
- Processo de compra simples e seguro

**Frustrações:**
- Sites que exigem muitos passos ou não explicam bem
- Falta de opção para pagamento via boleto
- Atendimento impessoal ou automatizado demais
- Processos complicados

**Citação Típica:**
> "Sou da época do café passado no pano. Agora gosto de explorar novos sabores, mas sem complicação, por favor."

**Necessidades:**
- Interface simples e intuitiva
- Múltiplas formas de pagamento (incluindo boleto)
- Atendimento humanizado
- Instruções claras

### 3.2.3 Definição do Problema (Define)

#### Problema Central Identificado

**Declaração do Problema:**
> "Como podemos proporcionar uma experiência de café gourmet personalizada, acessível e encantadora em um ambiente digital?"

#### Problemas Específicos

1. **Falta de Informação:**
   - Clientes não encontram informações suficientes sobre produtos
   - Dificuldade em entender diferenças entre cafés
   - Falta de orientação sobre preparo

2. **Experiência de Compra:**
   - Processos complicados e confusos
   - Falta de personalização
   - Opções limitadas de pagamento

3. **Logística:**
   - Frete caro ou demorado
   - Falta de transparência nos prazos
   - Dificuldade em rastrear pedidos

4. **Relacionamento:**
   - Falta de programa de fidelidade
   - Pouca interação pós-venda
   - Ausência de comunidade

### 3.2.4 Ideação (Ideate)

#### Brainstorming de Soluções

**Soluções para Navegação e Informação:**
- E-commerce com navegação intuitiva
- Filtros avançados (origem, torra, notas sensoriais)
- Páginas de produto detalhadas com informações completas
- Blog educativo sobre café
- Guia de preparo interativo

**Soluções para Personalização:**
- Personalização de kits por gosto (ácido, encorpado, doce)
- Montagem de kits de presente customizados
- Mensagens personalizadas em presentes
- Recomendações baseadas em preferências

**Soluções para Fidelização:**
- Clube de assinatura com descoberta de novos sabores mensais
- Programa de pontos de fidelidade
- Descontos exclusivos para assinantes
- Conteúdo exclusivo para membros

**Soluções para Experiência:**
- Chatbot de recomendações de café
- Calculadora de frete transparente
- Múltiplas formas de pagamento
- Acompanhamento de pedido em tempo real

**Soluções para Comunidade:**
- Blog com artigos sobre café
- Seção de receitas e harmonizações
- Redes sociais ativas
- Programa de indicação

#### Priorização de Ideias

**Alta Prioridade (MVP):**
1. E-commerce com navegação intuitiva
2. Personalização de kits por gosto
3. Clube de assinatura básico
4. Programa de fidelidade simples
5. Múltiplas formas de pagamento

**Média Prioridade:**
1. Blog de conteúdo
2. Chatbot de recomendações
3. Guia de preparo interativo
4. Programa de indicação

**Baixa Prioridade (Futuro):**
1. App mobile nativo
2. Marketplace de cafés
3. Comunidade online
4. Cursos online sobre café

### 3.2.5 Prototipagem (Prototype)

#### Wireframes Principais

**Páginas Criadas:**
- Página inicial
- Listagem de produtos
- Detalhes do produto
- Carrinho de compras
- Checkout
- Login/Cadastro
- Meus Pedidos
- Painel Administrativo

**Elementos-Chave dos Wireframes:**
- Menu de navegação claro
- Barra de busca destacada
- Filtros laterais
- Cards de produtos informativos
- Processo de checkout simplificado
- Área de conta do cliente

#### Mockups de Interface

**Design Visual:**
- Paleta de cores: Tons de marrom, bege e dourado (referência ao café)
- Tipografia: Moderna e legível
- Imagens: Alta qualidade, mostrando produtos
- Layout: Limpo e organizado

**Elementos de UX:**
- Botões grandes e claros
- Feedback visual para ações
- Mensagens de erro amigáveis
- Indicadores de progresso

#### Protótipo de Chatbot

**Funcionalidades:**
- Recomendações baseadas em preferências
- Respostas a perguntas frequentes
- Ajuda no processo de compra
- Suporte básico

### 3.2.6 Teste (Test)

#### Grupo Piloto

**Participantes:**
- 10-15 clientes fiéis da loja física
- Mistura das três personas identificadas
- Diferentes níveis de familiaridade com tecnologia

#### Cenários de Teste

**Cenário 1: Compra Simples**
- Objetivo: Testar fluxo básico de compra
- Tarefas:
  1. Navegar até um produto
  2. Adicionar ao carrinho
  3. Finalizar compra
  4. Fazer pagamento

**Cenário 2: Personalização de Kit**
- Objetivo: Testar funcionalidade de kits
- Tarefas:
  1. Acessar seção de kits
  2. Selecionar produtos
  3. Personalizar mensagem
  4. Adicionar ao carrinho

**Cenário 3: Clube de Assinatura**
- Objetivo: Testar processo de assinatura
- Tarefas:
  1. Acessar página do clube
  2. Escolher plano
  3. Configurar assinatura
  4. Finalizar cadastro

#### Métricas de Teste

- Taxa de conclusão de tarefas
- Tempo para completar tarefas
- Número de erros
- Satisfação do usuário (escala 1-5)
- Feedback qualitativo

#### Resultados e Ajustes

**Principais Ajustes Identificados:**
1. Simplificar processo de checkout (reduzir etapas)
2. Melhorar descrições de produtos
3. Adicionar mais imagens dos produtos
4. Melhorar responsividade mobile
5. Adicionar opção de pagamento via boleto

**Iterações Realizadas:**
- 3 rodadas de testes
- Ajustes incrementais após cada rodada
- Validação final com grupo expandido

## 3.3 Jornada do Usuário (User Journey)

### 3.3.1 Jornada: Compra de Café Especial

**Fase 1: Descoberta**
- Cliente vê anúncio ou busca por café especial
- Acessa o site Soto Café
- Navega pelas categorias

**Fase 2: Exploração**
- Lê informações sobre produtos
- Compara opções
- Consulta blog para aprender mais

**Fase 3: Decisão**
- Seleciona produto
- Adiciona ao carrinho
- Aplica cupom (se tiver)

**Fase 4: Compra**
- Informa endereço
- Calcula frete
- Escolhe forma de pagamento
- Finaliza compra

**Fase 5: Pós-Compra**
- Recebe confirmação
- Acompanha pedido
- Recebe produto
- Avalia experiência

**Pontos de Contato:**
- Site
- E-mail
- SMS (opcional)
- Redes sociais
- Atendimento

## 3.4 Mapa de Empatia

### 3.4.1 João Monteiro - Mapa de Empatia

**O que ele VÊ:**
- Sites de e-commerce
- Redes sociais com recomendações
- Reviews de produtos

**O que ele OUVÊ:**
- Recomendações de amigos
- Podcasts sobre café
- Música instrumental enquanto trabalha

**O que ele PENSA e SENTE:**
- Quer explorar novos sabores
- Valoriza qualidade
- Frustrado com falta de informação

**O que ele DIZ e FAZ:**
- "Gosto de entender o que estou tomando"
- Busca informações detalhadas
- Compra online regularmente

**DORES:**
- Sites lentos
- Falta de informação
- Frete caro

**GANHOS:**
- Variedade de produtos
- Informações detalhadas
- Experiência prazerosa

## 3.5 Conclusões e Próximos Passos

### 3.5.1 Principais Insights

1. **Informação é Fundamental**: Clientes querem entender o que estão comprando
2. **Simplicidade Importa**: Processos complexos afastam clientes
3. **Personalização Agrega Valor**: Kits e recomendações personalizadas são diferenciais
4. **Confiança é Essencial**: Transparência em preços, frete e prazos

### 3.5.2 Diretrizes de Design

1. **Clareza**: Informações claras e acessíveis
2. **Simplicidade**: Processos diretos e intuitivos
3. **Beleza**: Design atraente e profissional
4. **Confiança**: Transparência e segurança
5. **Personalização**: Opções de customização

### 3.5.3 Próximos Passos

1. Desenvolver protótipos de alta fidelidade
2. Realizar testes de usabilidade
3. Implementar feedbacks recebidos
4. Lançar versão beta
5. Coletar métricas e iterar

---

# 4. BPMN - Fluxos de Processo

## 4.1 Introdução

Este documento apresenta os fluxos de processo do sistema Soto Café utilizando a notação BPMN (Business Process Modeling Notation). Os diagramas descrevem os principais processos de negócio do e-commerce.

## 4.2 Processo: Compra de Produto (Cliente)

### 4.2.1 Descrição
Processo completo de compra de um produto, desde a navegação até a confirmação do pedido.

### 4.2.2 Participantes
- Cliente
- Sistema
- Gateway de Pagamento

### 4.2.3 Fluxo BPMN (Descrição Textual)

**Início:**
- Cliente acessa o site

**Atividades:**
1. Navegar pelo catálogo
2. Buscar produto
3. Visualizar detalhes do produto
4. Adicionar produto ao carrinho
5. Revisar carrinho
6. Aplicar cupom (opcional)
7. Calcular frete
8. Selecionar endereço de entrega
9. Escolher forma de pagamento
10. Inserir dados de pagamento
11. Processar pagamento
12. Confirmar pedido

**Decisões:**
- Produto disponível? (Sim/Não)
- Cliente autenticado? (Sim/Não)
- Cupom válido? (Sim/Não)
- Pagamento aprovado? (Sim/Não)

**Fim:**
- Pedido confirmado
- E-mail de confirmação enviado

## 4.3 Processo: Processamento de Pedido (Backoffice)

### 4.3.1 Descrição
Processo de processamento de um pedido desde a aprovação do pagamento até o envio.

### 4.3.2 Participantes
- Sistema
- Administrador
- Equipe de Expedição
- Transportadora

### 4.3.3 Fluxo BPMN (Descrição Textual)

**Início:**
- Pagamento aprovado

**Atividades:**
1. Sistema notifica expedição
2. Expedição visualiza pedido
3. Verificar disponibilidade de estoque
4. Separar produtos
5. Registrar baixa de estoque
6. Embalar pedido
7. Gerar etiqueta de envio
8. Gerar nota fiscal
9. Atualizar status para "Enviado"
10. Enviar código de rastreamento ao cliente

**Decisões:**
- Estoque disponível? (Sim/Não)
- Todos os itens separados? (Sim/Não)
- Documentos gerados? (Sim/Não)

**Fim:**
- Pedido enviado
- Cliente notificado

## 4.4 Processo: Cadastro de Usuário

### 4.4.1 Descrição
Processo de cadastro de novo usuário no sistema.

### 4.4.2 Participantes
- Cliente
- Sistema
- Serviço de E-mail

### 4.4.3 Fluxo BPMN (Descrição Textual)

**Início:**
- Cliente acessa página de cadastro

**Atividades:**
1. Preencher formulário de cadastro
2. Validar dados
3. Verificar e-mail único
4. Criptografar senha
5. Criar conta
6. Gerar token de ativação
7. Enviar e-mail de confirmação
8. Cliente clica no link de ativação
9. Validar token
10. Ativar conta

**Decisões:**
- Dados válidos? (Sim/Não)
- E-mail único? (Sim/Não)
- Token válido? (Sim/Não)

**Fim:**
- Conta ativada
- Cliente pode fazer login

## 4.5 Processo: Gerenciamento de Estoque

### 4.5.1 Descrição
Processo de atualização e controle de estoque de produtos.

### 4.5.2 Participantes
- Administrador
- Sistema
- Equipe de Expedição

### 4.5.3 Fluxo BPMN (Descrição Textual)

**Início:**
- Necessidade de atualizar estoque

**Atividades:**
1. Administrador acessa gestão de produtos
2. Selecionar produto
3. Atualizar quantidade
4. Validar quantidade (não negativa)
5. Atualizar estoque no sistema
6. Verificar estoque mínimo
7. Gerar alerta se abaixo do mínimo (se aplicável)
8. Atualizar disponibilidade no site

**Decisões:**
- Quantidade válida? (Sim/Não)
- Abaixo do mínimo? (Sim/Não)

**Fim:**
- Estoque atualizado
- Site atualizado

## 4.6 Processo: Aplicação de Cupom de Desconto

### 4.6.1 Descrição
Processo de validação e aplicação de cupom de desconto em um pedido.

### 4.6.2 Participantes
- Cliente
- Sistema

### 4.6.3 Fluxo BPMN (Descrição Textual)

**Início:**
- Cliente insere código de cupom

**Atividades:**
1. Cliente insere código
2. Buscar cupom no sistema
3. Verificar se cupom existe
4. Verificar se cupom está ativo
5. Verificar data de validade
6. Verificar limite de uso
7. Verificar se cliente já usou (se aplicável)
8. Verificar valor mínimo do pedido
9. Aplicar desconto
10. Atualizar valor total

**Decisões:**
- Cupom existe? (Sim/Não)
- Cupom ativo? (Sim/Não)
- Dentro da validade? (Sim/Não)
- Limite não excedido? (Sim/Não)
- Valor mínimo atendido? (Sim/Não)

**Fim:**
- Desconto aplicado
- Valor atualizado

## 4.7 Processo: Clube de Assinatura

### 4.7.1 Descrição
Processo de assinatura e processamento de entregas recorrentes.

### 4.7.2 Participantes
- Cliente
- Sistema
- Gateway de Pagamento

### 4.7.3 Fluxo BPMN (Descrição Textual)

**Início:**
- Cliente acessa página do clube

**Atividades:**
1. Visualizar planos disponíveis
2. Selecionar plano
3. Configurar frequência
4. Escolher produtos (se aplicável)
5. Configurar pagamento recorrente
6. Processar pagamento inicial
7. Criar assinatura
8. Agendar próxima entrega
9. Processar entrega recorrente (mensalmente)
10. Verificar pagamento
11. Gerar pedido automático
12. Processar pedido

**Decisões:**
- Pagamento aprovado? (Sim/Não)
- Assinatura ativa? (Sim/Não)
- Cliente cancelou? (Sim/Não)

**Fim:**
- Assinatura criada
- Entregas agendadas

## 4.8 Processo: Atendimento ao Cliente

### 4.8.1 Descrição
Processo de atendimento a solicitações e dúvidas dos clientes.

### 4.8.2 Participantes
- Cliente
- Sistema
- Equipe de Suporte

### 4.8.3 Fluxo BPMN (Descrição Textual)

**Início:**
- Cliente busca ajuda

**Atividades:**
1. Cliente acessa FAQ ou contato
2. Buscar na FAQ
3. Encontrar resposta? (Decisão)
4. Se não encontrou, abrir chat ou formulário
5. Equipe recebe solicitação
6. Analisar solicitação
7. Responder cliente
8. Registrar interação
9. Cliente satisfeito? (Decisão)
10. Encerrar atendimento

**Decisões:**
- Resposta encontrada? (Sim/Não)
- Cliente satisfeito? (Sim/Não)

**Fim:**
- Solicitação resolvida
- Registro salvo

## 4.9 Processo: Geração de Relatórios

### 4.9.1 Descrição
Processo de geração de relatórios de vendas e operações.

### 4.9.2 Participantes
- Administrador
- Sistema

### 4.9.3 Fluxo BPMN (Descrição Textual)

**Início:**
- Administrador acessa seção de relatórios

**Atividades:**
1. Selecionar tipo de relatório
2. Definir período
3. Aplicar filtros
4. Processar dados
5. Gerar relatório
6. Visualizar relatório
7. Exportar (se necessário)
8. Salvar configuração (opcional)

**Decisões:**
- Dados disponíveis? (Sim/Não)
- Exportar? (Sim/Não)

**Fim:**
- Relatório gerado
- Dados disponíveis

## 4.10 Processo: Registro de Torra (Produção)

### 4.10.1 Descrição
Processo de registro de novos lotes de café torrado.

### 4.10.2 Participantes
- Barista/Produção
- Sistema

### 4.10.3 Fluxo BPMN (Descrição Textual)

**Início:**
- Nova torra realizada

**Atividades:**
1. Barista acessa interface de registro
2. Preencher dados do lote
3. Informar tipo de grão
4. Informar peso inicial
5. Informar peso final
6. Informar nível de torra
7. Adicionar observações
8. Gerar código único do lote
9. Salvar registro
10. Associar lote a produtos (se aplicável)

**Decisões:**
- Dados completos? (Sim/Não)
- Associar a produtos? (Sim/Não)

**Fim:**
- Lote registrado
- Rastreabilidade garantida

## 4.11 Legenda BPMN

### 4.11.1 Elementos Utilizados

**Eventos:**
- **Evento Inicial**: Início do processo
- **Evento Final**: Fim do processo
- **Evento Intermediário**: Evento durante o processo

**Atividades:**
- **Tarefa**: Atividade única
- **Subprocesso**: Processo dentro de outro processo

**Gateways (Decisões):**
- **Exclusivo (XOR)**: Escolha entre alternativas
- **Inclusivo (OR)**: Múltiplas alternativas possíveis
- **Paralelo (AND)**: Todas as alternativas executadas

**Fluxos:**
- **Fluxo de Sequência**: Ordem de execução
- **Fluxo de Mensagem**: Comunicação entre participantes

**Participantes:**
- **Pool**: Participante do processo
- **Lane**: Divisão dentro de um participante

## 4.12 Melhorias e Otimizações

### 4.12.1 Oportunidades de Automação

1. **Processamento de Pedidos**: Automação parcial com alertas
2. **Cálculo de Frete**: Totalmente automatizado
3. **Aplicação de Cupons**: Totalmente automatizado
4. **Geração de Relatórios**: Agendamento automático

### 4.12.2 Pontos de Melhoria

1. Reduzir tempo de processamento de pedidos
2. Melhorar comunicação com clientes
3. Otimizar gestão de estoque
4. Automatizar mais processos

---




# 5. Requisitos Funcionais

## Soto Café - E-commerce de Cafeteria Gourmet

**Versão:** 1.0  
**Data:** 2025  
**Autor:** Tiago Soares Carneiro da Cunha

---

## 1. Introdução

Este documento descreve os requisitos funcionais do sistema Soto Café, organizados por módulos e funcionalidades. Cada requisito está relacionado às histórias de usuário definidas no projeto.

---

## 2. Módulo: Gestão de Contas e Acesso

### RF-001: Cadastro de Usuário

**História de Usuário:** HU-01  
**Prioridade:** Alta

**Descrição:** O sistema deve permitir que novos usuários se cadastrem na plataforma.

**Requisitos Detalhados:**

1. O sistema deve exibir um formulário de cadastro com os seguintes campos:
   - Nome Completo (obrigatório)
   - E-mail (obrigatório, formato válido)
   - Senha (obrigatório, mínimo 8 caracteres)
   - Confirmação de Senha (obrigatório)

2. O sistema deve validar:
   - E-mail único (não pode estar cadastrado)
   - Senha com no mínimo 8 caracteres, incluindo letras, números e pelo menos um caractere especial
   - Confirmação de senha deve ser igual à senha

3. O sistema deve criptografar a senha antes de armazenar no banco de dados

4. Após o cadastro, o sistema deve enviar um e-mail de confirmação com link de ativação

5. O usuário deve ativar a conta através do link recebido por e-mail

6. Após a ativação, o usuário deve conseguir fazer login

**Regras de Negócio:**
- RN-001: E-mail deve ser único por usuário
- RN-002: Senha deve ser criptografada (hash) antes do armazenamento
- RN-003: Conta inativa não pode fazer login

**Requisitos Não Funcionais:**
- RNF-001: Processo de cadastro deve ser concluído em até 5 segundos
- RNF-002: Dados devem ser transmitidos via HTTPS
- RNF-003: E-mail de confirmação deve ser enviado em até 1 minuto

---

### RF-002: Autenticação de Usuário

**História de Usuário:** HU-01  
**Prioridade:** Alta

**Descrição:** O sistema deve permitir que usuários cadastrados façam login.

**Requisitos Detalhados:**

1. O sistema deve exibir um formulário de login com:
   - E-mail
   - Senha

2. O sistema deve validar as credenciais fornecidas

3. O sistema deve manter a sessão do usuário autenticado

4. O sistema deve redirecionar o usuário para a página inicial após login bem-sucedido

5. O sistema deve exibir mensagem de erro para credenciais inválidas

**Regras de Negócio:**
- RN-004: Apenas contas ativas podem fazer login
- RN-005: Após 5 tentativas de login falhadas, a conta deve ser bloqueada temporariamente

**Requisitos Não Funcionais:**
- RNF-004: Processo de login deve ser concluído em até 2 segundos
- RNF-005: Sessão deve expirar após 30 minutos de inatividade

---

### RF-003: Gerenciamento de Usuários e Permissões

**História de Usuário:** HU-24  
**Prioridade:** Alta

**Descrição:** O sistema deve permitir que administradores gerenciem usuários e suas permissões.

**Requisitos Detalhados:**

1. O administrador deve poder:
   - Visualizar lista de usuários (clientes e funcionários)
   - Criar novos usuários internos (funcionários)
   - Editar informações de usuários
   - Desativar/ativar contas de usuários
   - Atribuir perfis de permissão (Administrador, Gerente de Conteúdo, Expedição, Suporte, Barista)

2. O sistema deve ter os seguintes perfis:
   - **Cliente**: Acesso apenas ao e-commerce
   - **Administrador**: Acesso total ao sistema
   - **Gerente de Conteúdo**: Gerenciar produtos, categorias, blog, FAQ
   - **Expedição**: Gerenciar pedidos para separação e envio
   - **Suporte**: Visualizar pedidos e histórico de clientes
   - **Barista/Produção**: Registrar lotes de torra

3. O sistema deve registrar auditoria de ações realizadas por usuários internos

**Regras de Negócio:**
- RN-006: Apenas administradores podem gerenciar outros administradores
- RN-007: Cada perfil tem acesso restrito a funcionalidades específicas

---

## 3. Módulo: Navegação e Catálogo de Produtos

### RF-004: Navegação por Categorias

**História de Usuário:** HU-02  
**Prioridade:** Alta

**Descrição:** O sistema deve permitir que clientes naveguem por categorias de produtos.

**Requisitos Detalhados:**

1. O sistema deve exibir um menu de categorias na navegação principal

2. As categorias principais devem incluir:
   - Grãos
   - Moído
   - Cápsulas
   - Kits
   - Acessórios

3. Ao clicar em uma categoria, o sistema deve listar os produtos dessa categoria

4. O sistema deve permitir aplicar filtros:
   - Por subcategoria
   - Por origem do café
   - Por nível de torra
   - Por tipo de moagem
   - Por faixa de preço

5. O sistema deve permitir ordenar produtos por:
   - Relevância
   - Preço (menor para maior, maior para menor)
   - Nome (A-Z, Z-A)
   - Mais vendidos

6. Produtos sem estoque devem ser exibidos com etiqueta "Indisponível" ou não aparecer (configurável)

**Regras de Negócio:**
- RN-008: A categorização deve seguir a estrutura definida pela gestão de estoque
- RN-009: Produtos sem estoque podem ser exibidos ou ocultados (configuração administrativa)

**Requisitos Não Funcionais:**
- RNF-006: Página de categoria deve carregar em até 2 segundos
- RNF-007: Navegação deve funcionar corretamente em desktop, tablet e mobile

---

### RF-005: Gerenciamento de Catálogo de Produtos

**História de Usuário:** HU-05  
**Prioridade:** Alta

**Descrição:** O sistema deve permitir que administradores gerenciem o catálogo de produtos.

**Requisitos Detalhados:**

1. O administrador deve poder:
   - Adicionar novos produtos
   - Editar produtos existentes
   - Remover produtos (com confirmação)
   - Gerenciar imagens dos produtos
   - Atualizar preços e estoque

2. Ao adicionar/editar produto, o sistema deve coletar:
   - Nome do produto (obrigatório)
   - Descrição (obrigatório)
   - Preço unitário (obrigatório, numérico)
   - Categoria (obrigatório)
   - Estoque atual (obrigatório, numérico)
   - Peso em gramas (obrigatório)
   - Dimensões (opcional)
   - Imagens (mínimo 1, máximo 5)
   - Variações (tipo de moagem, peso, etc.)
   - Informações adicionais (origem, notas sensoriais, nível de torra)

3. O sistema deve validar:
   - Preço deve ser numérico e maior que zero
   - Estoque não pode ser negativo
   - Categoria deve existir

4. As alterações devem ser refletidas imediatamente no site

**Regras de Negócio:**
- RN-010: Apenas usuários com perfil "Administrador" ou "Gerente de Conteúdo" podem gerenciar produtos
- RN-011: Produtos removidos não devem aparecer no site, mas dados históricos são mantidos

**Requisitos Não Funcionais:**
- RNF-008: Interface de gerenciamento deve ser responsiva
- RNF-009: Upload de imagens deve ser otimizado

---

### RF-006: Busca de Produtos

**História de Usuário:** HU-15  
**Prioridade:** Média

**Descrição:** O sistema deve permitir que clientes busquem produtos através de uma barra de pesquisa.

**Requisitos Detalhados:**

1. O sistema deve exibir uma barra de pesquisa visível em todas as páginas

2. Ao digitar na barra de pesquisa, o sistema deve exibir sugestões (autocomplete) de produtos

3. Os resultados da busca devem considerar:
   - Nome do produto
   - Descrição do produto
   - Categoria
   - Tags/palavras-chave

4. A página de resultados deve exibir:
   - Lista de produtos relevantes
   - Opções de filtros
   - Opções de ordenação

5. O sistema deve usar algoritmo de relevância para ordenar resultados

**Regras de Negócio:**
- RN-012: Busca deve considerar nomes, descrições e categorias
- RN-013: Resultados devem ser ordenados por relevância

**Requisitos Não Funcionais:**
- RNF-010: Busca deve ser quase instantânea (menos de 1 segundo)
- RNF-011: Sistema deve suportar grande volume de dados e requisições

---

## 4. Módulo: Carrinho e Checkout

### RF-007: Gerenciamento de Carrinho de Compras

**História de Usuário:** HU-03  
**Prioridade:** Alta

**Descrição:** O sistema deve permitir que clientes adicionem produtos ao carrinho e gerenciem os itens.

**Requisitos Detalhados:**

1. O sistema deve permitir adicionar produtos ao carrinho:
   - Da página de detalhes do produto
   - Da página de listagem (se configurado)

2. Ao adicionar produto, o sistema deve:
   - Exibir confirmação visual (pop-up ou atualização de ícone)
   - Validar disponibilidade em estoque
   - Atualizar contador do carrinho

3. O carrinho deve exibir:
   - Lista de produtos adicionados
   - Quantidade de cada item
   - Preço unitário
   - Subtotal por item
   - Subtotal geral

4. O sistema deve permitir:
   - Ajustar quantidade de itens
   - Remover itens do carrinho
   - Limpar carrinho

5. O carrinho deve ser persistente (salvo por 24h ou até finalizar compra)

**Regras de Negócio:**
- RN-014: Não é possível adicionar quantidade maior que a disponível em estoque
- RN-015: Preço no carrinho deve refletir o preço atual de venda

**Requisitos Não Funcionais:**
- RNF-012: Adição ao carrinho deve ser quase instantânea (menos de 1 segundo)
- RNF-013: Carrinho deve ser persistente mesmo após fechar navegador

---

### RF-008: Aplicação de Cupons de Desconto

**História de Usuário:** HU-06  
**Prioridade:** Média

**Descrição:** O sistema deve permitir que clientes apliquem cupons de desconto no carrinho.

**Requisitos Detalhados:**

1. O sistema deve exibir um campo para inserir código de cupom no carrinho ou checkout

2. Ao inserir um código válido, o sistema deve:
   - Validar o cupom (validade, limite de uso, aplicabilidade)
   - Aplicar o desconto
   - Atualizar o valor total do pedido

3. O sistema deve exibir mensagem de erro para cupons:
   - Inválidos
   - Expirados
   - Com limite de uso excedido
   - Já utilizados pelo cliente (se aplicável)

4. O sistema deve permitir remover cupom aplicado

**Regras de Negócio:**
- RN-016: Cupons têm validade (data início e fim) e limite de uso
- RN-017: Cupons podem ser percentuais (ex: 10% OFF) ou valor fixo (ex: R$20 OFF)
- RN-018: Cupons podem ser aplicáveis a categorias específicas ou valor total
- RN-019: Cada cupom pode ser usado apenas uma vez por cliente (se configurado)

**Requisitos Não Funcionais:**
- RNF-014: Validação e aplicação de cupom deve ocorrer em menos de 1 segundo

---

### RF-009: Cálculo e Visualização de Frete

**História de Usuário:** HU-07  
**Prioridade:** Alta

**Descrição:** O sistema deve calcular e exibir opções de frete para o CEP informado.

**Requisitos Detalhados:**

1. No carrinho ou checkout, o sistema deve exibir campo para inserir CEP

2. Após inserir CEP, o sistema deve:
   - Validar formato do CEP
   - Calcular opções de frete disponíveis
   - Exibir modalidades (PAC, SEDEX, Motoboy, etc.) com:
     - Nome da modalidade
     - Valor do frete
     - Prazo estimado de entrega

3. O cliente deve poder selecionar a modalidade desejada

4. O valor do frete selecionado deve ser somado ao total do pedido

5. Para CEPs não atendidos, o sistema deve exibir mensagem informativa

**Regras de Negócio:**
- RN-020: Valores e prazos devem ser calculados com base em tabelas de transportadoras ou regras configuradas
- RN-021: Cálculo pode considerar peso, dimensões e CEP origem/destino
- RN-022: Pode haver regra de frete grátis acima de determinado valor

**Requisitos Não Funcionais:**
- RNF-015: Cálculo e exibição de frete deve ocorrer em no máximo 2 segundos
- RNF-016: Sistema deve integrar com APIs de cálculo de frete de transportadoras

---

### RF-010: Processamento de Pagamento

**História de Usuário:** HU-08  
**Prioridade:** Alta

**Descrição:** O sistema deve processar pagamentos de forma segura através de múltiplos métodos.

**Requisitos Detalhados:**

1. O sistema deve oferecer as seguintes opções de pagamento:
   - **Cartão de Crédito**: Visa, Mastercard, Elo, Amex
   - **Pix**: Geração de QR Code e código Copia e Cola
   - **Boleto Bancário**: Geração de boleto para impressão/download

2. Para **Cartão de Crédito**, o sistema deve coletar:
   - Número do cartão
   - Nome do titular
   - Data de validade
   - CVV
   - CPF do titular (se necessário)

3. Para **Pix**, o sistema deve:
   - Gerar QR Code
   - Gerar código Copia e Cola
   - Aguardar confirmação do pagamento
   - Atualizar status do pedido automaticamente

4. Para **Boleto**, o sistema deve:
   - Gerar boleto bancário
   - Permitir impressão ou download
   - Aguardar compensação (prazo de 1-3 dias úteis)

5. Após confirmação do pagamento, o sistema deve:
   - Exibir mensagem de sucesso
   - Redirecionar para página de confirmação
   - Enviar e-mail de confirmação
   - Atualizar estoque

**Regras de Negócio:**
- RN-023: Integração com gateway deve seguir padrões PCI-DSS
- RN-024: Pagamentos Pix e Cartão têm validação em tempo real
- RN-025: Boleto tem prazo de compensação

**Requisitos Não Funcionais:**
- RNF-017: Página de pagamento deve ter certificado SSL válido (HTTPS)
- RNF-018: Processamento de Pix e Cartão deve ser otimizado (< 3 segundos)
- RNF-019: Integração com gateway deve ter alta disponibilidade

---

## 5. Módulo: Pós-Venda e Fidelidade

### RF-011: Acompanhamento de Status do Pedido

**História de Usuário:** HU-04  
**Prioridade:** Alta

**Descrição:** O sistema deve permitir que clientes acompanhem o status de seus pedidos.

**Requisitos Detalhados:**

1. O cliente logado deve ter acesso à seção "Meus Pedidos"

2. A lista de pedidos deve exibir:
   - Número do pedido
   - Data do pedido
   - Valor total
   - Status atual

3. Ao clicar em um pedido, o sistema deve exibir:
   - Detalhamento completo do pedido
   - Histórico de mudanças de status (com data/hora)
   - Código de rastreamento (se enviado)
   - Itens do pedido
   - Endereço de entrega
   - Método de pagamento

4. Os status possíveis são:
   - Confirmado
   - Em Preparação
   - Enviado
   - Em Trânsito
   - Entregue
   - Cancelado

5. O sistema deve enviar notificações por e-mail a cada mudança de status importante

**Regras de Negócio:**
- RN-026: Atualização de status pode ser manual (equipe) ou automática (integração transportadora)
- RN-027: Apenas pedidos "Enviado" ou superior devem exibir código de rastreamento

**Requisitos Não Funcionais:**
- RNF-020: Página "Meus Pedidos" deve carregar em até 3 segundos
- RNF-021: Sistema de notificações por e-mail deve ter alta disponibilidade

---

### RF-012: Confirmação de Pedido por E-mail

**História de Usuário:** HU-09  
**Prioridade:** Alta

**Descrição:** O sistema deve enviar e-mail de confirmação após a compra.

**Requisitos Detalhados:**

1. Após finalização bem-sucedida do pedido, o sistema deve enviar e-mail de confirmação

2. O e-mail deve conter:
   - Número do pedido
   - Lista de produtos comprados
   - Quantidades
   - Valor total
   - Valor do frete
   - Endereço de entrega
   - Método de pagamento
   - Link para acompanhamento do pedido

3. O template do e-mail deve ser padronizado e conter logo da cafeteria

**Regras de Negócio:**
- RN-028: E-mail deve ser enviado somente após confirmação do pagamento (ou geração do boleto)

**Requisitos Não Funcionais:**
- RNF-022: E-mail deve ser enviado em até 1 minuto após aprovação do pagamento
- RNF-023: Serviço de e-mail deve ter alta taxa de entrega (não cair em spam)

---

### RF-013: Programa de Fidelidade

**História de Usuário:** HU-10  
**Prioridade:** Média

**Descrição:** O sistema deve gerenciar programa de pontos de fidelidade.

**Requisitos Detalhados:**

1. O sistema deve exibir saldo de pontos do cliente em seu perfil

2. Após cada compra concluída, o sistema deve:
   - Calcular pontos baseado no valor gasto
   - Adicionar pontos ao saldo do cliente
   - Notificar o cliente sobre os pontos ganhos

3. O cliente deve poder resgatar pontos por:
   - Descontos em compras futuras
   - Produtos específicos (se configurado)

4. O sistema deve exibir histórico de:
   - Pontos ganhos
   - Pontos resgatados
   - Pontos expirados (se aplicável)

**Regras de Negócio:**
- RN-029: Regra de conversão de valor para pontos deve ser configurável (ex: R$1 = 1 ponto)
- RN-030: Regra de resgate deve ser configurável (ex: 100 pontos = R$5 de desconto)
- RN-031: Pontos podem ter validade (configurável)

**Requisitos Não Funcionais:**
- RNF-024: Atualização de saldo deve ser em tempo real após conclusão da compra
- RNF-025: Sistema deve ser escalável para suportar grande volume de transações

---

## 6. Módulo: Funcionalidades Adicionais

### RF-014: Kits de Presente Personalizáveis

**História de Usuário:** HU-11  
**Prioridade:** Média

**Descrição:** O sistema deve permitir que clientes montem kits de presente personalizados.

**Requisitos Detalhados:**

1. O site deve ter uma seção "Kits de Presente" ou "Monte seu Kit"

2. O cliente deve poder:
   - Selecionar uma base (caixa, cesta)
   - Adicionar produtos de diferentes categorias (cafés, xícaras, acessórios)
   - Visualizar preview do kit
   - Adicionar mensagem personalizada

3. O preço do kit deve ser atualizado dinamicamente conforme itens são adicionados

4. O kit montado deve ser adicionado ao carrinho como um item único

**Regras de Negócio:**
- RN-032: Seleção de itens pode ser limitada a produtos específicos ou categorias
- RN-033: Pode haver preço mínimo ou máximo para kits personalizados

**Requisitos Não Funcionais:**
- RNF-026: Interface de montagem deve ser visualmente atraente e fácil de usar
- RNF-027: Experiência em mobile deve ser fluida

---

### RF-015: Clube de Assinatura

**História de Usuário:** HU-16  
**Prioridade:** Média

**Descrição:** O sistema deve gerenciar assinaturas recorrentes de café.

**Requisitos Detalhados:**

1. O site deve ter uma seção "Clube de Assinatura" com diferentes planos:
   - Mensal
   - Trimestral
   - Semestral
   - Anual

2. O cliente deve poder:
   - Selecionar um plano
   - Escolher frequência de entrega
   - Selecionar tipo de café (se aplicável)
   - Realizar pagamento recorrente

3. O sistema deve:
   - Gerenciar cobranças recorrentes
   - Notificar sobre falhas no pagamento
   - Permitir pausar, cancelar ou mudar plano

4. O cliente deve poder gerenciar sua assinatura em seu perfil

**Regras de Negócio:**
- RN-034: Planos de assinatura devem ser configuráveis (preço, frequência, tipo de café)
- RN-035: Sistema deve gerenciar pagamentos recorrentes e notificar sobre falhas

**Requisitos Não Funcionais:**
- RNF-028: Processo de assinatura deve ser intuitivo e rápido
- RNF-029: Plataforma deve suportar cobrança recorrente de forma segura

---

### RF-016: FAQ (Perguntas Frequentes)

**História de Usuário:** HU-12  
**Prioridade:** Baixa

**Descrição:** O sistema deve exibir seção de perguntas frequentes.

**Requisitos Detalhados:**

1. O site deve ter link para seção FAQ (rodapé ou menu de ajuda)

2. A FAQ deve ser organizada por categorias:
   - Pedidos
   - Envio
   - Produtos
   - Pagamento
   - Programa de Fidelidade

3. O sistema deve permitir busca por termos específicos dentro da FAQ

4. As respostas devem ser claras e concisas

5. O conteúdo da FAQ deve ser gerenciável pelo administrador

**Requisitos Não Funcionais:**
- RNF-030: Página FAQ deve carregar rapidamente
- RNF-031: Busca na FAQ deve ser eficiente

---

### RF-017: Blog de Conteúdo

**História de Usuário:** HU-13  
**Prioridade:** Baixa

**Descrição:** O sistema deve exibir blog com artigos sobre café.

**Requisitos Detalhados:**

1. O site deve ter link visível para o blog

2. O blog deve exibir:
   - Lista de artigos com títulos e miniaturas
   - Data de publicação
   - Autor
   - Categorias/Tags

3. Cada artigo deve ter:
   - Título
   - Conteúdo formatado
   - Imagens/Vídeos
   - Opções de compartilhamento social

4. O conteúdo do blog deve ser gerenciável através de CMS

**Requisitos Não Funcionais:**
- RNF-032: Páginas do blog devem ser otimizadas para SEO
- RNF-033: Carregamento das páginas deve ser rápido

---

## 7. Módulo: Gestão e Operações (Backoffice)

### RF-018: Painel de Controle de Vendas

**História de Usuário:** HU-18  
**Prioridade:** Alta

**Descrição:** O sistema deve exibir painel com métricas de vendas para administradores.

**Requisitos Detalhados:**

1. O painel deve exibir métricas chave:
   - Número de pedidos (dia, semana, mês, ano)
   - Faturamento total
   - Ticket médio
   - Produtos mais vendidos
   - Clientes novos
   - Taxa de conversão

2. Os dados devem ser visualizados por períodos:
   - Hoje
   - Semana atual
   - Mês atual
   - Ano atual
   - Período customizado

3. O painel deve conter gráficos para visualização:
   - Gráfico de vendas ao longo do tempo
   - Gráfico de produtos mais vendidos
   - Gráfico de categorias mais vendidas

**Regras de Negócio:**
- RN-036: Apenas usuários com perfil "Administrador" podem acessar o painel
- RN-037: Cálculo das métricas deve ser preciso e refletir dados transacionais

**Requisitos Não Funcionais:**
- RNF-034: Painel deve carregar em até 3 segundos
- RNF-035: Gráficos devem ser interativos e fáceis de entender

---

### RF-019: Gerenciamento de Pedidos

**História de Usuário:** HU-20  
**Prioridade:** Alta

**Descrição:** O sistema deve permitir que administradores gerenciem pedidos.

**Requisitos Detalhados:**

1. O administrador deve ter acesso a lista de todos os pedidos com filtros:
   - Por status
   - Por data
   - Por cliente
   - Por valor

2. Ao clicar em um pedido, o administrador deve ver:
   - Detalhes completos do pedido
   - Informações do cliente
   - Endereço de entrega
   - Histórico de status
   - Informações de pagamento

3. O administrador deve poder:
   - Alterar status do pedido manualmente
   - Cancelar pedido
   - Iniciar processo de estorno (se aplicável)
   - Emitir nota fiscal ou comprovante

**Regras de Negócio:**
- RN-038: Apenas administradores ou funcionários de expedição podem alterar status
- RN-039: Emissão de notas fiscais deve seguir legislação vigente

**Requisitos Não Funcionais:**
- RNF-036: Listagem e detalhamento devem ser rápidos
- RNF-037: Interface deve ser intuitiva

---

### RF-020: Gerenciamento de Cupons

**História de Usuário:** HU-21  
**Prioridade:** Média

**Descrição:** O sistema deve permitir que administradores criem e gerenciem cupons de desconto.

**Requisitos Detalhados:**

1. O administrador deve poder criar novos cupons configurando:
   - Código do cupom (único)
   - Tipo de desconto (percentual ou valor fixo)
   - Valor do desconto
   - Data de validade (início e fim)
   - Limite de uso (por cliente ou total)
   - Produtos/categorias aplicáveis

2. O administrador deve poder:
   - Visualizar lista de cupons (ativos, expirados)
   - Editar cupons existentes
   - Desativar cupons
   - Visualizar estatísticas de uso

**Regras de Negócio:**
- RN-040: Cupons podem ser aplicados apenas uma vez por cliente (se configurado)
- RN-041: Prioridade de aplicação deve ser definida (maior desconto, primeiro inserido)

**Requisitos Não Funcionais:**
- RNF-038: Criação e gerenciamento devem ser ágeis
- RNF-039: Sistema deve garantir unicidade dos códigos

---

### RF-021: Geração de Relatórios

**História de Usuário:** HU-23  
**Prioridade:** Média

**Descrição:** O sistema deve permitir gerar relatórios de vendas.

**Requisitos Detalhados:**

1. O sistema deve permitir gerar relatórios:
   - De vendas por período
   - De vendas por produto
   - De vendas por cliente
   - De produtos mais vendidos
   - De produtos menos vendidos
   - De maiores compradores

2. Os relatórios devem ser exportáveis em:
   - CSV
   - Excel (XLSX)
   - PDF

3. Os relatórios devem permitir filtros:
   - Por período (diário, semanal, mensal, anual, customizado)
   - Por produto
   - Por categoria
   - Por cliente

**Regras de Negócio:**
- RN-042: Apenas administradores podem gerar relatórios
- RN-043: Dados dos relatórios devem ser consistentes com dados de vendas

**Requisitos Não Funcionais:**
- RNF-040: Geração de relatórios complexos deve ser otimizada
- RNF-041: Interface de seleção de filtros deve ser fácil de usar

---

### RF-022: Configuração de Frete

**História de Usuário:** HU-25  
**Prioridade:** Alta

**Descrição:** O sistema deve permitir configurar opções e valores de frete.

**Requisitos Detalhados:**

1. O administrador deve poder:
   - Adicionar, editar e remover modalidades de frete
   - Configurar regras de preço (tabela por CEP, por peso, por faixa de valor)
   - Definir regiões de atendimento
   - Configurar regras de frete grátis

2. Para cada modalidade, deve ser possível configurar:
   - Nome da modalidade
   - Regras de cálculo
   - Regiões atendidas
   - Prazos de entrega

**Regras de Negócio:**
- RN-044: Configurações devem ser aplicadas em tempo real nos cálculos
- RN-045: Regras de frete devem ter prioridade caso haja conflito

**Requisitos Não Funcionais:**
- RNF-042: Interface de configuração deve ser clara e robusta
- RNF-043: Cálculo de frete deve ser otimizado

---

## 8. Módulo: Expedição

### RF-023: Notificações de Pedidos Aprovados

**História de Usuário:** HU-26  
**Prioridade:** Alta

**Descrição:** O sistema deve notificar funcionários da expedição sobre novos pedidos aprovados.

**Requisitos Detalhados:**

1. Quando um pedido é aprovado, o sistema deve:
   - Enviar notificação visual/sonora para funcionários da expedição
   - Incluir número do pedido
   - Incluir link direto para detalhes do pedido

2. O funcionário deve poder:
   - Visualizar notificações
   - Desativar/ativar notificações

**Regras de Negócio:**
- RN-046: Apenas pedidos com status "Aprovado" devem gerar notificação
- RN-047: Notificação deve ser disparada assim que pagamento for confirmado

**Requisitos Não Funcionais:**
- RNF-044: Sistema de notificação deve ser em tempo real
- RNF-045: Notificação deve ser persistente até visualização

---

### RF-024: Lista de Pedidos para Separação

**História de Usuário:** HU-27  
**Prioridade:** Alta

**Descrição:** O sistema deve exibir lista de pedidos para separação.

**Requisitos Detalhados:**

1. O funcionário da expedição deve ter acesso a tela com lista de pedidos pendentes

2. A lista deve exibir:
   - Número do pedido
   - Data do pedido
   - Nome do cliente
   - Prazo de envio
   - Status

3. O sistema deve permitir:
   - Filtrar por status
   - Ordenar por prioridade, data, prazo de envio
   - Visualizar detalhes do pedido

4. Ao clicar em um pedido, o funcionário deve ver:
   - Lista de produtos a serem separados
   - Localização dos produtos no estoque (se aplicável)

**Regras de Negócio:**
- RN-048: Apenas pedidos "Aprovado" ou "Em Preparação" devem aparecer na lista
- RN-049: Pedidos mais antigos ou com prazo mais curto devem ter prioridade visual

**Requisitos Não Funcionais:**
- RNF-046: Lista deve carregar rapidamente mesmo com grande volume
- RNF-047: Interface deve ser projetada para uso em ambiente de expedição

---

### RF-025: Registro de Saída de Estoque

**História de Usuário:** HU-28  
**Prioridade:** Alta

**Descrição:** O sistema deve permitir registrar saída de produtos do estoque após separação.

**Requisitos Detalhados:**

1. Após separação de um pedido, o funcionário deve poder registrar baixa dos itens

2. A baixa pode ser feita:
   - Manualmente (selecionando produtos e quantidades)
   - Por leitura de código de barras

3. O sistema deve:
   - Confirmar a baixa
   - Atualizar estoque disponível em tempo real
   - Alertar se houver tentativa de baixar item não disponível

**Regras de Negócio:**
- RN-050: Apenas funcionários autorizados da expedição podem realizar baixa
- RN-051: Quantidade baixada deve corresponder à quantidade do pedido

**Requisitos Não Funcionais:**
- RNF-048: Processo de baixa deve ser rápido e eficiente
- RNF-049: Integração com leitores de código de barras deve ser fluida

---

### RF-026: Geração de Documentos de Envio

**História de Usuário:** HU-29  
**Prioridade:** Alta

**Descrição:** O sistema deve gerar etiquetas de envio e notas fiscais.

**Requisitos Detalhados:**

1. Para cada pedido na lista de expedição, o funcionário deve poder gerar:
   - Etiqueta de envio (com informações para transportadora)
   - Nota Fiscal (se aplicável)

2. A etiqueta de envio deve conter:
   - Endereço completo de entrega
   - Dados do cliente
   - Peso e dimensões
   - Código de rastreamento

3. O sistema deve permitir:
   - Impressão individual
   - Impressão em lote

4. A emissão de Nota Fiscal deve estar integrada a sistema fiscal ou gerar documento conforme legislação

**Regras de Negócio:**
- RN-052: Informações da etiqueta devem ser puxadas automaticamente dos dados do pedido
- RN-053: Emissão de notas fiscais deve estar em conformidade com legislação fiscal

**Requisitos Não Funcionais:**
- RNF-050: Geração de documentos deve ser rápida e formatada para impressão
- RNF-051: Integração com sistemas de transportadoras e fiscais deve ser robusta

---

## 9. Módulo: Produção (Torrefação)

### RF-027: Registro de Torra de Lotes

**História de Usuário:** HU-30  
**Prioridade:** Média

**Descrição:** O sistema deve permitir registrar torra de novos lotes de café.

**Requisitos Detalhados:**

1. O barista/responsável deve ter acesso a interface para registrar novos lotes

2. O registro deve incluir:
   - Data da torra
   - Tipo de grão
   - Peso antes da torra (kg)
   - Peso após a torra (kg)
   - Nível de torra
   - Observações

3. O sistema deve:
   - Gerar identificador único para cada lote
   - Permitir visualizar histórico de torras
   - Associar lotes a produtos (para rastreabilidade)

**Regras de Negócio:**
- RN-054: Apenas usuários com perfil "Barista" ou "Produção" podem registrar torras
- RN-055: Sistema pode sugerir níveis de torra com base no tipo de grão

**Requisitos Não Funcionais:**
- RNF-052: Interface de registro deve ser simples e rápida
- RNF-053: Dados devem permitir relatórios de rastreabilidade e qualidade

---

## 10. Módulo: Interface e Usabilidade

### RF-028: Experiência Responsiva

**História de Usuário:** HU-17  
**Prioridade:** Alta

**Descrição:** O sistema deve ser totalmente responsivo para diferentes dispositivos.

**Requisitos Detalhados:**

1. Todas as páginas devem se adaptar a:
   - Smartphones
   - Tablets
   - Desktops

2. Elementos interativos devem ser:
   - Tamanho adequado para toque em mobile
   - Fáceis de usar em telas pequenas

3. O checkout deve ser simplificado para dispositivos móveis

4. O menu de navegação deve ser acessível (menu hambúrguer em mobile)

**Requisitos Não Funcionais:**
- RNF-054: Tempo de carregamento em mobile deve ser otimizado
- RNF-055: Compatibilidade com principais navegadores móveis (Chrome, Safari, Firefox)

---

## 11. Matriz de Rastreabilidade

| RF | HU Relacionada | Prioridade | Módulo |
|----|----------------|------------|--------|
| RF-001 | HU-01 | Alta | Gestão de Contas |
| RF-002 | HU-01 | Alta | Gestão de Contas |
| RF-003 | HU-24 | Alta | Gestão de Contas |
| RF-004 | HU-02 | Alta | Catálogo |
| RF-005 | HU-05 | Alta | Catálogo |
| RF-006 | HU-15 | Média | Catálogo |
| RF-007 | HU-03 | Alta | Carrinho |
| RF-008 | HU-06 | Média | Carrinho |
| RF-009 | HU-07 | Alta | Checkout |
| RF-010 | HU-08 | Alta | Checkout |
| RF-011 | HU-04 | Alta | Pós-Venda |
| RF-012 | HU-09 | Alta | Pós-Venda |
| RF-013 | HU-10 | Média | Fidelidade |
| RF-014 | HU-11 | Média | Funcionalidades |
| RF-015 | HU-16 | Média | Funcionalidades |
| RF-016 | HU-12 | Baixa | Funcionalidades |
| RF-017 | HU-13 | Baixa | Funcionalidades |
| RF-018 | HU-18 | Alta | Backoffice |
| RF-019 | HU-20 | Alta | Backoffice |
| RF-020 | HU-21 | Média | Backoffice |
| RF-021 | HU-23 | Média | Backoffice |
| RF-022 | HU-25 | Alta | Backoffice |
| RF-023 | HU-26 | Alta | Expedição |
| RF-024 | HU-27 | Alta | Expedição |
| RF-025 | HU-28 | Alta | Expedição |
| RF-026 | HU-29 | Alta | Expedição |
| RF-027 | HU-30 | Média | Produção |
| RF-028 | HU-17 | Alta | Interface |

---

## 12. Aprovações

| Nome | Cargo | Assinatura | Data |
|------|-------|------------|------|
| Tiago Soares Carneiro da Cunha | Desenvolvedor/Responsável | ___________ | ___/___/___ |

---

**Próximos Passos:**
- Detalhar requisitos não funcionais
- Criar casos de teste para cada requisito
- Validar requisitos com stakeholders
# 6. Requisitos Não Funcionais

## Soto Café - E-commerce de Cafeteria Gourmet

**Versão:** 1.0  
**Data:** 2025  
**Autor:** Tiago Soares Carneiro da Cunha

---

## 1. Introdução

Este documento descreve os requisitos não funcionais (RNF) do sistema Soto Café. Os requisitos não funcionais definem as características de qualidade, desempenho, segurança e outras propriedades do sistema que não estão diretamente relacionadas às funcionalidades.

---

## 2. Requisitos de Performance

### RNF-PERF-001: Tempo de Resposta

**Descrição:** O sistema deve responder às requisições do usuário dentro de tempos aceitáveis.

**Especificações:**
- Página inicial: carregar em até 2 segundos
- Páginas de categoria: carregar em até 2 segundos
- Página de produto: carregar em até 1,5 segundos
- Busca de produtos: resultados em até 1 segundo
- Adição ao carrinho: processar em até 1 segundo
- Cálculo de frete: processar em até 2 segundos
- Processamento de pagamento (Pix/Cartão): processar em até 3 segundos
- Login: processar em até 2 segundos
- Cadastro: processar em até 5 segundos
- Painel administrativo: carregar em até 3 segundos
- Página "Meus Pedidos": carregar em até 3 segundos

**Prioridade:** Alta

---

### RNF-PERF-002: Throughput

**Descrição:** O sistema deve suportar um número mínimo de requisições simultâneas.

**Especificações:**
- Suportar pelo menos 100 usuários simultâneos navegando
- Suportar pelo menos 50 transações de pagamento simultâneas
- Processar pelo menos 1000 requisições por minuto

**Prioridade:** Média

---

### RNF-PERF-003: Escalabilidade

**Descrição:** O sistema deve ser capaz de escalar para suportar crescimento.

**Especificações:**
- Arquitetura deve permitir escalonamento horizontal
- Banco de dados deve suportar crescimento de dados sem degradação significativa
- Sistema deve suportar aumento de 10x no volume de transações sem refatoração completa

**Prioridade:** Alta

---

## 3. Requisitos de Disponibilidade

### RNF-DISP-001: Uptime

**Descrição:** O sistema deve estar disponível durante a maior parte do tempo.

**Especificações:**
- Disponibilidade mínima de 99,5% (aproximadamente 3,6 horas de downtime por mês)
- Manutenções programadas devem ser realizadas em horários de baixo tráfego
- Sistema deve ter redundância para evitar pontos únicos de falha

**Prioridade:** Alta

---

### RNF-DISP-002: Recuperação de Falhas

**Descrição:** O sistema deve se recuperar rapidamente de falhas.

**Especificações:**
- Tempo médio de recuperação (MTTR) de no máximo 1 hora
- Sistema deve ter backup automático dos dados
- Backup deve ser testado regularmente

**Prioridade:** Alta

---

## 4. Requisitos de Segurança

### RNF-SEG-001: Autenticação e Autorização

**Descrição:** O sistema deve garantir que apenas usuários autorizados acessem funcionalidades.

**Especificações:**
- Senhas devem ser criptografadas usando algoritmo de hash seguro (bcrypt, Argon2)
- Sessões devem ser gerenciadas de forma segura
- Tokens de autenticação devem expirar após período de inatividade
- Implementar proteção contra ataques de força bruta (rate limiting)

**Prioridade:** Alta

---

### RNF-SEG-002: Proteção de Dados

**Descrição:** Dados sensíveis devem ser protegidos.

**Especificações:**
- Todas as comunicações devem usar HTTPS (TLS 1.2 ou superior)
- Dados de pagamento não devem ser armazenados localmente (usar tokenização)
- Dados pessoais devem estar em conformidade com LGPD
- Implementar criptografia de dados sensíveis em repouso

**Prioridade:** Alta

---

### RNF-SEG-003: Conformidade PCI-DSS

**Descrição:** O sistema deve estar em conformidade com padrões de segurança para pagamentos.

**Especificações:**
- Integração com gateway de pagamento deve seguir padrões PCI-DSS
- Dados de cartão de crédito não devem ser armazenados no sistema
- Processamento de pagamento deve ser feito através de gateway certificado

**Prioridade:** Alta

---

### RNF-SEG-004: Proteção contra Ataques

**Descrição:** O sistema deve estar protegido contra ataques comuns.

**Especificações:**
- Proteção contra SQL Injection
- Proteção contra XSS (Cross-Site Scripting)
- Proteção contra CSRF (Cross-Site Request Forgery)
- Implementar rate limiting para prevenir DDoS
- Validação de entrada de dados

**Prioridade:** Alta

---

## 5. Requisitos de Usabilidade

### RNF-USAB-001: Interface Intuitiva

**Descrição:** A interface deve ser fácil de usar e intuitiva.

**Especificações:**
- Interface deve seguir padrões de design web modernos
- Navegação deve ser clara e consistente
- Mensagens de erro devem ser claras e acionáveis
- Feedback visual deve ser fornecido para ações do usuário

**Prioridade:** Alta

---

### RNF-USAB-002: Responsividade

**Descrição:** O sistema deve funcionar bem em diferentes dispositivos.

**Especificações:**
- Interface deve ser totalmente responsiva
- Funcionalidade completa em smartphones, tablets e desktops
- Elementos interativos devem ter tamanho adequado para toque
- Layout deve se adaptar a diferentes tamanhos de tela

**Prioridade:** Alta

---

### RNF-USAB-003: Acessibilidade

**Descrição:** O sistema deve ser acessível para pessoas com deficiências.

**Especificações:**
- Conformidade com WCAG 2.1 nível AA
- Suporte a leitores de tela
- Navegação por teclado
- Contraste adequado de cores
- Textos alternativos para imagens

**Prioridade:** Média

---

## 6. Requisitos de Compatibilidade

### RNF-COMP-001: Navegadores

**Descrição:** O sistema deve funcionar nos principais navegadores.

**Especificações:**
- Google Chrome (últimas 2 versões)
- Mozilla Firefox (últimas 2 versões)
- Safari (últimas 2 versões)
- Microsoft Edge (últimas 2 versões)
- Navegadores móveis (Chrome Mobile, Safari Mobile)

**Prioridade:** Alta

---

### RNF-COMP-002: Sistemas Operacionais

**Descrição:** O sistema deve funcionar em diferentes sistemas operacionais.

**Especificações:**
- Windows 10/11
- macOS (últimas 2 versões)
- Linux (distribuições principais)
- iOS (últimas 2 versões)
- Android (últimas 2 versões)

**Prioridade:** Média

---

## 7. Requisitos de Manutenibilidade

### RNF-MANT-001: Código Limpo

**Descrição:** O código deve ser fácil de manter e modificar.

**Especificações:**
- Código deve seguir padrões de codificação definidos
- Código deve ser bem documentado
- Estrutura de pastas deve ser organizada
- Nomes de variáveis e funções devem ser descritivos

**Prioridade:** Alta

---

### RNF-MANT-002: Testabilidade

**Descrição:** O sistema deve ser facilmente testável.

**Especificações:**
- Cobertura de testes unitários mínima de 80%
- Testes de integração para funcionalidades críticas
- Testes end-to-end para fluxos principais
- Testes automatizados devem fazer parte do pipeline de CI/CD

**Prioridade:** Alta

---

### RNF-MANT-003: Versionamento

**Descrição:** O código deve estar sob controle de versão.

**Especificações:**
- Uso de sistema de controle de versão (Git)
- Commits devem ser descritivos
- Branching strategy definida (Git Flow ou similar)
- Tags de versão para releases

**Prioridade:** Alta

---

## 8. Requisitos de Portabilidade

### RNF-PORT-001: Deploy

**Descrição:** O sistema deve ser facilmente implantável em diferentes ambientes.

**Especificações:**
- Deploy automatizado
- Configuração através de variáveis de ambiente
- Suporte a ambientes: desenvolvimento, staging, produção
- Documentação de processo de deploy

**Prioridade:** Média

---

## 9. Requisitos de Confiabilidade

### RNF-CONF-001: Integridade de Dados

**Descrição:** O sistema deve garantir integridade dos dados.

**Especificações:**
- Transações de banco de dados devem ser atômicas
- Validação de dados em múltiplas camadas
- Backup automático e regular
- Sistema de logs para auditoria

**Prioridade:** Alta

---

### RNF-CONF-002: Tratamento de Erros

**Descrição:** O sistema deve tratar erros de forma adequada.

**Especificações:**
- Erros não devem expor informações sensíveis
- Logs de erro devem ser registrados para análise
- Usuário deve receber mensagens de erro amigáveis
- Sistema deve se recuperar de erros quando possível

**Prioridade:** Alta

---

## 10. Requisitos de Integração

### RNF-INT-001: APIs Externas

**Descrição:** O sistema deve integrar com serviços externos de forma confiável.

**Especificações:**
- Integração com gateway de pagamento
- Integração com APIs de cálculo de frete
- Integração com serviços de e-mail transacional
- Tratamento de falhas em integrações externas
- Retry logic para requisições falhadas

**Prioridade:** Alta

---

### RNF-INT-002: Disponibilidade de APIs Externas

**Descrição:** O sistema deve funcionar mesmo quando APIs externas estão indisponíveis.

**Especificações:**
- Fallback para quando APIs de frete estão indisponíveis
- Cache de dados quando apropriado
- Timeout adequado para requisições externas
- Notificações quando integrações falham

**Prioridade:** Média

---

## 11. Requisitos de Documentação

### RNF-DOC-001: Documentação Técnica

**Descrição:** O sistema deve ter documentação técnica completa.

**Especificações:**
- Documentação de arquitetura
- Documentação de API
- Documentação de banco de dados
- README com instruções de instalação e execução
- Comentários no código

**Prioridade:** Média

---

### RNF-DOC-002: Documentação de Usuário

**Descrição:** O sistema deve ter documentação para usuários finais.

**Especificações:**
- Manual do usuário
- Manual do administrador
- FAQ integrado
- Tutoriais e guias

**Prioridade:** Baixa

---

## 12. Requisitos de Monitoramento

### RNF-MON-001: Logging

**Descrição:** O sistema deve registrar logs adequados.

**Especificações:**
- Logs de erros e exceções
- Logs de transações importantes
- Logs de auditoria para ações administrativas
- Níveis de log apropriados (DEBUG, INFO, WARN, ERROR)
- Retenção de logs por período definido

**Prioridade:** Média

---

### RNF-MON-002: Métricas

**Descrição:** O sistema deve coletar métricas de performance e uso.

**Especificações:**
- Métricas de performance (tempo de resposta, throughput)
- Métricas de uso (número de usuários, transações)
- Alertas para métricas críticas
- Dashboard de monitoramento

**Prioridade:** Média

---

## 13. Requisitos Legais e Regulatórios

### RNF-LEG-001: LGPD

**Descrição:** O sistema deve estar em conformidade com a LGPD.

**Especificações:**
- Consentimento explícito para coleta de dados
- Direito ao esquecimento (exclusão de dados)
- Portabilidade de dados
- Política de privacidade clara
- Proteção de dados pessoais

**Prioridade:** Alta

---

### RNF-LEG-002: Notas Fiscais

**Descrição:** O sistema deve gerar notas fiscais conforme legislação.

**Especificações:**
- Integração com sistema de emissão de NF-e
- Conformidade com legislação fiscal vigente
- Armazenamento de documentos fiscais

**Prioridade:** Alta

---

## 14. Requisitos de Capacidade

### RNF-CAP-001: Armazenamento

**Descrição:** O sistema deve suportar crescimento de dados.

**Especificações:**
- Banco de dados deve suportar pelo menos 100.000 produtos
- Suportar pelo menos 1.000.000 de pedidos
- Suportar pelo menos 500.000 usuários
- Armazenamento de imagens otimizado

**Prioridade:** Média

---

## 15. Matriz de Prioridades

| Categoria | Prioridade Geral | Observações |
|-----------|------------------|-------------|
| Performance | Alta | Crítico para experiência do usuário |
| Disponibilidade | Alta | E-commerce precisa estar sempre disponível |
| Segurança | Alta | Crítico para proteção de dados e pagamentos |
| Usabilidade | Alta | Impacta diretamente na conversão |
| Compatibilidade | Alta | Necessário para alcançar todos os usuários |
| Manutenibilidade | Alta | Facilita evolução do sistema |
| Confiabilidade | Alta | Garante integridade dos dados |
| Integração | Alta | Dependências críticas |
| Monitoramento | Média | Importante para operação |
| Documentação | Média | Facilita manutenção |
| Legal | Alta | Conformidade obrigatória |
| Capacidade | Média | Planejamento para crescimento |

---

## 16. Métricas de Sucesso

### 16.1 Performance
- 95% das páginas carregam em menos de 2 segundos
- 99% das requisições são processadas em menos de 3 segundos

### 16.2 Disponibilidade
- Uptime de 99,5% ou superior
- MTTR de menos de 1 hora

### 16.3 Segurança
- Zero incidentes de segurança críticos
- 100% das senhas criptografadas
- 100% das comunicações via HTTPS

### 16.4 Usabilidade
- Taxa de conclusão de checkout acima de 70%
- Tempo médio para completar compra menor que 5 minutos

---

## 17. Aprovações

| Nome | Cargo | Assinatura | Data |
|------|-------|------------|------|
| Tiago Soares Carneiro da Cunha | Desenvolvedor/Responsável | ___________ | ___/___/___ |

---

**Próximos Passos:**
- Validar requisitos não funcionais com stakeholders
- Definir métricas específicas de monitoramento
- Estabelecer SLAs (Service Level Agreements)
# 7. Histórias de Usuário

## Soto Café - E-commerce de Cafeteria Gourmet

**Versão:** 1.0  
**Data:** 2025  
**Autor:** Tiago Soares Carneiro da Cunha  
**RGM:** 44030509

---

## 1. Introdução

Este documento apresenta as 30 histórias de usuário (User Stories) do projeto Soto Café, organizadas por tema funcional. Cada história segue o formato padrão: "Como [tipo de usuário], eu quero [ação] para que [benefício]".

---

## 2. Histórias de Usuário - Cliente

### HU-01: Criar Conta de Usuário

**Título:** Criar Conta de Usuário  
**Requerente:** Cliente Novo  
**Prioridade:** Alta  
**Pontos de História:** 5

**Descrição:**
Como cliente novo, eu quero me cadastrar facilmente no site para que possa realizar compras e acompanhar meus pedidos.

**Comentários:**
A criação de conta deve validar dados como e-mail único, senha forte e coletar informações básicas para futuras compras (nome, telefone).

**Critérios de Aceitação:**
- CA#1: O sistema deve validar que o e-mail informado não está cadastrado
- CA#2: A senha deve ter no mínimo 8 caracteres, incluindo letras, números e pelo menos um caractere especial
- CA#3: O sistema deve enviar um e-mail de confirmação de cadastro com um link de ativação da conta
- CA#4: Após o cadastro e ativação, o usuário deve conseguir fazer login com as credenciais criadas

**Regras de Negócio:**
- RN#1: E-mail deve ser único por usuário
- RN#2: Senha deve ser criptografada antes do armazenamento no banco de dados
- RN#3: Campos obrigatórios para cadastro: Nome Completo, E-mail, Senha, Confirmação de Senha

**Requisitos Não Funcionais:**
- RNF#1: O processo de cadastro e envio de e-mail deve ser concluído em até 5 segundos
- RNF#2: Os dados do usuário devem ser transmitidos e armazenados utilizando protocolos e práticas de segurança (HTTPS, criptografia)

---

### HU-02: Navegar por Categorias de Produtos

**Título:** Navegar por Categorias de Produtos  
**Requerente:** Cliente Curioso  
**Prioridade:** Alta  
**Pontos de História:** 3

**Descrição:**
Como cliente, eu quero navegar por categorias de café (Ex: Grãos, Moído, Cápsulas, Kits) para que possa encontrar rapidamente o tipo de café que procuro.

**Comentários:**
As categorias devem ser claras e permitir filtros adicionais (origem, torra, preço) para refinar a busca.

**Critérios de Aceitação:**
- CA#1: O sistema deve exibir as categorias de produtos de forma clara na navegação do site (menu principal, sidebar)
- CA#2: Ao clicar em uma categoria, o sistema deve listar apenas os produtos pertencentes a ela
- CA#3: Deve ser possível aplicar filtros por subcategorias, origem, torra, ou tipo de moagem (se aplicável)
- CA#4: A navegação entre categorias e a aplicação de filtros deve ser intuitiva

**Regras de Negócio:**
- RN#1: A categorização dos produtos deve seguir a estrutura de classes definida pela gestão de estoque
- RN#2: Produtos sem estoque devem ser exibidos com uma etiqueta de "Indisponível" ou não aparecer (definir regra)

**Requisitos Não Funcionais:**
- RNF#1: A página de categoria deve carregar em até 2 segundos, mesmo com muitos produtos
- RNF#2: A navegação e os filtros devem funcionar corretamente em diferentes dispositivos (desktop, tablet, mobile)

---

### HU-03: Adicionar Produto ao Carrinho

**Título:** Adicionar Produto ao Carrinho  
**Requerente:** Cliente Conveniente  
**Prioridade:** Alta  
**Pontos de História:** 3

**Descrição:**
Como cliente, eu quero adicionar vários produtos ao carrinho de compras para que possa finalizar uma única transação para todos os itens desejados.

**Comentários:**
O processo de adição ao carrinho deve ser simples, com confirmação visual e fácil acesso ao carrinho.

**Critérios de Aceitação:**
- CA#1: O botão "Adicionar ao Carrinho" deve estar visível e funcional na página de detalhes do produto e, se possível, na listagem de produtos
- CA#2: Ao adicionar um produto, o sistema deve exibir uma confirmação visual (ex: um pop-up ou atualização de ícone do carrinho)
- CA#3: O carrinho de compras deve exibir a lista de produtos adicionados, suas quantidades e o subtotal
- CA#4: Deve ser possível ajustar a quantidade de um item ou removê-lo do carrinho

**Regras de Negócio:**
- RN#1: Não deve ser possível adicionar ao carrinho uma quantidade maior do que a disponível em estoque
- RN#2: O preço do produto no carrinho deve refletir o preço atual de venda

**Requisitos Não Funcionais:**
- RNF#1: A adição de um produto ao carrinho deve ser quase instantânea (menos de 1 segundo)
- RNF#2: O carrinho deve ser persistente mesmo que o usuário feche o navegador e retorne (ex: por 24h ou até a compra ser finalizada)

---

### HU-04: Acompanhar Status do Pedido

**Título:** Acompanhar Status do Pedido  
**Requerente:** Cliente Atento  
**Prioridade:** Alta  
**Pontos de História:** 8

**Descrição:**
Como cliente, eu quero acompanhar o status do meu pedido (confirmado, em preparação, enviado, entregue) para que possa saber onde meu café está a qualquer momento.

**Comentários:**
O cliente deve ter uma página dedicada para visualizar o histórico de seus pedidos e o status atual de cada um.

**Critérios de Aceitação:**
- CA#1: O cliente logado deve ter uma seção "Meus Pedidos" em seu perfil
- CA#2: Na lista de pedidos, cada item deve exibir o número do pedido, data, valor e status atual
- CA#3: Ao clicar em um pedido específico, o cliente deve ver um detalhamento do status (com data/hora da mudança de status) e, se aplicável, o código de rastreamento da transportadora
- CA#4: O sistema deve enviar notificações por e-mail a cada mudança de status importante (confirmação, envio, entrega)

**Regras de Negócio:**
- RN#1: A atualização dos status deve ser manual pela equipe da cafeteria ou automatizada via integração com transportadora
- RN#2: Apenas pedidos com status "Enviado" devem exibir código de rastreamento

**Requisitos Não Funcionais:**
- RNF#1: A página de "Meus Pedidos" deve carregar em até 3 segundos
- RNF#2: O sistema de notificações por e-mail deve ter alta disponibilidade e garantir a entrega das mensagens

---

### HU-06: Aplicar Cupons de Desconto

**Título:** Aplicar Cupons de Desconto  
**Requerente:** Cliente Otimizador  
**Prioridade:** Média  
**Pontos de História:** 5

**Descrição:**
Como cliente, eu quero aplicar cupons de desconto ou vouchers no carrinho para que possa aproveitar promoções e economizar.

**Comentários:**
O campo para inserir o cupom deve ser claro e o desconto deve ser aplicado imediatamente no subtotal.

**Critérios de Aceitação:**
- CA#1: O sistema deve exibir um campo no carrinho de compras ou no checkout para inserção de cupom/voucher
- CA#2: Ao inserir um código de cupom válido, o sistema deve aplicar o desconto correspondente e atualizar o valor total do pedido
- CA#3: Se o cupom for inválido ou já tiver sido usado, o sistema deve exibir uma mensagem de erro clara
- CA#4: Cupons com data de validade expirada ou limite de uso excedido não devem ser aplicados

**Regras de Negócio:**
- RN#1: Cada cupom tem uma validade (data de início e fim) e um limite de uso (por cliente ou total)
- RN#2: Cupons podem ser percentuais (ex: 10% OFF) ou de valor fixo (ex: R$20 OFF)
- RN#3: Cupons podem ser aplicáveis a categorias específicas de produtos ou ao valor total do pedido

**Requisitos Não Funcionais:**
- RNF#1: A validação e aplicação do cupom deve ocorrer em menos de 1 segundo
- RNF#2: A interface de aplicação de cupom deve ser intuitiva e responsiva em dispositivos móveis

---

### HU-07: Visualizar Opções de Frete

**Título:** Visualizar Opções de Frete  
**Requerente:** Cliente Preocupado com a Entrega  
**Prioridade:** Alta  
**Pontos de História:** 8

**Descrição:**
Como cliente, eu quero visualizar as opções de frete e prazos de entrega para o meu CEP para que possa escolher a modalidade que melhor se adapta à minha necessidade.

**Comentários:**
As opções de frete devem ser apresentadas de forma clara com o valor e o prazo estimado.

**Critérios de Aceitação:**
- CA#1: No carrinho de compras ou no checkout, deve haver um campo para inserir o CEP do cliente
- CA#2: Após a inserção do CEP, o sistema deve exibir as modalidades de frete disponíveis (ex: PAC, SEDEX, Motoboy) com seus respectivos valores e prazos estimados
- CA#3: O valor do frete selecionado deve ser somado ao total do pedido
- CA#4: Para CEPs não atendidos, o sistema deve exibir uma mensagem informando a impossibilidade de entrega

**Regras de Negócio:**
- RN#1: Os valores e prazos de frete devem ser calculados com base em tabelas de transportadoras e/ou regras de negócio da cafeteria (ex: frete grátis acima de X valor)
- RN#2: O cálculo do frete pode considerar peso, dimensões dos produtos e CEP de origem/destino

**Requisitos Não Funcionais:**
- RNF#1: O cálculo e exibição das opções de frete deve ocorrer em no máximo 2 segundos
- RNF#2: O sistema deve ser capaz de integrar com APIs de cálculo de frete de transportadoras

---

### HU-08: Realizar Pagamento Seguro

**Título:** Realizar Pagamento Seguro  
**Requerente:** Cliente Seguro  
**Prioridade:** Alta  
**Pontos de História:** 13

**Descrição:**
Como cliente, eu quero realizar o pagamento de forma segura (Cartão de Crédito, Pix, Boleto) para que possa ter certeza de que minhas informações financeiras estão protegidas.

**Comentários:**
O processo de pagamento deve ser transparente, seguro e oferecer múltiplas opções.

**Critérios de Aceitação:**
- CA#1: O sistema deve apresentar as opções de pagamento disponíveis (Cartão de Crédito, Pix, Boleto) no checkout
- CA#2: Para cartão de crédito, o sistema deve coletar dados como número, validade, CVV e nome do titular em ambiente seguro
- CA#3: Para Pix, o sistema deve gerar um QR Code e/ou um código Pix Copia e Cola
- CA#4: Para Boleto, o sistema deve gerar um boleto bancário para impressão ou download
- CA#5: Após a confirmação do pagamento, o sistema deve exibir uma mensagem de sucesso e redirecionar para a página de confirmação do pedido

**Regras de Negócio:**
- RN#1: A integração com o gateway de pagamento deve seguir os padrões de segurança PCI-DSS (para cartão de crédito)
- RN#2: Pagamentos via Pix e Cartão de Crédito devem ter validação em tempo real. Boleto tem prazo de compensação

**Requisitos Não Funcionais:**
- RNF#1: A página de pagamento deve ter um certificado SSL válido (HTTPS)
- RNF#2: O tempo de processamento do pagamento deve ser otimizado para a melhor experiência do usuário (ex: Pix e Cartão em < 3 segundos)
- RNF#3: A integração com o gateway de pagamento deve ser robusta e ter alta disponibilidade

---

### HU-09: Receber Confirmação do Pedido por E-mail

**Título:** Receber Confirmação do Pedido por E-mail  
**Requerente:** Cliente Ansioso  
**Prioridade:** Alta  
**Pontos de História:** 3

**Descrição:**
Como cliente, eu quero receber confirmação do pedido por e-mail após a compra para que possa ter certeza de que meu pedido foi processado.

**Comentários:**
O e-mail deve conter todos os detalhes do pedido e um link para acompanhamento.

**Critérios de Aceitação:**
- CA#1: Após a finalização bem-sucedida do pedido, o sistema deve enviar um e-mail de confirmação para o endereço de e-mail cadastrado do cliente
- CA#2: O e-mail de confirmação deve conter o número do pedido, lista de produtos, valor total, endereço de entrega e método de pagamento
- CA#3: O e-mail deve incluir um link para a página de "Meus Pedidos" ou para o acompanhamento específico do pedido

**Regras de Negócio:**
- RN#1: O e-mail deve ser enviado somente após a confirmação do pagamento (ou no caso de boleto, após a geração do boleto)
- RN#2: O template do e-mail deve ser padronizado e conter a logo da cafeteria

**Requisitos Não Funcionais:**
- RNF#1: O envio do e-mail de confirmação deve ocorrer em até 1 minuto após a aprovação do pagamento
- RNF#2: O serviço de envio de e-mails deve ter alta taxa de entrega (não cair em spam)

---

### HU-10: Acumular Pontos em Programa de Fidelidade

**Título:** Acumular Pontos em Programa de Fidelidade  
**Requerente:** Cliente Fidelizado  
**Prioridade:** Média  
**Pontos de História:** 8

**Descrição:**
Como cliente, eu quero acumular pontos ou ter acesso a um programa de fidelidade para que possa receber descontos ou benefícios exclusivos em futuras compras.

**Comentários:**
O programa de fidelidade deve ser transparente e de fácil acesso, com o saldo de pontos visível.

**Critérios de Aceitação:**
- CA#1: O sistema deve exibir o saldo de pontos do cliente em seu perfil
- CA#2: Após cada compra concluída, os pontos devem ser adicionados ao saldo do cliente com base nas regras do programa
- CA#3: O cliente deve ter a opção de resgatar pontos por descontos ou produtos específicos em compras futuras
- CA#4: O sistema deve notificar o cliente sobre o status de seus pontos e promoções exclusivas para fidelizados

**Regras de Negócio:**
- RN#1: A regra de conversão de valor gasto para pontos deve ser configurável (ex: R$1 gasto = 1 ponto)
- RN#2: A regra de resgate de pontos deve ser configurável (ex: 100 pontos = R$5 de desconto ou produto X)
- RN#3: Pontos podem ter validade

**Requisitos Não Funcionais:**
- RNF#1: A atualização do saldo de pontos deve ser em tempo real após a conclusão da compra
- RNF#2: O sistema deve ser escalável para suportar um grande volume de clientes e transações de pontos

---

### HU-11: Encontrar Kits de Presente Personalizáveis

**Título:** Encontrar Kits de Presente Personalizáveis  
**Requerente:** Cliente Presenteador  
**Prioridade:** Média  
**Pontos de História:** 8

**Descrição:**
Como cliente, eu quero encontrar kits de presente personalizáveis com diferentes cafés e acessórios para que possa surpreender amigos e familiares com um presente especial de café.

**Comentários:**
A funcionalidade deve permitir a seleção de itens para compor um kit, com visualização do preço final.

**Critérios de Aceitação:**
- CA#1: O site deve ter uma seção dedicada a "Kits de Presente" ou "Monte seu Kit"
- CA#2: O cliente deve conseguir selecionar uma base (ex: caixa, cesta) e adicionar produtos de diferentes categorias (cafés, xícaras, acessórios) ao kit
- CA#3: O preço do kit deve ser atualizado dinamicamente conforme os itens são adicionados
- CA#4: Deve haver uma opção para adicionar uma mensagem personalizada ao presente

**Regras de Negócio:**
- RN#1: A seleção de itens para kits pode ser limitada a produtos específicos ou categorias para evitar incompatibilidades
- RN#2: Pode haver um preço mínimo ou máximo para kits personalizados

**Requisitos Não Funcionais:**
- RNF#1: A interface de montagem do kit deve ser visualmente atraente e fácil de usar
- RNF#2: A experiência em dispositivos móveis para montar o kit deve ser fluida

---

### HU-12: Acessar Seção de Perguntas Frequentes (FAQ)

**Título:** Acessar Seção de Perguntas Frequentes (FAQ)  
**Requerente:** Cliente com Dúvidas  
**Prioridade:** Baixa  
**Pontos de História:** 2

**Descrição:**
Como cliente, eu quero acessar uma seção de Perguntas Frequentes (FAQ) para que possa encontrar respostas rápidas para minhas dúvidas mais comuns.

**Comentários:**
A FAQ deve ser organizada por tópicos e de fácil pesquisa.

**Critérios de Aceitação:**
- CA#1: O site deve ter um link claro para a seção de FAQ (ex: no rodapé ou menu de ajuda)
- CA#2: A FAQ deve ser organizada por categorias (ex: "Pedidos", "Envio", "Produtos", "Pagamento")
- CA#3: Deve ser possível pesquisar por termos específicos dentro da FAQ
- CA#4: As respostas devem ser claras e concisas

**Regras de Negócio:**
- RN#1: O conteúdo da FAQ deve ser gerenciável pelo administrador do e-commerce

**Requisitos Não Funcionais:**
- RNF#1: A página da FAQ deve carregar rapidamente
- RNF#2: A funcionalidade de busca da FAQ deve ser eficiente

---

### HU-13: Acessar Blog de Conteúdo sobre Café

**Título:** Acessar Blog de Conteúdo sobre Café  
**Requerente:** Cliente que Gosta de Aprender  
**Prioridade:** Baixa  
**Pontos de História:** 5

**Descrição:**
Como cliente, eu quero acessar um blog ou área de conteúdo com artigos sobre café (preparo, história, tipos, harmonização) para que possa aprimorar meus conhecimentos sobre o universo do café gourmet.

**Comentários:**
O blog deve ter artigos bem escritos e imagens de qualidade, com opções de compartilhamento.

**Critérios de Aceitação:**
- CA#1: O site deve ter um link visível para o blog ou área de conteúdo
- CA#2: O blog deve exibir uma lista de artigos com títulos e miniaturas
- CA#3: Cada artigo deve ser legível, com formatação adequada e imagens/vídeos
- CA#4: Deve haver opções de compartilhamento social para os artigos

**Regras de Negócio:**
- RN#1: O conteúdo do blog deve ser gerenciável por um CMS (Content Management System) interno ou externo
- RN#2: Artigos podem ser categorizados por tópicos ou tags

**Requisitos Não Funcionais:**
- RNF#1: As páginas do blog devem ser otimizadas para SEO (Search Engine Optimization)
- RNF#2: O carregamento das páginas do blog deve ser rápido

---

### HU-14: Contatar Suporte ao Cliente

**Título:** Contatar Suporte ao Cliente  
**Requerente:** Cliente com Problemas  
**Prioridade:** Média  
**Pontos de História:** 5

**Descrição:**
Como cliente, eu quero contatar o suporte ao cliente por chat ou e-mail para que possa resolver problemas com meu pedido ou produtos.

**Comentários:**
As opções de contato devem ser visíveis e o atendimento eficiente.

**Critérios de Aceitação:**
- CA#1: O site deve exibir claramente as opções de contato (ex: link para chat, formulário de e-mail, telefone)
- CA#2: O chat online deve estar disponível em horário comercial, com chatbot para atendimento fora de horário
- CA#3: O formulário de e-mail deve permitir ao cliente descrever o problema e anexar arquivos
- CA#4: O cliente deve receber uma confirmação de recebimento do contato

**Regras de Negócio:**
- RN#1: Todos os contatos devem ser registrados em um sistema de CRM/atendimento
- RN#2: O tempo de resposta para e-mails deve ser definido (ex: 24h úteis)

**Requisitos Não Funcionais:**
- RNF#1: O chat deve ter alta disponibilidade e baixa latência
- RNF#2: O sistema de e-mail deve ser confiável para envio e recebimento

---

### HU-15: Usar Barra de Pesquisa de Produtos

**Título:** Usar Barra de Pesquisa de Produtos  
**Requerente:** Cliente Buscador  
**Prioridade:** Média  
**Pontos de História:** 5

**Descrição:**
Como cliente, eu quero usar a barra de pesquisa para encontrar produtos específicos ou termos relacionados a café para que possa localizar rapidamente o que me interessa.

**Comentários:**
A pesquisa deve ser rápida e oferecer sugestões.

**Critérios de Aceitação:**
- CA#1: Uma barra de pesquisa deve estar visível e acessível em todas as páginas do e-commerce
- CA#2: Ao digitar na barra de pesquisa, o sistema deve apresentar sugestões de produtos ou termos (autocomplete)
- CA#3: Os resultados da pesquisa devem ser relevantes e exibir produtos que correspondam aos termos digitados
- CA#4: A página de resultados da pesquisa deve permitir filtros e ordenação (ex: por preço, relevância)

**Regras de Negócio:**
- RN#1: A pesquisa deve considerar nomes de produtos, descrições e categorias
- RN#2: Deve haver um algoritmo de relevância para ordenar os resultados

**Requisitos Não Funcionais:**
- RNF#1: A busca deve ser quase instantânea (menos de 1 segundo)
- RNF#2: O sistema de busca deve ser robusto e escalável para lidar com grande volume de dados e requisições

---

### HU-16: Inscrever-se em Clube de Assinatura

**Título:** Inscrever-se em Clube de Assinatura  
**Requerente:** Cliente Assinante (potencial)  
**Prioridade:** Média  
**Pontos de História:** 13

**Descrição:**
Como cliente, eu quero me inscrever em um clube de assinatura de café para que possa receber cafés selecionados regularmente em minha casa.

**Comentários:**
A página do clube de assinatura deve ser clara sobre os planos, benefícios e processo.

**Critérios de Aceitação:**
- CA#1: O site deve ter uma seção dedicada ao clube de assinatura, com diferentes planos (ex: mensal, trimestral)
- CA#2: O cliente deve conseguir selecionar um plano, a frequência de entrega e realizar o pagamento recorrente
- CA#3: O sistema deve enviar confirmação da assinatura e detalhes das próximas entregas
- CA#4: O cliente deve poder gerenciar sua assinatura (pausar, cancelar, mudar plano) em seu perfil

**Regras de Negócio:**
- RN#1: Os planos de assinatura devem ser configuráveis (preço, frequência, tipo de café)
- RN#2: O sistema deve gerenciar pagamentos recorrentes e notificar sobre falhas no pagamento

**Requisitos Não Funcionais:**
- RNF#1: O processo de assinatura deve ser intuitivo e rápido
- RNF#2: A plataforma deve suportar cobrança recorrente de forma segura

---

### HU-17: Experiência Otimizada para Celular

**Título:** Experiência Otimizada para Celular  
**Requerente:** Cliente de Celular  
**Prioridade:** Alta  
**Pontos de História:** 8

**Descrição:**
Como cliente, eu quero ter uma experiência de navegação e compra otimizada para dispositivos móveis para que possa comprar café de forma conveniente em qualquer lugar.

**Comentários:**
O design deve ser responsivo e os elementos interativos fáceis de usar em telas pequenas.

**Critérios de Aceitação:**
- CA#1: Todas as páginas do e-commerce devem ser responsivas, adaptando-se a diferentes tamanhos de tela (smartphones, tablets)
- CA#2: Botões e elementos de toque devem ser grandes o suficiente para fácil interação
- CA#3: O checkout deve ser simplificado para dispositivos móveis
- CA#4: O menu de navegação deve ser acessível e funcional em dispositivos móveis (ex: menu hambúrguer)

**Regras de Negócio:**
- RN#1: Nenhuma regra de negócio diretamente associada; este é um requisito puramente técnico/de UX

**Requisitos Não Funcionais:**
- RNF#1: O tempo de carregamento das páginas em dispositivos móveis deve ser otimizado
- RNF#2: Compatibilidade com os principais navegadores móveis (Chrome, Safari, Firefox)

---

## 3. Histórias de Usuário - Administrador

### HU-05: Gerenciar Catálogo de Produtos

**Título:** Gerenciar Catálogo de Produtos  
**Requerente:** Administrador do E-commerce  
**Prioridade:** Alta  
**Pontos de História:** 13

**Descrição:**
Como administrador, eu quero gerenciar o catálogo de produtos (adicionar, editar, remover cafés e acessórios) para que possa manter a loja sempre atualizada.

**Comentários:**
A interface de gerenciamento deve ser intuitiva e permitir a fácil adição de informações de produto, imagens e variações.

**Critérios de Aceitação:**
- CA#1: O administrador deve acessar um painel de gerenciamento de produtos com opções para "Adicionar Novo", "Editar" e "Remover"
- CA#2: Ao adicionar/editar um produto, devem estar disponíveis campos para Nome, Descrição, Preço, Categoria, Imagens, Estoque, Variações (ex: tipo de moagem, peso)
- CA#3: O sistema deve validar os campos obrigatórios e o formato dos dados (ex: preço numérico)
- CA#4: A remoção de um produto deve exigir confirmação para evitar exclusões acidentais
- CA#5: As alterações devem ser refletidas em tempo real no site do cliente

**Regras de Negócio:**
- RN#1: Apenas usuários com perfil de "Administrador" ou "Gerente de Conteúdo" podem acessar e modificar o catálogo
- RN#2: Produtos removidos não devem ser mais visíveis no site, mas seus dados históricos podem ser mantidos para relatórios

**Requisitos Não Funcionais:**
- RNF#1: A interface de gerenciamento de produtos deve ser responsiva e fácil de usar
- RNF#2: O upload de imagens deve ser otimizado para não prejudicar o desempenho do site

---

### HU-18: Visualizar Painel de Controle de Vendas

**Título:** Visualizar Painel de Controle de Vendas  
**Requerente:** Administrador do E-commerce  
**Prioridade:** Alta  
**Pontos de História:** 8

**Descrição:**
Como administrador, eu quero visualizar um painel de controle com as principais métricas de vendas (pedidos, faturamento) para que possa acompanhar o desempenho geral do negócio.

**Comentários:**
O painel deve ser intuitivo, com gráficos e dados resumidos para tomada de decisão.

**Critérios de Aceitação:**
- CA#1: O administrador deve ter acesso a um painel de controle após o login
- CA#2: O painel deve exibir métricas chave como número de pedidos, faturamento total, ticket médio e produtos mais vendidos
- CA#3: Os dados devem ser visualizados por períodos (dia, semana, mês, ano)
- CA#4: O painel deve conter gráficos para fácil compreensão visual das tendências

**Regras de Negócio:**
- RN#1: Apenas usuários com perfil de "Administrador" podem acessar o painel
- RN#2: O cálculo das métricas deve ser preciso e refletir os dados transacionais

**Requisitos Não Funcionais:**
- RNF#1: O painel deve carregar em até 3 segundos
- RNF#2: Os gráficos devem ser interativos e fáceis de entender

---

### HU-19: Atualizar Preços e Estoque de Produtos

**Título:** Atualizar Preços e Estoque de Produtos  
**Requerente:** Administrador do E-commerce  
**Prioridade:** Alta  
**Pontos de História:** 8

**Descrição:**
Como administrador, eu quero atualizar os preços e o estoque de produtos para que possa garantir a precisão das informações no site.

**Comentários:**
A atualização deve ser rápida e permitir edições em massa se necessário.

**Critérios de Aceitação:**
- CA#1: O administrador deve conseguir editar o preço de venda e o estoque de cada produto individualmente no painel de gerenciamento
- CA#2: O sistema deve validar a entrada de dados (ex: estoque não pode ser negativo)
- CA#3: As alterações devem ser refletidas em tempo real no site para os clientes
- CA#4: Deve haver uma funcionalidade para importação/exportação de planilhas para atualização em massa de preços e estoque

**Regras de Negócio:**
- RN#1: Apenas administradores podem alterar preços e estoque
- RN#2: A alteração de estoque deve impactar a disponibilidade do produto para compra

**Requisitos Não Funcionais:**
- RNF#1: A atualização individual deve ser quase instantânea
- RNF#2: A funcionalidade de atualização em massa deve processar um volume significativo de dados de forma eficiente

---

### HU-20: Gerenciar Pedidos

**Título:** Gerenciar Pedidos  
**Requerente:** Administrador do E-commerce  
**Prioridade:** Alta  
**Pontos de História:** 13

**Descrição:**
Como administrador, eu quero gerenciar pedidos (mudar status, visualizar detalhes, emitir notas) para que possa garantir o fluxo eficiente das entregas.

**Comentários:**
A interface deve permitir uma visão clara dos pedidos e ações rápidas.

**Critérios de Aceitação:**
- CA#1: O administrador deve ter uma lista de todos os pedidos, com filtros por status (pendente, aprovado, em preparação, enviado, entregue, cancelado)
- CA#2: Ao clicar em um pedido, o administrador deve ver todos os detalhes (itens, cliente, endereço, pagamento, histórico de status)
- CA#3: O sistema deve permitir a alteração manual do status do pedido pelo administrador
- CA#4: Deve ser possível emitir notas fiscais ou comprovantes de venda para cada pedido
- CA#5: Deve ser possível cancelar um pedido e, se aplicável, iniciar o processo de estorno

**Regras de Negócio:**
- RN#1: Apenas administradores ou funcionários de expedição podem alterar status de pedidos
- RN#2: A emissão de notas fiscais deve seguir a legislação vigente

**Requisitos Não Funcionais:**
- RNF#1: A listagem e o detalhamento dos pedidos devem ser rápidos
- RNF#2: A interface de gerenciamento de pedidos deve ser intuitiva

---

### HU-21: Criar e Gerenciar Cupons de Desconto

**Título:** Criar e Gerenciar Cupons de Desconto  
**Requerente:** Administrador do E-commerce  
**Prioridade:** Média  
**Pontos de História:** 8

**Descrição:**
Como administrador, eu quero criar e gerenciar códigos de cupom de desconto para que possa lançar promoções e campanhas de marketing.

**Comentários:**
A criação de cupons deve ser flexível, com muitas opções de configuração.

**Critérios de Aceitação:**
- CA#1: O administrador deve acessar uma seção para criar novos cupons de desconto
- CA#2: Ao criar um cupom, devem ser configuráveis: código, tipo (percentual/fixo), valor, data de validade, limite de uso (por cliente/total), produtos/categorias aplicáveis
- CA#3: O administrador deve visualizar uma lista de cupons existentes, com status (ativos, expirados)
- CA#4: Deve ser possível editar ou desativar cupons existentes

**Regras de Negócio:**
- RN#1: Cupons podem ser aplicados apenas uma vez por cliente (se configurado)
- RN#2: Prioridade de aplicação de cupons deve ser definida (ex: maior desconto, primeiro cupom inserido)

**Requisitos Não Funcionais:**
- RNF#1: A criação e gerenciamento de cupons deve ser um processo ágil
- RNF#2: O sistema deve garantir a unicidade dos códigos de cupom

---

### HU-22: Visualizar Histórico de Compras do Cliente

**Título:** Visualizar Histórico de Compras do Cliente  
**Requerente:** Administrador do E-commerce  
**Prioridade:** Média  
**Pontos de História:** 5

**Descrição:**
Como administrador, eu quero visualizar o histórico de compras de um cliente específico para que possa oferecer um atendimento mais personalizado e identificar padrões de consumo.

**Comentários:**
O histórico deve ser completo e fácil de acessar pelo perfil do cliente.

**Critérios de Aceitação:**
- CA#1: Na tela de gerenciamento de clientes, deve ser possível clicar em um cliente para ver seu perfil detalhado
- CA#2: O perfil do cliente deve exibir uma lista de todos os pedidos realizados, com data, valor e produtos
- CA#3: Deve ser possível acessar os detalhes completos de cada pedido a partir do histórico do cliente

**Regras de Negócio:**
- RN#1: Apenas administradores ou atendentes de suporte podem acessar o histórico de compras de clientes
- RN#2: Dados sensíveis do cliente (ex: dados de pagamento) devem ser mascarados ou não exibidos

**Requisitos Não Funcionais:**
- RNF#1: A consulta do histórico de compras deve ser rápida
- RNF#2: A interface deve ser clara e organizada

---

### HU-23: Gerar Relatórios de Vendas

**Título:** Gerar Relatórios de Vendas  
**Requerente:** Administrador do E-commerce  
**Prioridade:** Média  
**Pontos de História:** 13

**Descrição:**
Como administrador, eu quero gerar relatórios de vendas por período, produto ou cliente para que possa analisar o desempenho e identificar oportunidades de crescimento.

**Comentários:**
Os relatórios devem ser exportáveis e oferecer diferentes filtros.

**Critérios de Aceitação:**
- CA#1: O administrador deve acessar uma seção de "Relatórios" no painel
- CA#2: Deve ser possível gerar relatórios de vendas filtrados por período (diário, semanal, mensal, anual, customizado)
- CA#3: Deve ser possível gerar relatórios de vendas por produto (mais vendidos, menos vendidos)
- CA#4: Deve ser possível gerar relatórios de vendas por cliente (maiores compradores)
- CA#5: Os relatórios devem ser exportáveis em formatos comuns (ex: CSV, Excel, PDF)

**Regras de Negócio:**
- RN#1: Apenas administradores podem gerar relatórios
- RN#2: Os dados dos relatórios devem ser consistentes com os dados de vendas

**Requisitos Não Funcionais:**
- RNF#1: A geração de relatórios complexos deve ser otimizada para não travar o sistema
- RNF#2: A interface de seleção de filtros deve ser fácil de usar

---

### HU-24: Gerenciar Usuários e Permissões

**Título:** Gerenciar Usuários e Permissões  
**Requerente:** Administrador do E-commerce  
**Prioridade:** Alta  
**Pontos de História:** 8

**Descrição:**
Como administrador, eu quero gerenciar usuários e suas permissões (clientes, funcionários) para que possa controlar o acesso ao sistema e suas funcionalidades.

**Comentários:**
O sistema deve permitir a criação de diferentes perfis de acesso.

**Critérios de Aceitação:**
- CA#1: O administrador deve ter acesso a uma seção para gerenciar usuários internos (funcionários)
- CA#2: Deve ser possível criar, editar e desativar contas de usuários internos
- CA#3: Ao criar/editar um usuário interno, deve ser possível atribuir diferentes perfis de permissão (ex: Administrador, Gerente de Conteúdo, Expedição, Suporte)
- CA#4: Apenas o administrador mestre pode gerenciar outros administradores

**Regras de Negócio:**
- RN#1: Cada perfil de usuário deve ter acesso restrito a funcionalidades específicas do painel administrativo
- RN#2: Auditoria de ações realizadas por usuários internos

**Requisitos Não Funcionais:**
- RNF#1: A interface de gerenciamento de usuários deve ser segura e fácil de usar
- RNF#2: A alteração de permissões deve ser aplicada imediatamente

---

### HU-25: Configurar Opções e Valores de Frete

**Título:** Configurar Opções e Valores de Frete  
**Requerente:** Administrador do E-commerce  
**Prioridade:** Alta  
**Pontos de História:** 13

**Descrição:**
Como administrador, eu quero configurar as opções e valores de frete para que possa oferecer diferentes modalidades de entrega aos clientes.

**Comentários:**
A configuração do frete deve ser flexível para abranger diferentes regras de negócio (por peso, CEP, valor do pedido).

**Critérios de Aceitação:**
- CA#1: O administrador deve acessar uma seção de "Configurações de Frete"
- CA#2: Deve ser possível adicionar, editar e remover modalidades de frete (ex: SEDEX, PAC, Retirada na Loja, Motoboy Local)
- CA#3: Para cada modalidade, deve ser possível configurar regras de preço (tabela por CEP, por peso, por faixa de valor do pedido)
- CA#4: Deve ser possível definir regiões de atendimento para cada modalidade de frete
- CA#5: Deve ser possível configurar regras de frete grátis (ex: a partir de X valor, para CEPs específicos)

**Regras de Negócio:**
- RN#1: As configurações de frete devem ser aplicadas em tempo real nos cálculos para o cliente
- RN#2: Regras de frete devem ter prioridade caso haja conflito (ex: frete grátis sobrescreve frete pago)

**Requisitos Não Funcionais:**
- RNF#1: A interface de configuração de frete deve ser clara e robusta
- RNF#2: O cálculo do frete deve ser otimizado para o tempo de resposta do checkout

---

## 4. Histórias de Usuário - Expedição

### HU-26: Receber Notificações de Novos Pedidos Aprovados

**Título:** Receber Notificações de Novos Pedidos Aprovados  
**Requerente:** Funcionário da Expedição  
**Prioridade:** Alta  
**Pontos de História:** 3

**Descrição:**
Como funcionário da expedição, eu quero receber notificações de novos pedidos aprovados para que possa iniciar o processo de separação e embalagem sem atrasos.

**Comentários:**
As notificações devem ser claras e indicar o número do pedido e itens.

**Critérios de Aceitação:**
- CA#1: O funcionário da expedição deve receber uma notificação visual ou sonora no sistema quando um novo pedido é aprovado
- CA#2: A notificação deve incluir o número do pedido e um link direto para os detalhes do pedido
- CA#3: Deve ser possível desativar/ativar as notificações

**Regras de Negócio:**
- RN#1: Apenas pedidos com status "Aprovado" devem gerar notificação para a expedição
- RN#2: A notificação deve ser disparada assim que o pagamento for confirmado

**Requisitos Não Funcionais:**
- RNF#1: O sistema de notificação deve ser em tempo real
- RNF#2: A notificação deve ser persistente até que o pedido seja visualizado ou processado

---

### HU-27: Acessar Lista de Pedidos para Separação

**Título:** Acessar Lista de Pedidos para Separação  
**Requerente:** Funcionário da Expedição  
**Prioridade:** Alta  
**Pontos de História:** 5

**Descrição:**
Como funcionário da expedição, eu quero acessar a lista de pedidos a serem separados para que possa organizar o trabalho de forma eficiente.

**Comentários:**
A lista deve ser clara, mostrar prioridades e permitir filtros.

**Critérios de Aceitação:**
- CA#1: O funcionário deve acessar uma tela específica com a lista de pedidos pendentes de separação
- CA#2: A lista deve exibir informações essenciais como número do pedido, data, nome do cliente e prazo de envio
- CA#3: Deve ser possível filtrar e ordenar a lista (ex: por prioridade, data de envio, mais antigos)
- CA#4: Ao clicar em um pedido, o funcionário deve ver os detalhes dos produtos a serem separados e suas localizações no estoque

**Regras de Negócio:**
- RN#1: Apenas pedidos com status "Aprovado" ou "Em Preparação" (se houver essa fase) devem aparecer nesta lista
- RN#2: Pedidos mais antigos ou com prazo de envio mais curto devem ter prioridade visual

**Requisitos Não Funcionais:**
- RNF#1: A lista de pedidos deve carregar rapidamente, mesmo com um grande volume
- RNF#2: A interface deve ser projetada para uso em ambiente de expedição (possivelmente com scanners)

---

### HU-28: Registrar Saída de Produtos do Estoque

**Título:** Registrar Saída de Produtos do Estoque  
**Requerente:** Funcionário da Expedição  
**Prioridade:** Alta  
**Pontos de História:** 5

**Descrição:**
Como funcionário da expedição, eu quero registrar a saída de produtos do estoque após a separação para que possa manter o inventário sempre atualizado no sistema.

**Comentários:**
O processo de baixa de estoque deve ser ágil e preciso.

**Critérios de Aceitação:**
- CA#1: Após a separação de um pedido, o funcionário deve conseguir registrar a baixa dos itens no estoque pelo sistema
- CA#2: A baixa pode ser feita manualmente ou por leitura de código de barras
- CA#3: O sistema deve confirmar a baixa e atualizar o estoque disponível do produto em tempo real
- CA#4: Se houver tentativa de baixar item não disponível, o sistema deve alertar

**Regras de Negócio:**
- RN#1: A baixa de estoque só pode ser realizada por funcionários autorizados da expedição
- RN#2: A quantidade baixada deve corresponder à quantidade do pedido

**Requisitos Não Funcionais:**
- RNF#1: O processo de baixa de estoque deve ser rápido e eficiente
- RNF#2: A integração com leitores de código de barras deve ser fluida

---

### HU-29: Gerar Etiquetas de Envio e Notas Fiscais

**Título:** Gerar Etiquetas de Envio e Notas Fiscais  
**Requerente:** Funcionário da Expedição  
**Prioridade:** Alta  
**Pontos de História:** 8

**Descrição:**
Como funcionário da expedição, eu quero gerar etiquetas de envio e notas fiscais para os pedidos para que possa agilizar o processo de despacho.

**Comentários:**
A geração deve ser automatizada e as informações precisas.

**Critérios de Aceitação:**
- CA#1: Para cada pedido na lista de expedição, deve haver uma opção para gerar a etiqueta de envio
- CA#2: A etiqueta de envio deve conter todas as informações necessárias para a transportadora (endereço, dados do cliente, peso, etc.)
- CA#3: Deve ser possível gerar a Nota Fiscal (se aplicável) diretamente do sistema, ou integrada a um sistema de emissão de NF
- CA#4: O sistema deve permitir a impressão em lote de etiquetas e notas fiscais

**Regras de Negócio:**
- RN#1: As informações da etiqueta devem ser puxadas automaticamente dos dados do pedido e do cliente
- RN#2: A emissão de notas fiscais deve estar em conformidade com a legislação fiscal

**Requisitos Não Funcionais:**
- RNF#1: A geração dos documentos deve ser rápida e formatada para impressão
- RNF#2: A integração com sistemas de transportadoras (para cotação/rastreamento) e sistemas fiscais (para NF) deve ser robusta

---

## 5. Histórias de Usuário - Produção

### HU-30: Registrar Torra de Novos Lotes de Café

**Título:** Registrar Torra de Novos Lotes de Café  
**Requerente:** Barista / Responsável pela Torrefação  
**Prioridade:** Média  
**Pontos de História:** 5

**Descrição:**
Como barista, eu quero registrar a torra de novos lotes de café para que possa monitorar a produção e a qualidade dos grãos.

**Comentários:**
Funcionalidade crucial se a torrefação for interna. Permite rastreabilidade.

**Critérios de Aceitação:**
- CA#1: O barista deve ter acesso a uma tela para registrar novos lotes de café torrado
- CA#2: O registro deve incluir informações como data da torra, tipo de grão, peso antes e depois da torra, nível de torra e observações
- CA#3: O sistema deve gerar um identificador único para cada lote torrado
- CA#4: Deve ser possível visualizar o histórico de torras

**Regras de Negócio:**
- RN#1: Apenas usuários com perfil "Barista" ou "Produção" podem registrar torras
- RN#2: O sistema pode sugerir níveis de torra com base no tipo de grão

**Requisitos Não Funcionais:**
- RNF#1: A interface de registro deve ser simples e rápida
- RNF#2: Os dados de torra devem ser armazenados de forma a permitir relatórios de rastreabilidade e qualidade

---

## 6. Resumo por Prioridade

### Alta Prioridade (18 histórias)
- HU-01, HU-02, HU-03, HU-04, HU-05, HU-07, HU-08, HU-09, HU-17, HU-18, HU-19, HU-20, HU-24, HU-25, HU-26, HU-27, HU-28, HU-29

### Média Prioridade (10 histórias)
- HU-06, HU-10, HU-11, HU-14, HU-15, HU-16, HU-21, HU-22, HU-23, HU-30

### Baixa Prioridade (2 histórias)
- HU-12, HU-13

---

## 7. Matriz de Rastreabilidade

| HU | Título | Requerente | Prioridade | Pontos | RF Relacionado |
|----|--------|------------|------------|--------|----------------|
| HU-01 | Criar Conta | Cliente | Alta | 5 | RF-001, RF-002 |
| HU-02 | Navegar Categorias | Cliente | Alta | 3 | RF-004 |
| HU-03 | Adicionar ao Carrinho | Cliente | Alta | 3 | RF-007 |
| HU-04 | Acompanhar Pedido | Cliente | Alta | 8 | RF-011 |
| HU-05 | Gerenciar Catálogo | Admin | Alta | 13 | RF-005 |
| HU-06 | Aplicar Cupom | Cliente | Média | 5 | RF-008 |
| HU-07 | Visualizar Frete | Cliente | Alta | 8 | RF-009 |
| HU-08 | Realizar Pagamento | Cliente | Alta | 13 | RF-010 |
| HU-09 | Confirmação E-mail | Cliente | Alta | 3 | RF-012 |
| HU-10 | Programa Fidelidade | Cliente | Média | 8 | RF-013 |
| HU-11 | Kits Personalizados | Cliente | Média | 8 | RF-014 |
| HU-12 | FAQ | Cliente | Baixa | 2 | RF-016 |
| HU-13 | Blog | Cliente | Baixa | 5 | RF-017 |
| HU-14 | Contatar Suporte | Cliente | Média | 5 | - |
| HU-15 | Buscar Produtos | Cliente | Média | 5 | RF-006 |
| HU-16 | Clube Assinatura | Cliente | Média | 13 | RF-015 |
| HU-17 | Mobile Responsivo | Cliente | Alta | 8 | RF-028 |
| HU-18 | Painel Vendas | Admin | Alta | 8 | RF-018 |
| HU-19 | Atualizar Preço/Estoque | Admin | Alta | 8 | RF-005 |
| HU-20 | Gerenciar Pedidos | Admin | Alta | 13 | RF-019 |
| HU-21 | Gerenciar Cupons | Admin | Média | 8 | RF-020 |
| HU-22 | Histórico Cliente | Admin | Média | 5 | - |
| HU-23 | Relatórios | Admin | Média | 13 | RF-021 |
| HU-24 | Gerenciar Usuários | Admin | Alta | 8 | RF-003 |
| HU-25 | Configurar Frete | Admin | Alta | 13 | RF-022 |
| HU-26 | Notificações Expedição | Expedição | Alta | 3 | RF-023 |
| HU-27 | Lista Separação | Expedição | Alta | 5 | RF-024 |
| HU-28 | Baixa Estoque | Expedição | Alta | 5 | RF-025 |
| HU-29 | Gerar Documentos | Expedição | Alta | 8 | RF-026 |
| HU-30 | Registrar Torra | Produção | Média | 5 | RF-027 |

---

## 8. Aprovações

| Nome | Cargo | Assinatura | Data |
|------|-------|------------|------|
| Tiago Soares Carneiro da Cunha | Desenvolvedor/Responsável | ___________ | ___/___/___ |

---

**Próximos Passos:**
- Validar histórias com stakeholders
- Priorizar para sprints
- Detalhar critérios de aceitação
- Criar casos de teste
# 8. Casos de Uso

## Soto Café - E-commerce de Cafeteria Gourmet

**Versão:** 1.0  
**Data:** 2025  
**Autor:** Tiago Soares Carneiro da Cunha  
**RGM:** 44030509

---

## 1. Introdução

Este documento apresenta os casos de uso do sistema Soto Café, organizados por tema funcional. Cada caso de uso descreve uma interação entre atores e o sistema para alcançar um objetivo específico.

---

## 2. Casos de Uso - Gestão de Contas e Acesso

### CU-01: Gerenciar Contas de Usuários e Acessos

**Identificador:** CU-GA-01  
**Nome:** Gerenciar Contas de Usuários e Acessos  
**Atores:** Cliente, Administrador  
**Histórias de Usuário Relacionadas:** HU-01, HU-24

**Descrição:**
Permite que usuários se cadastrem no sistema e que administradores gerenciem contas de clientes e funcionários, atribuindo permissões de acesso.

**Pré-condições:**
- N/A (para cadastro)
- Usuário com permissão de administrador logado (para gerenciamento)

**Pós-condições:**
- Nova conta de usuário criada/ativada
- Permissões de usuário atualizadas

**Fluxo Principal:**
1. Um usuário (novo cliente ou administrador) inicia o processo de criação/gestão de conta
2. O sistema apresenta o formulário de cadastro ou a interface de gerenciamento de usuários
3. O usuário insere os dados necessários (informações pessoais, credenciais, permissões)
4. O sistema valida os dados de entrada
5. O sistema cria a conta ou atualiza os detalhes/permissões do usuário
6. Para novos clientes, o sistema envia e-mail de confirmação
7. O sistema exibe uma mensagem de sucesso

**Fluxos Alternativos:**

**3a. E-mail já cadastrado:**
- 3a.1. O sistema exibe mensagem de erro
- 3a.2. O usuário corrige o e-mail ou faz login

**4a. Dados inválidos:**
- 4a.1. O sistema exibe mensagens de erro específicas
- 4a.2. O usuário corrige os dados
- 4a.3. Retorna ao passo 4

**6a. Falha no envio de e-mail:**
- 6a.1. O sistema registra a falha
- 6a.2. O sistema permite reenvio do e-mail de confirmação

**Exceções:**
- E-1: Sistema indisponível - exibir mensagem de erro e sugerir tentar novamente
- E-2: Erro de conexão com banco de dados - registrar erro e notificar administrador

---

## 3. Casos de Uso - Navegação e Catálogo

### CU-02: Interagir com o Catálogo de Produtos

**Identificador:** CU-NAVEGA-01  
**Nome:** Interagir com o Catálogo de Produtos  
**Atores:** Cliente, Administrador  
**Histórias de Usuário Relacionadas:** HU-02, HU-05, HU-15

**Descrição:**
Permite que clientes naveguem, pesquisem e visualizem produtos, enquanto administradores gerenciam a disponibilidade e os detalhes do catálogo.

**Pré-condições:**
- Clientes acessam o site
- Administradores estão logados no painel de gestão

**Pós-condições:**
- Produtos exibidos/filtrados conforme solicitação
- Catálogo atualizado no sistema

**Fluxo Principal (Cliente):**
1. Um cliente deseja interagir com o catálogo de produtos
2. O cliente acessa categorias, utiliza a barra de pesquisa ou visualiza produtos
3. O sistema exibe os produtos conforme a ação do cliente
4. O cliente pode aplicar filtros e ordenação
5. O sistema atualiza a exibição dos produtos

**Fluxo Principal (Administrador):**
1. Um administrador deseja gerenciar o catálogo
2. O administrador acessa a interface de gerenciamento de produtos
3. O administrador adiciona, edita ou remove produtos, incluindo seus detalhes, preços e estoque
4. O sistema valida e aplica as alterações no catálogo
5. O sistema confirma a operação

**Fluxos Alternativos:**

**2a. Busca sem resultados:**
- 2a.1. O sistema exibe mensagem "Nenhum produto encontrado"
- 2a.2. O sistema sugere termos similares ou categorias

**3a. Produto sem estoque:**
- 3a.1. O sistema exibe etiqueta "Indisponível" ou oculta o produto (conforme configuração)

**4a. Validação falha (Admin):**
- 4a.1. O sistema exibe mensagens de erro
- 4a.2. O administrador corrige os dados
- 4a.3. Retorna ao passo 4

**Exceções:**
- E-1: Erro ao carregar produtos - exibir mensagem de erro e opção de recarregar
- E-2: Erro ao salvar alterações (Admin) - reverter alterações e notificar

---

## 4. Casos de Uso - Carrinho e Checkout

### CU-03: Gerenciar Carrinho e Finalizar Compra

**Identificador:** CU-CHECKOUT-01  
**Nome:** Gerenciar Carrinho e Finalizar Compra  
**Atores:** Cliente  
**Histórias de Usuário Relacionadas:** HU-03, HU-06, HU-07, HU-08

**Descrição:**
Permite que clientes adicionem produtos ao carrinho, gerenciem seus itens, apliquem descontos, selecionem opções de frete e efetuem o pagamento de forma segura.

**Pré-condições:**
- Produtos disponíveis para adição ao carrinho

**Pós-condições:**
- Pedido criado
- Estoque atualizado
- Pagamento processado

**Fluxo Principal:**
1. O cliente adiciona um produto ao carrinho
2. O cliente acessa a página do carrinho para revisar os itens
3. O cliente (opcionalmente) aplica um cupom de desconto
4. O cliente informa o CEP para cálculo de frete
5. O sistema exibe opções de frete com valores e prazos
6. O cliente seleciona a opção de frete e prossegue para o checkout
7. O cliente escolhe o método de pagamento e insere as informações necessárias
8. O sistema processa o pagamento com segurança
9. O sistema confirma a transação e finaliza a compra
10. O sistema envia e-mail de confirmação

**Fluxos Alternativos:**

**1a. Produto sem estoque:**
- 1a.1. O sistema exibe mensagem de erro
- 1a.2. O cliente remove o item ou ajusta a quantidade

**3a. Cupom inválido:**
- 3a.1. O sistema exibe mensagem de erro específica
- 3a.2. O cliente corrige o código ou remove o cupom

**4a. CEP não atendido:**
- 4a.1. O sistema exibe mensagem informativa
- 4a.2. O cliente pode alterar o endereço ou cancelar

**8a. Pagamento recusado:**
- 8a.1. O sistema exibe mensagem de erro
- 8a.2. O cliente pode tentar novamente ou escolher outro método

**Exceções:**
- E-1: Estoque insuficiente durante checkout - notificar cliente e atualizar carrinho
- E-2: Falha no gateway de pagamento - permitir nova tentativa
- E-3: Erro ao criar pedido - reverter pagamento se necessário

---

## 5. Casos de Uso - Pós-Venda e Fidelidade

### CU-04: Gerenciar Pós-Venda e Benefícios do Cliente

**Identificador:** CU-POSVENDA-01  
**Nome:** Gerenciar Pós-Venda e Benefícios do Cliente  
**Atores:** Cliente, Administrador  
**Histórias de Usuário Relacionadas:** HU-04, HU-09, HU-10, HU-22

**Descrição:**
Permite que clientes acompanhem seus pedidos, recebam comunicações pós-compra e participem de programas de fidelidade, enquanto administradores podem consultar o histórico de compras dos clientes.

**Pré-condições:**
- Pedido realizado e pago

**Pós-condições:**
- Cliente informado sobre o pedido
- Pontos acumulados/resgatados
- Histórico de compras consultado

**Fluxo Principal:**
1. O cliente realiza uma compra
2. O sistema envia uma confirmação do pedido por e-mail
3. O cliente pode acessar a página de "Meus Pedidos" para acompanhar o status
4. O sistema atualiza os pontos de fidelidade do cliente (se aplicável)
5. O cliente pode resgatar pontos ou visualizar seu saldo
6. (Para Administrador) O administrador pode consultar o histórico de compras de qualquer cliente para suporte

**Fluxos Alternativos:**

**3a. Cliente não autenticado:**
- 3a.1. O sistema solicita login
- 3a.2. Após login, redireciona para "Meus Pedidos"

**5a. Pontos insuficientes para resgate:**
- 5a.1. O sistema exibe mensagem informativa
- 5a.2. O sistema mostra quantos pontos faltam

**Exceções:**
- E-1: Erro ao atualizar pontos - registrar para processamento posterior
- E-2: Falha no envio de e-mail - permitir reenvio

---

## 6. Casos de Uso - Funcionalidades Adicionais

### CU-05: Interagir com Conteúdo e Ofertas Especiais

**Identificador:** CU-CONTEUDO-01  
**Nome:** Interagir com Conteúdo e Ofertas Especiais  
**Atores:** Cliente  
**Histórias de Usuário Relacionadas:** HU-11, HU-12, HU-13, HU-16

**Descrição:**
Permite que clientes explorem opções de kits personalizados, consultem FAQs, leiam artigos no blog e se inscrevam em um clube de assinatura.

**Pré-condições:**
- Conteúdo do blog e FAQ disponível
- Kits configurados
- Clube de assinatura ativo

**Pós-condições:**
- Cliente informado
- Kits configurados/adicionados ao carrinho
- Assinatura criada

**Fluxo Principal:**
1. O cliente acessa o site
2. O cliente pode navegar para a seção de "Kits de Presente" para montar um kit
3. O cliente pode acessar a "FAQ" para tirar dúvidas
4. O cliente pode visitar o "Blog" para ler artigos
5. O cliente pode acessar a seção "Clube de Assinatura" para escolher um plano e se inscrever
6. O sistema processa a interação e exibe o conteúdo/configura a assinatura

**Fluxos Alternativos:**

**2a. Kit com preço mínimo não atingido:**
- 2a.1. O sistema exibe mensagem informativa
- 2a.2. O cliente adiciona mais itens

**5a. Assinatura com pagamento falhado:**
- 5a.1. O sistema exibe mensagem de erro
- 5a.2. O cliente pode tentar novamente ou escolher outro método

**Exceções:**
- E-1: Conteúdo não encontrado - exibir página 404
- E-2: Erro ao processar assinatura - reverter alterações

---

## 7. Casos de Uso - Atendimento

### CU-06: Obter Suporte ao Cliente

**Identificador:** CU-SUPORTE-01  
**Nome:** Obter Suporte ao Cliente  
**Atores:** Cliente, Equipe de Suporte  
**Histórias de Usuário Relacionadas:** HU-14

**Descrição:**
Permite que os clientes entrem em contato com o suporte para resolver problemas ou tirar dúvidas, via chat ou e-mail.

**Pré-condições:**
- Canais de comunicação configurados
- Equipe de suporte disponível

**Pós-condições:**
- Solicitação de suporte registrada
- Cliente atendido

**Fluxo Principal:**
1. O cliente busca ajuda no site
2. O sistema exibe as opções de contato (chat, formulário de e-mail)
3. O cliente seleciona a opção desejada
4. O cliente interage com o suporte (envia mensagem no chat ou preenche formulário)
5. O sistema encaminha a solicitação para a equipe de suporte
6. A equipe de suporte responde ao cliente
7. O cliente recebe a resposta

**Fluxos Alternativos:**

**2a. Chat fora de horário:**
- 2a.1. O sistema exibe chatbot
- 2a.2. O chatbot tenta resolver ou registra para resposta posterior

**4a. Formulário com dados incompletos:**
- 4a.1. O sistema exibe mensagens de validação
- 4a.2. O cliente completa os dados

**Exceções:**
- E-1: Sistema de chat indisponível - redirecionar para formulário
- E-2: Erro ao enviar mensagem - permitir nova tentativa

---

## 8. Casos de Uso - Gestão e Operações

### CU-07: Administrar e Operar o E-commerce

**Identificador:** CU-ADMIN-01  
**Nome:** Administrar e Operar o E-commerce  
**Atores:** Administrador  
**Histórias de Usuário Relacionadas:** HU-18, HU-19, HU-20, HU-21, HU-23, HU-25

**Descrição:**
Permite que o administrador visualize métricas de vendas, gerencie preços, estoques, pedidos, cupons de desconto, relatórios e configurações de frete.

**Pré-condições:**
- Usuário com permissão de administrador logado

**Pós-condições:**
- Dados operacionais consultados/atualizados
- Configurações aplicadas
- Relatórios gerados

**Fluxo Principal:**
1. O administrador faz login no painel de controle
2. O sistema exibe o painel de vendas com métricas chave
3. O administrador pode navegar para gerenciar produtos (preços/estoque), pedidos, cupons, ou configurar frete
4. O administrador realiza as alterações ou solicita os relatórios
5. O sistema processa a solicitação, valida os dados e aplica as mudanças ou gera os relatórios
6. O sistema confirma a operação

**Fluxos Alternativos:**

**4a. Validação de dados falha:**
- 4a.1. O sistema exibe mensagens de erro
- 4a.2. O administrador corrige os dados
- 4a.3. Retorna ao passo 5

**5a. Relatório muito grande:**
- 5a.1. O sistema sugere aplicar mais filtros
- 5a.2. O sistema processa em background e notifica quando pronto

**Exceções:**
- E-1: Erro ao salvar alterações - reverter e notificar
- E-2: Erro ao gerar relatório - registrar erro e permitir nova tentativa

---

## 9. Casos de Uso - Expedição

### CU-08: Processar Pedidos para Expedição

**Identificador:** CU-EXPEDICAO-01  
**Nome:** Processar Pedidos para Expedição  
**Atores:** Funcionário de Expedição  
**Histórias de Usuário Relacionadas:** HU-26, HU-27, HU-28, HU-29

**Descrição:**
Permite que funcionários da expedição recebam notificações, consultem pedidos aprovados, registrem a saída de produtos do estoque e gerem documentos de envio.

**Pré-condições:**
- Pedidos aprovados no sistema
- Usuário da expedição logado

**Pós-condições:**
- Estoque atualizado
- Pedido pronto para envio
- Documentos de envio gerados

**Fluxo Principal:**
1. O sistema notifica o funcionário da expedição sobre novos pedidos aprovados
2. O funcionário da expedição acessa a lista de pedidos para separação
3. O funcionário da expedição seleciona um pedido e visualiza seus detalhes
4. O funcionário da expedição registra a baixa dos produtos no estoque
5. O funcionário da expedição gera a etiqueta de envio e a nota fiscal
6. O sistema atualiza o status do pedido para "Enviado" ou similar
7. O sistema notifica o cliente

**Fluxos Alternativos:**

**4a. Produto não encontrado no estoque:**
- 4a.1. O sistema exibe alerta
- 4a.2. O funcionário verifica ou notifica administrador

**5a. Erro ao gerar documentos:**
- 5a.1. O sistema exibe mensagem de erro
- 5a.2. O funcionário pode tentar novamente

**Exceções:**
- E-1: Estoque inconsistente - bloquear baixa e notificar
- E-2: Erro ao atualizar status - permitir atualização manual

---

## 10. Casos de Uso - Produção

### CU-09: Gerenciar Lotes de Café Torrado

**Identificador:** CU-PRODUCAO-01  
**Nome:** Gerenciar Lotes de Café Torrado  
**Atores:** Barista/Responsável pela Produção  
**Histórias de Usuário Relacionadas:** HU-30

**Descrição:**
Permite que o responsável pela torrefação registre informações sobre novos lotes de café torrado, monitorando a produção e a qualidade.

**Pré-condições:**
- Usuário com permissão de produção/barista logado

**Pós-condições:**
- Novo lote de café torrado registrado no sistema

**Fluxo Principal:**
1. O barista/responsável acessa a interface de registro de lotes de torra
2. O barista/responsável insere os detalhes do novo lote (data, tipo de grão, peso, nível de torra)
3. O sistema valida os dados
4. O sistema gera um identificador único para o lote e registra as informações
5. O sistema confirma o registro

**Fluxos Alternativos:**

**3a. Dados inválidos:**
- 3a.1. O sistema exibe mensagens de erro
- 3a.2. O barista corrige os dados
- 3a.3. Retorna ao passo 3

**Exceções:**
- E-1: Erro ao salvar registro - permitir nova tentativa
- E-2: Sistema indisponível - salvar dados localmente e sincronizar depois

---

## 11. Diagrama de Casos de Uso

### 11.1 Atores Principais

- **Cliente**: Usuário final que compra produtos
- **Administrador**: Gerencia o e-commerce
- **Funcionário de Expedição**: Processa pedidos
- **Barista/Produção**: Registra lotes de torra
- **Equipe de Suporte**: Atende clientes

### 11.2 Relacionamentos

```
Cliente < CU-01, CU-02, CU-03, CU-04, CU-05, CU-06
Administrador < CU-01, CU-02, CU-04, CU-07
Funcionário Expedição < CU-08
Barista < CU-09
Equipe Suporte < CU-06
```

---

## 12. Matriz de Rastreabilidade

| CU | Nome | Atores | HUs Relacionadas |
|----|------|--------|------------------|
| CU-01 | Gerenciar Contas | Cliente, Admin | HU-01, HU-24 |
| CU-02 | Interagir Catálogo | Cliente, Admin | HU-02, HU-05, HU-15 |
| CU-03 | Carrinho e Checkout | Cliente | HU-03, HU-06, HU-07, HU-08 |
| CU-04 | Pós-Venda | Cliente, Admin | HU-04, HU-09, HU-10, HU-22 |
| CU-05 | Conteúdo e Ofertas | Cliente | HU-11, HU-12, HU-13, HU-16 |
| CU-06 | Suporte | Cliente, Suporte | HU-14 |
| CU-07 | Administrar E-commerce | Admin | HU-18, HU-19, HU-20, HU-21, HU-23, HU-25 |
| CU-08 | Expedição | Expedição | HU-26, HU-27, HU-28, HU-29 |
| CU-09 | Produção | Barista | HU-30 |

---

## 13. Aprovações

| Nome | Cargo | Assinatura | Data |
|------|-------|------------|------|
| Tiago Soares Carneiro da Cunha | Desenvolvedor/Responsável | ___________ | ___/___/___ |

---

**Próximos Passos:**
- Validar casos de uso com stakeholders
- Detalhar fluxos alternativos adicionais
- Criar diagramas visuais de casos de uso
- Mapear para requisitos funcionais
# 9. Regras de Negócio

## Soto Café - E-commerce de Cafeteria Gourmet

**Versão:** 1.0  
**Data:** 2025  
**Autor:** Tiago Soares Carneiro da Cunha  
**RGM:** 44030509

---

## 1. Introdução

Este documento apresenta as regras de negócio do sistema Soto Café, organizadas por módulo funcional. As regras de negócio definem as políticas, restrições e comportamentos que o sistema deve seguir para atender aos requisitos do negócio.

---

## 2. Regras de Negócio - Gestão de Usuários

### RN-001: E-mail Único
**Descrição:** Cada e-mail pode ser cadastrado apenas uma vez no sistema.  
**Aplicação:** Cadastro de usuários, atualização de e-mail  
**Prioridade:** Alta  
**Validação:** Verificar se e-mail já existe antes de criar/atualizar conta

### RN-002: Criptografia de Senha
**Descrição:** Senhas devem ser criptografadas usando algoritmo de hash seguro (bcrypt, Argon2) antes de armazenamento.  
**Aplicação:** Cadastro, alteração de senha  
**Prioridade:** Alta  
**Validação:** Senha nunca deve ser armazenada em texto plano

### RN-003: Conta Inativa
**Descrição:** Contas inativas não podem fazer login no sistema.  
**Aplicação:** Autenticação  
**Prioridade:** Alta  
**Validação:** Verificar status da conta antes de permitir login

### RN-004: Bloqueio por Tentativas
**Descrição:** Após 5 tentativas de login falhadas, a conta deve ser bloqueada temporariamente por 30 minutos.  
**Aplicação:** Autenticação  
**Prioridade:** Média  
**Validação:** Contar tentativas falhadas e aplicar bloqueio

### RN-005: Permissões de Acesso
**Descrição:** Cada perfil de usuário tem acesso restrito a funcionalidades específicas do sistema.  
**Aplicação:** Todas as funcionalidades administrativas  
**Prioridade:** Alta  
**Validação:** Verificar permissões antes de permitir acesso

---

## 3. Regras de Negócio - Catálogo de Produtos

### RN-006: Categorização de Produtos
**Descrição:** A categorização dos produtos deve seguir a estrutura de classes definida pela gestão de estoque.  
**Aplicação:** Cadastro e edição de produtos  
**Prioridade:** Alta  
**Validação:** Produto deve pertencer a uma categoria válida

### RN-007: Exibição de Produtos Sem Estoque
**Descrição:** Produtos sem estoque podem ser exibidos com etiqueta "Indisponível" ou ocultados, conforme configuração administrativa.  
**Aplicação:** Exibição de produtos no catálogo  
**Prioridade:** Média  
**Validação:** Verificar estoque e aplicar regra de exibição

### RN-008: Preço Não Negativo
**Descrição:** O preço de um produto deve ser sempre maior que zero.  
**Aplicação:** Cadastro e edição de produtos  
**Prioridade:** Alta  
**Validação:** Validar que preço > 0

### RN-009: Estoque Não Negativo
**Descrição:** O estoque de um produto não pode ser negativo.  
**Aplicação:** Atualização de estoque, baixa de estoque  
**Prioridade:** Alta  
**Validação:** Verificar estoque antes de permitir baixa

### RN-010: SKU Único
**Descrição:** Cada produto deve ter um SKU (código) único no sistema.  
**Aplicação:** Cadastro de produtos  
**Prioridade:** Alta  
**Validação:** Verificar unicidade do SKU

---

## 4. Regras de Negócio - Carrinho e Checkout

### RN-011: Quantidade Máxima no Carrinho
**Descrição:** Não é possível adicionar ao carrinho uma quantidade maior do que a disponível em estoque.  
**Aplicação:** Adição ao carrinho, atualização de quantidade  
**Prioridade:** Alta  
**Validação:** Verificar disponibilidade antes de adicionar/atualizar

### RN-012: Preço no Carrinho
**Descrição:** O preço do produto no carrinho deve refletir o preço atual de venda no momento da adição.  
**Aplicação:** Adição ao carrinho  
**Prioridade:** Alta  
**Validação:** Usar preço atual do produto

### RN-013: Persistência do Carrinho
**Descrição:** O carrinho deve ser persistente por 24 horas ou até a finalização da compra.  
**Aplicação:** Gerenciamento de carrinho  
**Prioridade:** Média  
**Validação:** Manter carrinho em sessão ou banco de dados

### RN-014: Validação de Cupom
**Descrição:** Cupons devem ser validados quanto à validade, limite de uso e aplicabilidade antes de serem aplicados.  
**Aplicação:** Aplicação de cupom  
**Prioridade:** Alta  
**Validação:** Verificar data, limite e regras de aplicação

### RN-015: Tipo de Desconto
**Descrição:** Cupons podem ser percentuais (ex: 10% OFF) ou de valor fixo (ex: R$20 OFF).  
**Aplicação:** Criação e aplicação de cupom  
**Prioridade:** Alta  
**Validação:** Aplicar desconto conforme tipo configurado

### RN-016: Limite de Uso de Cupom
**Descrição:** Cada cupom pode ter limite de uso total e/ou por cliente.  
**Aplicação:** Aplicação de cupom  
**Prioridade:** Média  
**Validação:** Verificar limites antes de aplicar

### RN-017: Valor Mínimo para Cupom
**Descrição:** Cupons podem exigir um valor mínimo de pedido para serem aplicados.  
**Aplicação:** Aplicação de cupom  
**Prioridade:** Média  
**Validação:** Verificar valor do pedido antes de aplicar

### RN-018: Cálculo de Frete
**Descrição:** O cálculo de frete deve considerar peso, dimensões, CEP de origem/destino e regras configuradas.  
**Aplicação:** Cálculo de frete  
**Prioridade:** Alta  
**Validação:** Aplicar regras de cálculo configuradas

### RN-019: Frete Grátis
**Descrição:** Pode haver regra de frete grátis acima de determinado valor ou para CEPs específicos.  
**Aplicação:** Cálculo de frete  
**Prioridade:** Média  
**Validação:** Verificar condições de frete grátis

### RN-020: Processamento de Pagamento
**Descrição:** Pagamentos via Pix e Cartão de Crédito devem ter validação em tempo real. Boleto tem prazo de compensação.  
**Aplicação:** Processamento de pagamento  
**Prioridade:** Alta  
**Validação:** Processar conforme método de pagamento

---

## 5. Regras de Negócio - Pedidos

### RN-021: Criação de Pedido
**Descrição:** Um pedido só pode ser criado após confirmação do pagamento (ou geração do boleto).  
**Aplicação:** Finalização de compra  
**Prioridade:** Alta  
**Validação:** Verificar status do pagamento antes de criar pedido

### RN-022: Atualização de Status
**Descrição:** A atualização dos status de pedido pode ser manual (equipe) ou automatizada (integração transportadora).  
**Aplicação:** Gerenciamento de pedidos  
**Prioridade:** Alta  
**Validação:** Permitir atualização conforme permissões

### RN-023: Código de Rastreamento
**Descrição:** Apenas pedidos com status "Enviado" ou superior devem exibir código de rastreamento.  
**Aplicação:** Acompanhamento de pedido  
**Prioridade:** Média  
**Validação:** Verificar status antes de exibir código

### RN-024: Cancelamento de Pedido
**Descrição:** Ao cancelar um pedido, o estoque deve ser revertido e o pagamento estornado (se aplicável).  
**Aplicação:** Cancelamento de pedido  
**Prioridade:** Alta  
**Validação:** Reverter estoque e processar estorno

### RN-025: Número de Pedido Único
**Descrição:** Cada pedido deve ter um número único gerado automaticamente.  
**Aplicação:** Criação de pedido  
**Prioridade:** Alta  
**Validação:** Gerar número único sequencial

---

## 6. Regras de Negócio - Estoque

### RN-026: Reserva de Estoque
**Descrição:** Ao adicionar produto ao carrinho, o estoque deve ser reservado temporariamente.  
**Aplicação:** Adição ao carrinho  
**Prioridade:** Média  
**Validação:** Reservar estoque por tempo limitado

### RN-027: Baixa de Estoque
**Descrição:** A baixa de estoque só pode ser realizada por funcionários autorizados da expedição.  
**Aplicação:** Processamento de pedido  
**Prioridade:** Alta  
**Validação:** Verificar permissões antes de permitir baixa

### RN-028: Quantidade na Baixa
**Descrição:** A quantidade baixada deve corresponder exatamente à quantidade do pedido.  
**Aplicação:** Baixa de estoque  
**Prioridade:** Alta  
**Validação:** Validar quantidade antes de baixar

### RN-029: Estoque Mínimo
**Descrição:** Quando o estoque de um produto atingir o estoque mínimo, o sistema deve gerar alerta.  
**Aplicação:** Atualização de estoque  
**Prioridade:** Média  
**Validação:** Verificar estoque mínimo após atualização

---

## 7. Regras de Negócio - Programa de Fidelidade

### RN-030: Conversão de Pontos
**Descrição:** A regra de conversão de valor gasto para pontos deve ser configurável (ex: R$1 gasto = 1 ponto).  
**Aplicação:** Acúmulo de pontos  
**Prioridade:** Média  
**Validação:** Aplicar regra configurada

### RN-031: Resgate de Pontos
**Descrição:** A regra de resgate de pontos deve ser configurável (ex: 100 pontos = R$5 de desconto).  
**Aplicação:** Resgate de pontos  
**Prioridade:** Média  
**Validação:** Aplicar regra configurada

### RN-032: Validade de Pontos
**Descrição:** Pontos podem ter validade configurável. Pontos expirados devem ser removidos automaticamente.  
**Aplicação:** Gerenciamento de pontos  
**Prioridade:** Baixa  
**Validação:** Verificar validade ao resgatar pontos

### RN-033: Acúmulo de Pontos
**Descrição:** Pontos devem ser acumulados automaticamente após confirmação do pagamento do pedido.  
**Aplicação:** Finalização de pedido  
**Prioridade:** Média  
**Validação:** Calcular e adicionar pontos após pagamento

---

## 8. Regras de Negócio - Clube de Assinatura

### RN-034: Configuração de Planos
**Descrição:** Os planos de assinatura devem ser configuráveis (preço, frequência, tipo de café).  
**Aplicação:** Gerenciamento de assinaturas  
**Prioridade:** Média  
**Validação:** Permitir configuração flexível

### RN-035: Pagamento Recorrente
**Descrição:** O sistema deve gerenciar pagamentos recorrentes e notificar sobre falhas no pagamento.  
**Aplicação:** Processamento de assinatura  
**Prioridade:** Alta  
**Validação:** Processar pagamento conforme frequência

### RN-036: Pausa de Assinatura
**Descrição:** Clientes podem pausar assinaturas temporariamente sem perder benefícios.  
**Aplicação:** Gerenciamento de assinatura  
**Prioridade:** Baixa  
**Validação:** Permitir pausa e retomada

### RN-037: Cancelamento de Assinatura
**Descrição:** Ao cancelar assinatura, não devem ser gerados novos pedidos, mas pedidos já gerados devem ser processados.  
**Aplicação:** Cancelamento de assinatura  
**Prioridade:** Média  
**Validação:** Processar cancelamento respeitando pedidos existentes

---

## 9. Regras de Negócio - Notificações

### RN-038: E-mail de Confirmação
**Descrição:** E-mail de confirmação deve ser enviado somente após confirmação do pagamento (ou geração do boleto).  
**Aplicação:** Finalização de compra  
**Prioridade:** Alta  
**Validação:** Verificar status do pagamento antes de enviar

### RN-039: Notificações de Status
**Descrição:** O sistema deve enviar notificações por e-mail a cada mudança de status importante do pedido.  
**Aplicação:** Atualização de status  
**Prioridade:** Média  
**Validação:** Enviar e-mail para status configurados

### RN-040: Notificações de Expedição
**Descrição:** Apenas pedidos com status "Aprovado" devem gerar notificação para a expedição.  
**Aplicação:** Processamento de pedido  
**Prioridade:** Alta  
**Validação:** Verificar status antes de notificar

---

## 10. Regras de Negócio - Relatórios

### RN-041: Acesso a Relatórios
**Descrição:** Apenas administradores podem gerar relatórios.  
**Aplicação:** Geração de relatórios  
**Prioridade:** Alta  
**Validação:** Verificar permissões antes de gerar

### RN-042: Consistência de Dados
**Descrição:** Os dados dos relatórios devem ser consistentes com os dados de vendas.  
**Aplicação:** Geração de relatórios  
**Prioridade:** Alta  
**Validação:** Usar dados transacionais reais

---

## 11. Regras de Negócio - Produção

### RN-043: Registro de Torra
**Descrição:** Apenas usuários com perfil "Barista" ou "Produção" podem registrar torras.  
**Aplicação:** Registro de lotes  
**Prioridade:** Média  
**Validação:** Verificar permissões antes de permitir registro

### RN-044: Código de Lote Único
**Descrição:** Cada lote de torra deve ter um código único gerado automaticamente.  
**Aplicação:** Registro de lote  
**Prioridade:** Média  
**Validação:** Gerar código único

### RN-045: Rastreabilidade
**Descrição:** Lotes de torra devem poder ser associados a produtos para rastreabilidade.  
**Aplicação:** Associação de lote a produto  
**Prioridade:** Baixa  
**Validação:** Permitir associação opcional

---

## 12. Regras de Negócio - Segurança

### RN-046: Dados de Pagamento
**Descrição:** Dados de pagamento não devem ser armazenados localmente. Usar tokenização.  
**Aplicação:** Processamento de pagamento  
**Prioridade:** Alta  
**Validação:** Não armazenar dados sensíveis

### RN-047: Auditoria
**Descrição:** Ações administrativas críticas devem ser registradas para auditoria.  
**Aplicação:** Operações administrativas  
**Prioridade:** Média  
**Validação:** Registrar ações importantes

### RN-048: Sessão Expirada
**Descrição:** Sessões devem expirar após 30 minutos de inatividade.  
**Aplicação:** Autenticação  
**Prioridade:** Média  
**Validação:** Verificar tempo de inatividade

---

## 13. Regras de Negócio - Kits Personalizados

### RN-049: Limitação de Itens
**Descrição:** A seleção de itens para kits pode ser limitada a produtos específicos ou categorias.  
**Aplicação:** Montagem de kit  
**Prioridade:** Baixa  
**Validação:** Validar produtos permitidos

### RN-050: Preço do Kit
**Descrição:** Pode haver preço mínimo ou máximo para kits personalizados.  
**Aplicação:** Montagem de kit  
**Prioridade:** Baixa  
**Validação:** Validar preço total do kit

---

## 14. Matriz de Prioridades

| RN | Descrição | Prioridade | Módulo |
|----|-----------|------------|--------|
| RN-001 | E-mail Único | Alta | Usuários |
| RN-002 | Criptografia de Senha | Alta | Usuários |
| RN-003 | Conta Inativa | Alta | Usuários |
| RN-004 | Bloqueio por Tentativas | Média | Usuários |
| RN-005 | Permissões de Acesso | Alta | Usuários |
| RN-006 | Categorização | Alta | Catálogo |
| RN-007 | Exibição Sem Estoque | Média | Catálogo |
| RN-008 | Preço Não Negativo | Alta | Catálogo |
| RN-009 | Estoque Não Negativo | Alta | Estoque |
| RN-010 | SKU Único | Alta | Catálogo |
| RN-011 | Quantidade Máxima | Alta | Carrinho |
| RN-012 | Preço no Carrinho | Alta | Carrinho |
| RN-013 | Persistência Carrinho | Média | Carrinho |
| RN-014 | Validação de Cupom | Alta | Cupons |
| RN-015 | Tipo de Desconto | Alta | Cupons |
| RN-016 | Limite de Uso | Média | Cupons |
| RN-017 | Valor Mínimo | Média | Cupons |
| RN-018 | Cálculo de Frete | Alta | Frete |
| RN-019 | Frete Grátis | Média | Frete |
| RN-020 | Processamento Pagamento | Alta | Pagamento |
| RN-021 | Criação de Pedido | Alta | Pedidos |
| RN-022 | Atualização Status | Alta | Pedidos |
| RN-023 | Código Rastreamento | Média | Pedidos |
| RN-024 | Cancelamento | Alta | Pedidos |
| RN-025 | Número Único | Alta | Pedidos |
| RN-026 | Reserva Estoque | Média | Estoque |
| RN-027 | Baixa Estoque | Alta | Estoque |
| RN-028 | Quantidade Baixa | Alta | Estoque |
| RN-029 | Estoque Mínimo | Média | Estoque |
| RN-030 | Conversão Pontos | Média | Fidelidade |
| RN-031 | Resgate Pontos | Média | Fidelidade |
| RN-032 | Validade Pontos | Baixa | Fidelidade |
| RN-033 | Acúmulo Pontos | Média | Fidelidade |
| RN-034 | Configuração Planos | Média | Assinatura |
| RN-035 | Pagamento Recorrente | Alta | Assinatura |
| RN-036 | Pausa Assinatura | Baixa | Assinatura |
| RN-037 | Cancelamento Assinatura | Média | Assinatura |
| RN-038 | E-mail Confirmação | Alta | Notificações |
| RN-039 | Notificações Status | Média | Notificações |
| RN-040 | Notificações Expedição | Alta | Notificações |
| RN-041 | Acesso Relatórios | Alta | Relatórios |
| RN-042 | Consistência Dados | Alta | Relatórios |
| RN-043 | Registro Torra | Média | Produção |
| RN-044 | Código Lote Único | Média | Produção |
| RN-045 | Rastreabilidade | Baixa | Produção |
| RN-046 | Dados Pagamento | Alta | Segurança |
| RN-047 | Auditoria | Média | Segurança |
| RN-048 | Sessão Expirada | Média | Segurança |
| RN-049 | Limitação Itens | Baixa | Kits |
| RN-050 | Preço Kit | Baixa | Kits |

---

## 15. Aprovações

| Nome | Cargo | Assinatura | Data |
|------|-------|------------|------|
| Tiago Soares Carneiro da Cunha | Desenvolvedor/Responsável | ___________ | ___/___/___ |

---

**Próximos Passos:**
- Validar regras com stakeholders
- Implementar validações no sistema
- Documentar exceções e tratamentos
- Criar testes para validar regras
# 10. Arquitetura do Sistema

## Soto Café - E-commerce de Cafeteria Gourmet

**Versão:** 1.0  
**Data:** 2025  
**Autor:** Tiago Soares Carneiro da Cunha  
**RGM:** 44030509

---

## 1. Introdução

Este documento descreve a arquitetura do sistema Soto Café, incluindo a estrutura de camadas, componentes principais, tecnologias utilizadas e padrões arquiteturais adotados.

---

## 2. Visão Geral da Arquitetura

### 2.1 Padrão Arquitetural

O sistema segue uma **arquitetura em camadas (Layered Architecture)** com separação clara de responsabilidades:

- **Camada de Apresentação (Frontend)**: Interface do usuário
- **Camada de Aplicação (API)**: Lógica de negócio e endpoints
- **Camada de Dados (Database)**: Persistência de dados
- **Camada de Integração**: Serviços externos

### 2.2 Arquitetura de Alto Nível

```

         Camada de Apresentação                  
  (Frontend - React/Vue/Angular)                 

                   

         Camada de Aplicação                     
  (Backend - API REST)                           
  - Autenticação                                 
  - Lógica de Negócio                            
  - Validações                                   

                   

         Camada de Dados                         
  (PostgreSQL/MySQL)                             

                   

         Serviços Externos                       
  - Gateway de Pagamento                         
  - APIs de Frete                                
  - Serviço de E-mail                            

```

---

## 3. Camadas do Sistema

### 3.1 Camada de Apresentação (Frontend)

**Responsabilidades:**
- Interface do usuário
- Interação com o usuário
- Validações de formulário
- Requisições à API

**Tecnologias Sugeridas:**
- **Framework**: React.js, Vue.js ou Angular
- **Estado**: Redux, Vuex ou NgRx
- **Roteamento**: React Router, Vue Router
- **HTTP Client**: Axios, Fetch API
- **UI Framework**: Material-UI, Bootstrap, Tailwind CSS

**Componentes Principais:**
- Páginas públicas (Home, Produtos, Blog)
- Área do cliente (Perfil, Pedidos)
- Painel administrativo
- Interface de expedição

---

### 3.2 Camada de Aplicação (Backend/API)

**Responsabilidades:**
- Lógica de negócio
- Validações de dados
- Autenticação e autorização
- Integração com serviços externos
- Processamento de pagamentos

**Tecnologias Sugeridas:**
- **Linguagem**: Node.js, Python (Django/Flask), Java (Spring Boot) ou PHP (Laravel)
- **Framework**: Express.js, Django, Spring Boot, Laravel
- **ORM**: Sequelize, TypeORM, Django ORM, Eloquent
- **Autenticação**: JWT (JSON Web Tokens)
- **Validação**: Joi, Yup, Validator.js

**Estrutura de Módulos:**
```
api/
 controllers/     # Controladores (lógica de requisições)
 models/          # Modelos de dados
 services/        # Serviços de negócio
 middleware/      # Middlewares (auth, validação)
 routes/          # Rotas da API
 utils/           # Utilitários
 config/          # Configurações
```

---

### 3.3 Camada de Dados (Database)

**Responsabilidades:**
- Persistência de dados
- Integridade referencial
- Transações
- Consultas otimizadas

**Tecnologias Sugeridas:**
- **SGBD**: PostgreSQL (recomendado) ou MySQL
- **Cache**: Redis (para sessões e cache)
- **Migrations**: Ferramentas de migração do ORM

**Estratégias:**
- Normalização de dados
- Índices para performance
- Backup automático
- Replicação (futuro)

---

### 3.4 Camada de Integração

**Serviços Externos:**
- **Gateway de Pagamento**: PagSeguro, Mercado Pago, Stripe
- **Cálculo de Frete**: APIs dos Correios, transportadoras
- **E-mail Transacional**: SendGrid, Mailchimp, AWS SES
- **Armazenamento de Imagens**: AWS S3, Cloudinary, Azure Blob

---

## 4. Componentes Principais

### 4.1 Módulo de Autenticação
- Login/Logout
- Registro de usuário
- Recuperação de senha
- Gerenciamento de sessão
- Controle de permissões

### 4.2 Módulo de Catálogo
- Gerenciamento de produtos
- Gerenciamento de categorias
- Busca e filtros
- Upload de imagens

### 4.3 Módulo de Carrinho e Checkout
- Gerenciamento de carrinho
- Aplicação de cupons
- Cálculo de frete
- Processamento de pagamento

### 4.4 Módulo de Pedidos
- Criação de pedidos
- Gerenciamento de status
- Rastreamento
- Histórico

### 4.5 Módulo de Estoque
- Controle de estoque
- Baixa de produtos
- Alertas de estoque mínimo

### 4.6 Módulo de Fidelidade
- Acúmulo de pontos
- Resgate de pontos
- Histórico de pontos

### 4.7 Módulo Administrativo
- Dashboard
- Relatórios
- Gerenciamento de usuários
- Configurações

---

## 5. Segurança

### 5.1 Autenticação e Autorização
- JWT para autenticação stateless
- Refresh tokens
- Controle de acesso baseado em roles (RBAC)
- Rate limiting

### 5.2 Proteção de Dados
- HTTPS em todas as comunicações
- Criptografia de senhas (bcrypt/Argon2)
- Tokenização de dados de pagamento
- Validação de entrada (sanitização)

### 5.3 Proteção contra Ataques
- SQL Injection: Uso de ORM/Prepared Statements
- XSS: Sanitização de inputs
- CSRF: Tokens CSRF
- DDoS: Rate limiting e WAF

---

## 6. Performance e Escalabilidade

### 6.1 Otimizações
- Cache de consultas frequentes (Redis)
- CDN para assets estáticos
- Compressão de respostas (Gzip)
- Lazy loading de imagens
- Paginação de resultados

### 6.2 Escalabilidade
- Arquitetura stateless (permite múltiplas instâncias)
- Load balancing
- Banco de dados com replicação (futuro)
- Cache distribuído

---

## 7. Monitoramento e Logs

### 7.1 Logging
- Logs de erros
- Logs de auditoria
- Logs de transações importantes
- Níveis de log (DEBUG, INFO, WARN, ERROR)

### 7.2 Monitoramento
- Métricas de performance
- Uptime monitoring
- Alertas para erros críticos
- Dashboard de métricas

**Ferramentas Sugeridas:**
- Sentry (erros)
- New Relic, Datadog (monitoramento)
- ELK Stack (logs)

---

## 8. Deploy e Infraestrutura

### 8.1 Ambientes
- **Desenvolvimento**: Local
- **Staging**: Ambiente de testes
- **Produção**: Ambiente final

### 8.2 Infraestrutura Sugerida
- **Hospedagem**: AWS, Azure, Google Cloud, DigitalOcean
- **Containerização**: Docker
- **Orquestração**: Docker Compose, Kubernetes (futuro)
- **CI/CD**: GitHub Actions, GitLab CI, Jenkins

### 8.3 Processo de Deploy
1. Desenvolvimento local
2. Commit para repositório
3. Testes automatizados
4. Deploy para staging
5. Testes em staging
6. Deploy para produção

---

## 9. Integrações

### 9.1 Gateway de Pagamento
- Integração via SDK/API
- Webhooks para notificações
- Tratamento de erros
- Retry logic

### 9.2 APIs de Frete
- Integração com APIs dos Correios
- Integração com transportadoras
- Fallback para cálculo manual
- Cache de cotações

### 9.3 Serviço de E-mail
- Templates de e-mail
- Fila de envio
- Retry em caso de falha
- Tracking de abertura/cliques

---

## 10. Diagrama de Componentes

```

   Frontend   
  (React/Vue) 

       
        HTTP/REST
       

         API Backend                     
                
     Auth      Products             
                
                
    Orders      Cart                
                

       
       
                                     
   
Database   Payment   Freight  Email  
(Postgres  Gateway    API    Service 
   SQL)                              
   
```

---

## 11. Considerações de Design

### 11.1 Princípios SOLID
- Single Responsibility
- Open/Closed
- Liskov Substitution
- Interface Segregation
- Dependency Inversion

### 11.2 Design Patterns
- Repository Pattern (acesso a dados)
- Service Layer (lógica de negócio)
- Factory Pattern (criação de objetos)
- Strategy Pattern (algoritmos variáveis)

---

## 12. Aprovações

| Nome | Cargo | Assinatura | Data |
|------|-------|------------|------|
| Tiago Soares Carneiro da Cunha | Desenvolvedor/Responsável | ___________ | ___/___/___ |

---

**Próximos Passos:**
- Definir stack tecnológica específica
- Criar diagramas detalhados
- Estabelecer padrões de código
- Configurar ambiente de desenvolvimento
# 11. Diagrama de Classes

## Soto Café - E-commerce de Cafeteria Gourmet

**Versão:** 1.0  
**Data:** 2025  
**Autor:** Tiago Soares Carneiro da Cunha  
**RGM:** 44030509

---

## 1. Introdução

Este documento apresenta o diagrama de classes do sistema Soto Café, descrevendo as principais classes, seus atributos, métodos e relacionamentos.

---

## 2. Classes Principais

### 2.1 Módulo de Usuários

#### Classe: Usuario
```java
class Usuario {
    - Long id
    - String nome
    - String email
    - String senhaHash
    - String telefone
    - String cpf
    - Enum tipoUsuario
    - Enum status
    - Date dataCadastro
    - Date dataUltimoAcesso
    - Boolean emailVerificado
    
    + criar()
    + atualizar()
    + autenticar()
    + desativar()
    + verificarEmail()
}
```

#### Classe: Endereco
```java
class Endereco {
    - Long id
    - Long usuarioId
    - Enum tipoEndereco
    - String cep
    - String rua
    - String numero
    - String complemento
    - String bairro
    - String cidade
    - String estado
    - Boolean enderecoPrincipal
    
    + criar()
    + atualizar()
    + deletar()
    + marcarComoPrincipal()
}
```

**Relacionamento:** Usuario 1..* Endereco

---

### 2.2 Módulo de Produtos

#### Classe: Produto
```java
class Produto {
    - Long id
    - Long categoriaId
    - String nome
    - String descricao
    - String sku
    - BigDecimal precoUnitario
    - Integer estoqueAtual
    - Integer estoqueMinimo
    - Double pesoGramas
    - Boolean ativo
    - Boolean destaque
    
    + criar()
    + atualizar()
    + deletar()
    + verificarEstoque()
    + atualizarEstoque()
}
```

#### Classe: Categoria
```java
class Categoria {
    - Long id
    - String nome
    - String descricao
    - String slug
    - Long categoriaPaiId
    - Integer ordemExibicao
    - Boolean ativo
    
    + criar()
    + atualizar()
    + deletar()
    + listarProdutos()
}
```

**Relacionamento:** Categoria 1..* Produto

---

### 2.3 Módulo de Pedidos

#### Classe: Pedido
```java
class Pedido {
    - Long id
    - Long clienteId
    - Long enderecoEntregaId
    - String numeroPedido
    - Date dataPedido
    - Enum statusPedido
    - BigDecimal valorSubtotal
    - BigDecimal valorDesconto
    - BigDecimal valorFrete
    - BigDecimal valorTotal
    - Enum metodoPagamento
    - Enum statusPagamento
    - String codigoRastreamento
    
    + criar()
    + atualizarStatus()
    + cancelar()
    + calcularTotal()
    + gerarNumeroPedido()
}
```

#### Classe: ItemPedido
```java
class ItemPedido {
    - Long id
    - Long pedidoId
    - Long produtoId
    - Integer quantidade
    - BigDecimal precoUnitario
    - BigDecimal subtotal
    
    + criar()
    + calcularSubtotal()
}
```

**Relacionamento:** Pedido 1..* ItemPedido  
**Relacionamento:** ItemPedido *..1 Produto

---

### 2.4 Módulo de Carrinho

#### Classe: Carrinho
```java
class Carrinho {
    - Long id
    - Long usuarioId
    - String sessionId
    - Date dataCriacao
    - Date dataExpiracao
    
    + criar()
    + adicionarItem()
    + removerItem()
    + atualizarQuantidade()
    + limpar()
    + calcularTotal()
}
```

#### Classe: ItemCarrinho
```java
class ItemCarrinho {
    - Long id
    - Long carrinhoId
    - Long produtoId
    - Integer quantidade
    
    + criar()
    + atualizarQuantidade()
    + remover()
}
```

**Relacionamento:** Carrinho 1..* ItemCarrinho

---

### 2.5 Módulo de Cupons

#### Classe: CupomDesconto
```java
class CupomDesconto {
    - Long id
    - String codigo
    - Enum tipoDesconto
    - BigDecimal valorDesconto
    - Date dataInicio
    - Date dataFim
    - Integer limiteUsosTotal
    - Integer limiteUsosPorCliente
    - Integer usosAtuais
    - BigDecimal valorMinimoPedido
    - Boolean ativo
    
    + criar()
    + validar()
    + aplicar()
    + incrementarUso()
    + verificarDisponibilidade()
}
```

**Relacionamento:** CupomDesconto 1..* Pedido

---

### 2.6 Módulo de Fidelidade

#### Classe: ProgramaFidelidade
```java
class ProgramaFidelidade {
    - Long id
    - Long usuarioId
    - Integer saldoPontos
    - Integer pontosTotaisGanhos
    - Integer pontosTotaisResgatados
    - Date dataUltimaAtualizacao
    
    + adicionarPontos()
    + resgatarPontos()
    + calcularPontos()
    + verificarSaldo()
}
```

#### Classe: HistoricoPontos
```java
class HistoricoPontos {
    - Long id
    - Long fidelidadeId
    - Long pedidoId
    - Enum tipoMovimentacao
    - Integer pontos
    - String descricao
    - Date dataMovimentacao
    
    + registrar()
}
```

**Relacionamento:** ProgramaFidelidade 1..* HistoricoPontos

---

### 2.7 Módulo de Assinatura

#### Classe: Assinatura
```java
class Assinatura {
    - Long id
    - Long usuarioId
    - Long planoId
    - Enum frequenciaEntrega
    - Enum status
    - Date dataInicio
    - Date dataProximaEntrega
    - Date dataCancelamento
    - BigDecimal valorMensal
    
    + criar()
    + pausar()
    + cancelar()
    + reativar()
    + gerarPedido()
}
```

#### Classe: PlanoAssinatura
```java
class PlanoAssinatura {
    - Long id
    - String nome
    - String descricao
    - BigDecimal valorMensal
    - Integer quantidadeCafe
    - Boolean ativo
    
    + criar()
    + atualizar()
    + desativar()
}
```

**Relacionamento:** PlanoAssinatura 1..* Assinatura

---

## 3. Diagrama de Classes Simplificado

```
         
   Usuario   <  Endereco    
   1..*  
       
        1
       
        *         
       >    Pedido    
                   
                          
                           1
                          
                           *         
                          >  ItemPedido  
                                      
                                             
                                              *..1
                                             
                                      
                                         Produto    
                                      
                                             
                                              *..1
                                             
                                      
                                        Categoria   
                                      

         
  Carrinho   < ItemCarrinho 
   1..*  
                               
                                *..1
                               
                          
                            Produto   
                          

         
   Pedido    < CupomDesconto
   *..1  

         
   Usuario   <ProgramaFideli
   1..1  
                               
                                1
                               
                                *         
                               >HistoricoPonto
                                           
```

---

## 4. Classes de Serviço

### 4.1 Serviços de Negócio

#### Classe: PedidoService
```java
class PedidoService {
    + criarPedido(Carrinho, Endereco, MetodoPagamento): Pedido
    + processarPagamento(Pedido): Boolean
    + atualizarStatus(Pedido, Status): void
    + cancelarPedido(Pedido): void
    + calcularFrete(Carrinho, CEP): BigDecimal
}
```

#### Classe: EstoqueService
```java
class EstoqueService {
    + verificarDisponibilidade(Produto, Integer): Boolean
    + reservarEstoque(Produto, Integer): void
    + baixarEstoque(Produto, Integer): void
    + reverterEstoque(Produto, Integer): void
    + verificarEstoqueMinimo(Produto): Boolean
}
```

#### Classe: FidelidadeService
```java
class FidelidadeService {
    + acumularPontos(Usuario, Pedido): void
    + resgatarPontos(Usuario, Integer): BigDecimal
    + calcularPontos(BigDecimal): Integer
    + verificarValidadePontos(Usuario): void
}
```

---

## 5. Classes de Repositório

### 5.1 Padrão Repository

#### Interface: IUsuarioRepository
```java
interface IUsuarioRepository {
    + findById(Long): Usuario
    + findByEmail(String): Usuario
    + save(Usuario): Usuario
    + delete(Long): void
    + findAll(): List<Usuario>
}
```

#### Interface: IProdutoRepository
```java
interface IProdutoRepository {
    + findById(Long): Produto
    + findByCategoria(Long): List<Produto>
    + search(String): List<Produto>
    + save(Produto): Produto
    + delete(Long): void
}
```

---

## 6. Classes de Validação

### 6.1 Validadores

#### Classe: ValidadorPedido
```java
class ValidadorPedido {
    + validarCarrinho(Carrinho): Boolean
    + validarEstoque(ItemPedido): Boolean
    + validarEndereco(Endereco): Boolean
    + validarPagamento(MetodoPagamento): Boolean
}
```

#### Classe: ValidadorCupom
```java
class ValidadorCupom {
    + validarCodigo(String): Boolean
    + validarValidade(CupomDesconto): Boolean
    + validarLimiteUso(CupomDesconto): Boolean
    + validarValorMinimo(CupomDesconto, BigDecimal): Boolean
}
```

---

## 7. Notações UML

### 7.1 Relacionamentos

- **Associação (1..1)**: Um para um
- **Associação (1..*)**: Um para muitos
- **Associação (*..1)**: Muitos para um
- **Associação (*..*)**: Muitos para muitos
- **Herança**: Extends/Implements
- **Composição**: Parte-todo forte
- **Agregação**: Parte-todo fraco

### 7.2 Visibilidade

- **+**: Público (public)
- **-**: Privado (private)
- **#**: Protegido (protected)
- **~**: Pacote (package)

---

## 8. Aprovações

| Nome | Cargo | Assinatura | Data |
|------|-------|------------|------|
| Tiago Soares Carneiro da Cunha | Desenvolvedor/Responsável | ___________ | ___/___/___ |

---

**Próximos Passos:**
- Criar diagrama visual completo
- Detalhar métodos e parâmetros
- Validar relacionamentos
- Implementar classes no código
# 12. Diagrama de Componentes


## 12.1 Introdução

Este documento apresenta o diagrama de componentes do sistema Soto Café, descrevendo os principais componentes do sistema e suas interações.

## 12.2 Componentes Principais

### 12.2.1 Camada de Apresentação

**Frontend Web:**
- Componente de Interface do Cliente
- Componente de Painel Administrativo
- Componente de Interface de Expedição

### 12.2.2 Camada de Aplicação

**API Backend:**
- Módulo de Autenticação
- Módulo de Produtos
- Módulo de Pedidos
- Módulo de Pagamento
- Módulo de Frete
- Módulo de Fidelidade
- Módulo de Assinatura

### 12.2.3 Camada de Dados

**Banco de Dados:**
- Serviço de Persistência
- Serviço de Cache (Redis)

### 12.2.4 Integrações Externas

**Serviços:**
- Gateway de Pagamento
- API de Frete
- Serviço de E-mail
- Armazenamento de Imagens

## 12.3 Diagrama de Componentes

```

     Frontend (React/Vue)            
            
   Cliente       Admin          
            

                     
          HTTP/REST  
                     

         API Backend                 
            
     Auth      Products         
            
            
    Orders      Payment         
            

        
        
                                      
   
Database    Payment    Freight  Email 
(Postgres)  Gateway     API    Service
   
```

## 12.4 Interações entre Componentes

### 12.4.1 Fluxo de Compra

1. Cliente (Frontend) → API Backend (Módulo Produtos)
2. API Backend → Database (Consulta produtos)
3. Cliente → API Backend (Módulo Pedidos)
4. API Backend → Payment Gateway (Processar pagamento)
5. API Backend → Freight API (Calcular frete)
6. API Backend → Email Service (Enviar confirmação)

### 12.4.2 Fluxo Administrativo

1. Admin (Frontend) → API Backend (Módulo Produtos)
2. API Backend → Database (Atualizar produtos)
3. API Backend → Cache (Invalidar cache)

## 12.5 Tecnologias por Componente

**Frontend:**
- React.js / Vue.js
- Redux / Vuex
- Axios

**Backend:**
- Node.js / Python / Java
- Express.js / Django / Spring Boot
- JWT Authentication

**Database:**
- PostgreSQL
- Redis (Cache)

**Integrações:**
- REST APIs
- Webhooks
- Message Queue (futuro)


# 13. Tecnologias

## Soto Café - E-commerce de Cafeteria Gourmet

**Versão:** 1.0  
**Data:** 2025  
**Autor:** Tiago Soares Carneiro da Cunha  
**RGM:** 44030509

---

## 1. Introdução

Este documento apresenta as tecnologias recomendadas para o desenvolvimento do sistema Soto Café, incluindo justificativas de escolha e alternativas.

---

## 2. Stack Tecnológica Recomendada

### 2.1 Frontend

#### Framework Principal
**Recomendação:** React.js  
**Versão:** 18.x ou superior  
**Justificativa:**
- Grande comunidade e ecossistema
- Componentização reutilizável
- Performance otimizada
- Flexibilidade e escalabilidade

**Alternativas:**
- Vue.js 3.x
- Angular 15+

#### Gerenciamento de Estado
**Recomendação:** Redux Toolkit + React Query  
**Justificativa:**
- Gerenciamento de estado global
- Cache de requisições
- Sincronização de dados

**Alternativas:**
- Zustand
- Context API + Hooks

#### Roteamento
**Recomendação:** React Router v6  
**Justificativa:**
- Padrão da indústria
- Suporte a rotas protegidas
- Lazy loading

#### UI Framework
**Recomendação:** Material-UI (MUI) ou Tailwind CSS  
**Justificativa:**
- Componentes prontos
- Design system consistente
- Responsividade

**Alternativas:**
- Ant Design
- Chakra UI
- Bootstrap

#### HTTP Client
**Recomendação:** Axios  
**Justificativa:**
- Interceptors
- Tratamento de erros
- Cancelamento de requisições

**Alternativas:**
- Fetch API nativo
- SWR

---

### 2.2 Backend

#### Linguagem e Framework
**Opção 1 - Node.js (Recomendado):**
- **Framework:** Express.js ou Nest.js
- **Linguagem:** TypeScript
- **Justificativa:**
  - Mesma linguagem no frontend e backend
  - Grande ecossistema
  - Performance adequada
  - Fácil integração

**Opção 2 - Python:**
- **Framework:** Django ou FastAPI
- **Justificativa:**
  - Rápido desenvolvimento
  - Boa para análise de dados
  - Grande comunidade

**Opção 3 - Java:**
- **Framework:** Spring Boot
- **Justificativa:**
  - Robusto e escalável
  - Padrões enterprise
  - Performance

**Opção 4 - PHP:**
- **Framework:** Laravel
- **Justificativa:**
  - Popular para e-commerce
  - Boa documentação
  - Ecossistema maduro

#### ORM/Database Access
**Para Node.js:**
- Sequelize ou TypeORM
- Prisma (recomendado)

**Para Python:**
- Django ORM
- SQLAlchemy

**Para Java:**
- Hibernate/JPA

**Para PHP:**
- Eloquent ORM

#### Autenticação
**Recomendação:** JWT (JSON Web Tokens)  
**Bibliotecas:**
- jsonwebtoken (Node.js)
- PyJWT (Python)
- java-jwt (Java)

---

### 2.3 Banco de Dados

#### SGBD Principal
**Recomendação:** PostgreSQL 14+  
**Justificativa:**
- Open source
- ACID compliance
- Suporte a JSON
- Performance
- Recursos avançados

**Alternativas:**
- MySQL 8.0+
- MariaDB

#### Cache
**Recomendação:** Redis 7+  
**Justificativa:**
- Cache de sessões
- Cache de consultas
- Filas de processamento
- Performance

---

### 2.4 Serviços Externos

#### Gateway de Pagamento
**Opções:**
- **PagSeguro** (Brasil)
- **Mercado Pago** (Brasil/Latam)
- **Stripe** (Internacional)
- **Asaas** (Brasil)

#### Cálculo de Frete
**Opções:**
- **API dos Correios**
- **Melhor Envio**
- **Frete Rápido**
- **Jadlog API**

#### E-mail Transacional
**Opções:**
- **SendGrid**
- **Mailchimp Transactional**
- **AWS SES**
- **Mailgun**

#### Armazenamento de Imagens
**Opções:**
- **AWS S3**
- **Cloudinary**
- **Azure Blob Storage**
- **Google Cloud Storage**

---

### 2.5 Ferramentas de Desenvolvimento

#### Controle de Versão
**Recomendação:** Git  
**Plataforma:** GitHub, GitLab ou Bitbucket

#### Gerenciamento de Dependências
**Frontend:**
- npm ou yarn

**Backend:**
- npm/yarn (Node.js)
- pip (Python)
- Maven/Gradle (Java)
- Composer (PHP)

#### Containerização
**Recomendação:** Docker  
**Justificativa:**
- Ambiente consistente
- Fácil deploy
- Isolamento

#### CI/CD
**Opções:**
- GitHub Actions
- GitLab CI
- Jenkins
- CircleCI

---

### 2.6 Testes

#### Frontend
- **Unitários:** Jest, Vitest
- **Componentes:** React Testing Library
- **E2E:** Cypress, Playwright

#### Backend
- **Unitários:** Jest (Node.js), pytest (Python), JUnit (Java)
- **Integração:** Supertest (Node.js)
- **E2E:** Postman, Newman

---

### 2.7 Monitoramento e Logs

#### Monitoramento de Erros
- **Sentry**
- **Rollbar**
- **Bugsnag**

#### Monitoramento de Performance
- **New Relic**
- **Datadog**
- **Application Insights (Azure)**

#### Logs
- **Winston** (Node.js)
- **Log4j** (Java)
- **ELK Stack** (Elasticsearch, Logstash, Kibana)

---

### 2.8 Segurança

#### Validação
- **Joi** (Node.js)
- **Yup** (Frontend/Backend)
- **Validator.js**

#### Segurança
- **Helmet.js** (Node.js)
- **CORS** configurado
- **Rate Limiting:** express-rate-limit

---

## 3. Arquitetura de Deploy

### 3.1 Hospedagem

#### Opções de Cloud
- **AWS** (EC2, RDS, S3, Lambda)
- **Azure** (App Service, SQL Database, Blob Storage)
- **Google Cloud** (Compute Engine, Cloud SQL, Cloud Storage)
- **DigitalOcean** (Droplets, Managed Databases)

#### PaaS (Platform as a Service)
- **Heroku**
- **Vercel** (Frontend)
- **Netlify** (Frontend)
- **Railway**
- **Render**

---

## 4. Stack Recomendada Final

### 4.1 Opção 1: Full Stack JavaScript (Recomendada)

**Frontend:**
- React.js 18+
- TypeScript
- Redux Toolkit
- Material-UI
- Axios
- React Router

**Backend:**
- Node.js 18+
- Express.js ou Nest.js
- TypeScript
- Prisma ORM
- JWT

**Banco de Dados:**
- PostgreSQL 14+
- Redis 7+

**Deploy:**
- Docker
- AWS/Azure/DigitalOcean

---

### 4.2 Opção 2: Python/Django

**Frontend:**
- React.js 18+
- TypeScript

**Backend:**
- Python 3.11+
- Django 4.2+
- Django REST Framework
- JWT

**Banco de Dados:**
- PostgreSQL 14+
- Redis 7+

---

### 4.3 Opção 3: Java/Spring Boot

**Frontend:**
- React.js 18+
- TypeScript

**Backend:**
- Java 17+
- Spring Boot 3.0+
- Spring Data JPA
- JWT

**Banco de Dados:**
- PostgreSQL 14+
- Redis 7+

---

## 5. Justificativa da Escolha

### 5.1 Por que Full Stack JavaScript?

1. **Consistência:** Mesma linguagem no frontend e backend
2. **Produtividade:** Reutilização de código e conhecimento
3. **Ecossistema:** Grande comunidade e bibliotecas
4. **Performance:** Node.js adequado para I/O intensivo
5. **Curva de aprendizado:** Mais fácil para equipes pequenas

### 5.2 Quando considerar outras opções?

- **Python/Django:** Se a equipe tem expertise em Python ou precisa de análise de dados
- **Java/Spring:** Se precisa de robustez enterprise e a equipe conhece Java
- **PHP/Laravel:** Se a equipe tem experiência com PHP e e-commerce

---

## 6. Requisitos de Sistema

### 6.1 Desenvolvimento

**Mínimo:**
- CPU: 4 cores
- RAM: 8GB
- Disco: 50GB livre
- Node.js 18+ ou Python 3.11+ ou Java 17+
- Docker Desktop

**Recomendado:**
- CPU: 8 cores
- RAM: 16GB
- Disco: 100GB SSD
- IDE: VS Code, IntelliJ IDEA, ou WebStorm

---

## 7. Aprovações

| Nome | Cargo | Assinatura | Data |
|------|-------|------------|------|
| Tiago Soares Carneiro da Cunha | Desenvolvedor/Responsável | ___________ | ___/___/___ |

---

**Próximos Passos:**
- Validar stack com equipe
- Configurar ambiente de desenvolvimento
- Criar projeto base
- Estabelecer padrões de código
# 14. Modelo de Domínio

## Soto Café - E-commerce de Cafeteria Gourmet

**Versão:** 1.0  
**Data:** 2025  
**Autor:** Tiago Soares Carneiro da Cunha

---

## 1. Introdução

Este documento descreve o modelo de domínio do sistema Soto Café, identificando as entidades de negócio fundamentais, seus atributos e relacionamentos.

---

## 2. Entidades Principais

### 2.1 Usuário

Representa todos os usuários do sistema (clientes, administradores, funcionários).

**Atributos:**
- `id_usuario` (PK): Identificador único
- `nome`: Nome completo do usuário
- `email`: E-mail (único)
- `senha_hash`: Hash da senha (criptografada)
- `telefone`: Telefone de contato
- `cpf`: CPF (opcional, para clientes)
- `tipo_usuario`: Enum (Cliente, Administrador, Gerente_Conteudo, Expedicao, Suporte, Barista)
- `status`: Enum (Ativo, Inativo, Bloqueado)
- `data_cadastro`: Data e hora do cadastro
- `data_ultimo_acesso`: Data e hora do último acesso
- `email_verificado`: Boolean (se e-mail foi confirmado)
- `token_ativacao`: Token para ativação de conta
- `data_expiracao_token`: Data de expiração do token

**Relacionamentos:**
- Possui muitos Endereços (1:N)
- Faz muitos Pedidos (1:N)
- Possui um ProgramaFidelidade (1:1)
- Possui muitos CuponsUtilizados (1:N)

---

### 2.2 Endereco

Representa endereços de entrega e cobrança dos usuários.

**Atributos:**
- `id_endereco` (PK): Identificador único
- `id_usuario` (FK): Referência ao usuário
- `tipo_endereco`: Enum (Residencial, Comercial, Cobranca)
- `cep`: CEP
- `rua`: Logradouro
- `numero`: Número
- `complemento`: Complemento (opcional)
- `bairro`: Bairro
- `cidade`: Cidade
- `estado`: Estado (UF)
- `ponto_referencia`: Ponto de referência (opcional)
- `endereco_principal`: Boolean (endereço padrão)
- `data_cadastro`: Data de cadastro

**Relacionamentos:**
- Pertence a um Usuário (N:1)
- Usado em muitos Pedidos (1:N)

---

### 2.3 Categoria

Representa categorias de produtos.

**Atributos:**
- `id_categoria` (PK): Identificador único
- `nome_categoria`: Nome da categoria
- `descricao`: Descrição da categoria
- `slug`: URL amigável
- `id_categoria_pai` (FK): Referência à categoria pai (para subcategorias)
- `ordem_exibicao`: Ordem de exibição no menu
- `ativo`: Boolean (se categoria está ativa)
- `imagem`: URL da imagem da categoria

**Relacionamentos:**
- Possui muitos Produtos (1:N)
- Pode ter CategoriaPai (N:1) - auto-relacionamento

---

### 2.4 Produto

Representa produtos do catálogo (cafés, acessórios, kits).

**Atributos:**
- `id_produto` (PK): Identificador único
- `id_categoria` (FK): Referência à categoria
- `nome_produto`: Nome do produto
- `descricao`: Descrição detalhada
- `descricao_curta`: Descrição resumida
- `slug`: URL amigável
- `sku`: Código SKU único
- `preco_unitario`: Preço de venda
- `preco_custo`: Preço de custo (opcional)
- `estoque_atual`: Quantidade em estoque
- `estoque_minimo`: Estoque mínimo para alerta
- `peso_gramas`: Peso em gramas
- `altura_cm`: Altura em centímetros
- `largura_cm`: Largura em centímetros
- `profundidade_cm`: Profundidade em centímetros
- `ativo`: Boolean (se produto está ativo)
- `destaque`: Boolean (se produto está em destaque)
- `data_cadastro`: Data de cadastro
- `data_atualizacao`: Data da última atualização
- `origem`: Origem do café (opcional)
- `nivel_torra`: Nível de torra (opcional)
- `notas_sensoriais`: Notas sensoriais (opcional)
- `tipo_moagem`: Tipo de moagem (opcional)

**Relacionamentos:**
- Pertence a uma Categoria (N:1)
- Aparece em muitos ItemPedido (1:N)
- Possui muitas ImagensProduto (1:N)
- Pode estar em muitos Kits (N:M)
- Pode estar em muitos LotesTorra (N:M)

---

### 2.5 ImagemProduto

Representa imagens dos produtos.

**Atributos:**
- `id_imagem` (PK): Identificador único
- `id_produto` (FK): Referência ao produto
- `url_imagem`: URL da imagem
- `ordem`: Ordem de exibição
- `principal`: Boolean (imagem principal)
- `alt_text`: Texto alternativo para acessibilidade

**Relacionamentos:**
- Pertence a um Produto (N:1)

---

### 2.6 Pedido

Representa pedidos realizados pelos clientes.

**Atributos:**
- `id_pedido` (PK): Identificador único
- `id_cliente` (FK): Referência ao cliente
- `id_endereco_entrega` (FK): Referência ao endereço de entrega
- `numero_pedido`: Número único do pedido (gerado)
- `data_pedido`: Data e hora do pedido
- `status_pedido`: Enum (Confirmado, Em_Preparacao, Enviado, Em_Transito, Entregue, Cancelado)
- `valor_subtotal`: Valor dos produtos
- `valor_desconto`: Valor do desconto (cupom)
- `valor_frete`: Valor do frete
- `valor_total`: Valor total do pedido
- `metodo_pagamento`: Enum (Cartao_Credito, Pix, Boleto)
- `status_pagamento`: Enum (Pendente, Aprovado, Recusado, Estornado)
- `id_cupom` (FK): Referência ao cupom utilizado (opcional)
- `codigo_rastreamento`: Código de rastreamento da transportadora
- `observacoes`: Observações do cliente
- `data_atualizacao`: Data da última atualização

**Relacionamentos:**
- Pertence a um Usuário (Cliente) (N:1)
- Usa um Endereco (N:1)
- Contém muitos ItemPedido (1:N)
- Pode usar um CupomDesconto (N:1)
- Possui muitos HistoricoStatusPedido (1:N)

---

### 2.7 ItemPedido

Representa um item (produto) dentro de um pedido.

**Atributos:**
- `id_item_pedido` (PK): Identificador único
- `id_pedido` (FK): Referência ao pedido
- `id_produto` (FK): Referência ao produto
- `quantidade`: Quantidade do produto
- `preco_unitario_no_pedido`: Preço unitário no momento da compra
- `subtotal`: Subtotal do item (quantidade × preço)

**Relacionamentos:**
- Pertence a um Pedido (N:1)
- Referencia um Produto (N:1)

---

### 2.8 HistoricoStatusPedido

Representa o histórico de mudanças de status de um pedido.

**Atributos:**
- `id_historico` (PK): Identificador único
- `id_pedido` (FK): Referência ao pedido
- `status_anterior`: Status anterior
- `status_novo`: Novo status
- `data_mudanca`: Data e hora da mudança
- `id_usuario` (FK): Usuário que alterou (opcional, para alterações manuais)
- `observacoes`: Observações sobre a mudança

**Relacionamentos:**
- Pertence a um Pedido (N:1)
- Pode ter um Usuário (N:1)

---

### 2.9 Carrinho

Representa o carrinho de compras de um cliente (sessão ou persistente).

**Atributos:**
- `id_carrinho` (PK): Identificador único
- `id_usuario` (FK): Referência ao usuário (opcional, para carrinho persistente)
- `session_id`: ID da sessão (para carrinho não autenticado)
- `data_criacao`: Data de criação
- `data_atualizacao`: Data da última atualização
- `data_expiracao`: Data de expiração (24h)

**Relacionamentos:**
- Pertence a um Usuário (N:1) - opcional
- Contém muitos ItemCarrinho (1:N)

---

### 2.10 ItemCarrinho

Representa um item no carrinho de compras.

**Atributos:**
- `id_item_carrinho` (PK): Identificador único
- `id_carrinho` (FK): Referência ao carrinho
- `id_produto` (FK): Referência ao produto
- `quantidade`: Quantidade do produto
- `data_adicao`: Data de adição ao carrinho

**Relacionamentos:**
- Pertence a um Carrinho (N:1)
- Referencia um Produto (N:1)

---

### 2.11 CupomDesconto

Representa cupons de desconto.

**Atributos:**
- `id_cupom` (PK): Identificador único
- `codigo_cupom`: Código único do cupom
- `tipo_desconto`: Enum (Percentual, Valor_Fixo)
- `valor_desconto`: Valor do desconto (percentual ou fixo)
- `data_inicio`: Data de início da validade
- `data_fim`: Data de fim da validade
- `limite_usos_total`: Limite total de usos (opcional)
- `limite_usos_por_cliente`: Limite de usos por cliente (opcional)
- `usos_atuais`: Número de usos atuais
- `valor_minimo_pedido`: Valor mínimo do pedido para usar o cupom
- `ativo`: Boolean (se cupom está ativo)
- `aplicavel_todos_produtos`: Boolean
- `data_criacao`: Data de criação

**Relacionamentos:**
- Usado em muitos Pedidos (1:N)
- Pode ser aplicável a Categorias (N:M)
- Pode ser aplicável a Produtos (N:M)

---

### 2.12 CupomCategoria

Tabela de relacionamento entre cupons e categorias (quando cupom é aplicável apenas a certas categorias).

**Atributos:**
- `id_cupom` (FK): Referência ao cupom
- `id_categoria` (FK): Referência à categoria

---

### 2.13 CupomProduto

Tabela de relacionamento entre cupons e produtos (quando cupom é aplicável apenas a certos produtos).

**Atributos:**
- `id_cupom` (FK): Referência ao cupom
- `id_produto` (FK): Referência ao produto

---

### 2.14 ProgramaFidelidade

Representa o programa de pontos de fidelidade de um cliente.

**Atributos:**
- `id_fidelidade` (PK): Identificador único
- `id_usuario` (FK): Referência ao usuário
- `saldo_pontos`: Saldo atual de pontos
- `pontos_totais_ganhos`: Total de pontos ganhos (histórico)
- `pontos_totais_resgatados`: Total de pontos resgatados (histórico)
- `data_ultima_atualizacao`: Data da última atualização
- `data_cadastro`: Data de cadastro no programa

**Relacionamentos:**
- Pertence a um Usuário (1:1)
- Possui muitos HistoricoPontos (1:N)

---

### 2.15 HistoricoPontos

Representa o histórico de ganhos e resgates de pontos.

**Atributos:**
- `id_historico` (PK): Identificador único
- `id_fidelidade` (FK): Referência ao programa de fidelidade
- `id_pedido` (FK): Referência ao pedido (se pontos ganhos por compra)
- `tipo_movimentacao`: Enum (Ganho, Resgate, Expiracao)
- `pontos`: Quantidade de pontos
- `descricao`: Descrição da movimentação
- `data_movimentacao`: Data e hora da movimentação

**Relacionamentos:**
- Pertence a um ProgramaFidelidade (N:1)
- Pode ter um Pedido (N:1)

---

### 2.16 ConfiguracaoFrete

Representa configurações de modalidades de frete.

**Atributos:**
- `id_frete` (PK): Identificador único
- `nome_modalidade`: Nome da modalidade (ex: PAC, SEDEX)
- `tipo_calculo`: Enum (Por_Peso, Por_CEP, Tabela_Fixa)
- `valor_base`: Valor base do frete
- `valor_por_kg`: Valor por quilograma adicional
- `prazo_dias`: Prazo estimado em dias
- `ativo`: Boolean
- `frete_gratis_acima`: Valor mínimo para frete grátis (opcional)
- `regioes_atendidas`: JSON com regiões atendidas

**Relacionamentos:**
- Usado em muitos Pedidos (1:N)

---

### 2.17 Assinatura

Representa assinaturas do clube de café.

**Atributos:**
- `id_assinatura` (PK): Identificador único
- `id_usuario` (FK): Referência ao usuário
- `id_plano` (FK): Referência ao plano de assinatura
- `frequencia_entrega`: Enum (Mensal, Trimestral, Semestral, Anual)
- `status`: Enum (Ativa, Pausada, Cancelada, Expirada)
- `data_inicio`: Data de início
- `data_proxima_entrega`: Data da próxima entrega
- `data_cancelamento`: Data de cancelamento (opcional)
- `metodo_pagamento`: Método de pagamento recorrente
- `valor_mensal`: Valor mensal da assinatura

**Relacionamentos:**
- Pertence a um Usuário (N:1)
- Referencia um PlanoAssinatura (N:1)
- Gera muitos PedidosAssinatura (1:N)

---

### 2.18 PlanoAssinatura

Representa planos de assinatura disponíveis.

**Atributos:**
- `id_plano` (PK): Identificador único
- `nome_plano`: Nome do plano
- `descricao`: Descrição do plano
- `valor_mensal`: Valor mensal
- `quantidade_cafe`: Quantidade de café incluída
- `tipo_cafe`: Tipo de café (opcional)
- `ativo`: Boolean
- `beneficios`: JSON com benefícios do plano

---

### 2.19 PedidoAssinatura

Representa pedidos gerados automaticamente por assinaturas.

**Atributos:**
- `id_pedido_assinatura` (PK): Identificador único
- `id_assinatura` (FK): Referência à assinatura
- `id_pedido` (FK): Referência ao pedido gerado
- `data_geracao`: Data de geração do pedido
- `status`: Enum (Gerado, Processado, Falhou)

**Relacionamentos:**
- Pertence a uma Assinatura (N:1)
- Referencia um Pedido (1:1)

---

### 2.20 Kit

Representa kits de presente personalizáveis.

**Atributos:**
- `id_kit` (PK): Identificador único
- `nome_kit`: Nome do kit
- `descricao`: Descrição
- `preco_base`: Preço base (da embalagem)
- `ativo`: Boolean

**Relacionamentos:**
- Contém muitos Produtos (N:M) - através de KitProduto

---

### 2.21 KitProduto

Tabela de relacionamento entre kits e produtos.

**Atributos:**
- `id_kit` (FK): Referência ao kit
- `id_produto` (FK): Referência ao produto
- `quantidade`: Quantidade do produto no kit
- `obrigatorio`: Boolean (se produto é obrigatório no kit)

---

### 2.22 LoteTorra

Representa lotes de café torrado (se torrefação for interna).

**Atributos:**
- `id_lote` (PK): Identificador único
- `codigo_lote`: Código único do lote
- `tipo_grao`: Tipo de grão
- `origem`: Origem do grão
- `data_torra`: Data da torra
- `peso_inicial_kg`: Peso antes da torra
- `peso_final_kg`: Peso após a torra
- `nivel_torra`: Nível de torra
- `temperatura_torra`: Temperatura da torra (opcional)
- `tempo_torra`: Tempo de torra (opcional)
- `observacoes`: Observações
- `id_barista` (FK): Barista responsável

**Relacionamentos:**
- Criado por um Usuário (Barista) (N:1)
- Pode estar associado a Produtos (N:M)

---

### 2.23 LoteProduto

Tabela de relacionamento entre lotes de torra e produtos (para rastreabilidade).

**Atributos:**
- `id_lote` (FK): Referência ao lote
- `id_produto` (FK): Referência ao produto
- `quantidade_kg`: Quantidade em kg do produto associado ao lote

---

### 2.24 ArtigoBlog

Representa artigos do blog.

**Atributos:**
- `id_artigo` (PK): Identificador único
- `titulo`: Título do artigo
- `slug`: URL amigável
- `conteudo`: Conteúdo do artigo (HTML/Markdown)
- `resumo`: Resumo do artigo
- `imagem_destaque`: URL da imagem de destaque
- `autor`: Nome do autor
- `data_publicacao`: Data de publicação
- `data_atualizacao`: Data da última atualização
- `status`: Enum (Rascunho, Publicado, Arquivado)
- `categoria`: Categoria do artigo
- `tags`: Tags (JSON ou texto)
- `visualizacoes`: Número de visualizações

---

### 2.25 FAQ

Representa perguntas frequentes.

**Atributos:**
- `id_faq` (PK): Identificador único
- `pergunta`: Pergunta
- `resposta`: Resposta
- `categoria`: Categoria da FAQ
- `ordem`: Ordem de exibição
- `ativo`: Boolean
- `visualizacoes`: Número de visualizações

---

### 2.26 NotificacaoEmail

Representa histórico de e-mails enviados.

**Atributos:**
- `id_notificacao` (PK): Identificador único
- `id_usuario` (FK): Referência ao usuário
- `tipo`: Enum (Confirmacao_Cadastro, Confirmacao_Pedido, Mudanca_Status, etc.)
- `destinatario`: E-mail do destinatário
- `assunto`: Assunto do e-mail
- `corpo`: Corpo do e-mail
- `data_envio`: Data e hora do envio
- `status`: Enum (Enviado, Falhou, Pendente)
- `id_pedido` (FK): Referência ao pedido (se aplicável)

**Relacionamentos:**
- Enviado para um Usuário (N:1)
- Pode estar relacionado a um Pedido (N:1)

---

## 3. Diagrama de Relacionamentos

### 3.1 Relacionamentos Principais

```
Usuário (1) < (N) Endereco
Usuário (1) < (N) Pedido
Usuário (1)  (1) ProgramaFidelidade

Categoria (1) < (N) Produto
Produto (1) < (N) ImagemProduto
Produto (1) < (N) ItemPedido
Produto (N)  (N) Kit (através de KitProduto)

Pedido (1) < (N) ItemPedido
Pedido (1) < (N) HistoricoStatusPedido
Pedido (N)  (1) CupomDesconto

Carrinho (1) < (N) ItemCarrinho

Assinatura (1) < (N) PedidoAssinatura
Assinatura (N)  (1) PlanoAssinatura
```

---

## 4. Regras de Negócio do Modelo

### 4.1 Integridade Referencial

- Quando um usuário é removido, seus pedidos devem ser mantidos (soft delete ou histórico)
- Quando um produto é removido, itens de pedidos históricos devem manter referência
- Quando um pedido é cancelado, estoque deve ser revertido

### 4.2 Validações

- E-mail de usuário deve ser único
- SKU de produto deve ser único
- Código de cupom deve ser único
- Número de pedido deve ser único
- Código de lote deve ser único

### 4.3 Triggers e Constraints

- Estoque não pode ser negativo
- Preço de produto deve ser maior que zero
- Quantidade em pedido/item deve ser maior que zero
- Data de fim de cupom deve ser maior que data de início

---

## 5. Índices Recomendados

### 5.1 Índices Primários
- Todas as chaves primárias (PK)

### 5.2 Índices Únicos
- `usuario.email`
- `produto.sku`
- `cupom.codigo_cupom`
- `pedido.numero_pedido`

### 5.3 Índices de Performance
- `pedido.id_cliente`
- `pedido.status_pedido`
- `pedido.data_pedido`
- `produto.id_categoria`
- `produto.ativo`
- `item_pedido.id_pedido`
- `carrinho.id_usuario`
- `carrinho.session_id`

---

## 6. Considerações de Implementação

### 6.1 Soft Delete

Algumas entidades devem usar soft delete (marcar como inativo ao invés de deletar):
- Usuário
- Produto
- Categoria
- Pedido (manter histórico)

### 6.2 Auditoria

Entidades críticas devem ter campos de auditoria:
- `data_criacao`
- `data_atualizacao`
- `usuario_criacao` (opcional)
- `usuario_atualizacao` (opcional)

### 6.3 Versionamento

Para entidades que podem mudar ao longo do tempo (ex: preço de produto), considerar:
- Tabela de histórico de preços
- Manter preço no momento da compra em ItemPedido

---

## 7. Aprovações

| Nome | Cargo | Assinatura | Data |
|------|-------|------------|------|
| Tiago Soares Carneiro da Cunha | Desenvolvedor/Responsável | ___________ | ___/___/___ |

---

**Próximos Passos:**
- Criar diagrama ER visual
- Gerar scripts SQL de criação das tabelas
- Definir estratégia de migração de dados
# 15. Modelo Conceitual, Modelo ER e Projeto Físico do Banco de Dados

O Modelo Conceitual, Modelo ER e Projeto Físico do banco de dados desenvolvidos a partir do Diagrama de Classes foram documentados em um documento separado.

Para consultar a documentação completa, consulte o arquivo: **[ATIVIDADE - BANCO DE DADOS.md](ATIVIDADE%20-%20BANCO%20DE%20DADOS.md)**

# 16. Dicionário de Dados


## 16.1 Introdução

Este documento apresenta o dicionário de dados do sistema Soto Café, descrevendo detalhadamente todas as tabelas, campos, tipos de dados, constraints e relacionamentos do banco de dados.

## 16.2 Tabelas do Sistema

### 16.2.1 Tabela: usuarios

| Campo | Tipo | Tamanho | Obrigatório | Descrição |
|-------|------|---------|-------------|-----------|
| id_usuario | BIGINT | - | Sim (PK) | Identificador único do usuário |
| nome | VARCHAR | 255 | Sim | Nome completo do usuário |
| email | VARCHAR | 255 | Sim (UNIQUE) | E-mail do usuário |
| senha_hash | VARCHAR | 255 | Sim | Hash da senha criptografada |
| telefone | VARCHAR | 20 | Não | Telefone de contato |
| cpf | VARCHAR | 14 | Não | CPF do usuário |
| tipo_usuario | ENUM | - | Sim | Tipo: Cliente, Administrador, etc. |
| status | ENUM | - | Sim | Status: Ativo, Inativo, Bloqueado |
| data_cadastro | TIMESTAMP | - | Sim | Data de cadastro |
| email_verificado | BOOLEAN | - | Sim | Se e-mail foi verificado |

**Índices:**
- PRIMARY KEY (id_usuario)
- UNIQUE (email)
- INDEX (tipo_usuario)
- INDEX (status)

### 16.2.2 Tabela: produtos

| Campo | Tipo | Tamanho | Obrigatório | Descrição |
|-------|------|---------|-------------|-----------|
| id_produto | BIGINT | - | Sim (PK) | Identificador único do produto |
| id_categoria | BIGINT | - | Sim (FK) | Referência à categoria |
| nome_produto | VARCHAR | 255 | Sim | Nome do produto |
| sku | VARCHAR | 100 | Sim (UNIQUE) | Código SKU único |
| preco_unitario | DECIMAL | 10,2 | Sim | Preço de venda |
| estoque_atual | INT | - | Sim | Quantidade em estoque |
| peso_gramas | DECIMAL | 10,2 | Sim | Peso em gramas |
| ativo | BOOLEAN | - | Sim | Se produto está ativo |

**Índices:**
- PRIMARY KEY (id_produto)
- UNIQUE (sku)
- INDEX (id_categoria)
- INDEX (ativo)

**Constraints:**
- CHECK (preco_unitario > 0)
- CHECK (estoque_atual >= 0)

### 16.2.3 Tabela: pedidos

| Campo | Tipo | Tamanho | Obrigatório | Descrição |
|-------|------|---------|-------------|-----------|
| id_pedido | BIGINT | - | Sim (PK) | Identificador único do pedido |
| id_cliente | BIGINT | - | Sim (FK) | Referência ao cliente |
| numero_pedido | VARCHAR | 50 | Sim (UNIQUE) | Número único do pedido |
| status_pedido | ENUM | - | Sim | Status do pedido |
| valor_total | DECIMAL | 10,2 | Sim | Valor total do pedido |
| metodo_pagamento | ENUM | - | Sim | Método de pagamento |
| data_pedido | TIMESTAMP | - | Sim | Data do pedido |

**Índices:**
- PRIMARY KEY (id_pedido)
- UNIQUE (numero_pedido)
- INDEX (id_cliente)
- INDEX (status_pedido)
- INDEX (data_pedido)

### 16.2.4 Tabela: item_pedido

| Campo | Tipo | Tamanho | Obrigatório | Descrição |
|-------|------|---------|-------------|-----------|
| id_item_pedido | BIGINT | - | Sim (PK) | Identificador único do item |
| id_pedido | BIGINT | - | Sim (FK) | Referência ao pedido |
| id_produto | BIGINT | - | Sim (FK) | Referência ao produto |
| quantidade | INT | - | Sim | Quantidade do produto |
| preco_unitario_no_pedido | DECIMAL | 10,2 | Sim | Preço no momento da compra |
| subtotal | DECIMAL | 10,2 | Sim | Subtotal do item |

**Índices:**
- PRIMARY KEY (id_item_pedido)
- INDEX (id_pedido)
- INDEX (id_produto)

## 16.3 Relacionamentos Detalhados

### 16.3.1 Usuario → Endereco
- Tipo: 1:N (Um usuário pode ter vários endereços)
- FK: enderecos.id_usuario → usuarios.id_usuario
- ON DELETE: CASCADE

### 16.3.2 Usuario → Pedido
- Tipo: 1:N (Um usuário pode ter vários pedidos)
- FK: pedidos.id_cliente → usuarios.id_usuario
- ON DELETE: RESTRICT

### 16.3.3 Categoria → Produto
- Tipo: 1:N (Uma categoria pode ter vários produtos)
- FK: produtos.id_categoria → categorias.id_categoria
- ON DELETE: RESTRICT

### 16.3.4 Pedido → ItemPedido
- Tipo: 1:N (Um pedido pode ter vários itens)
- FK: item_pedido.id_pedido → pedidos.id_pedido
- ON DELETE: CASCADE

## 16.4 Tipos de Dados Utilizados

**Numéricos:**
- BIGINT: Identificadores únicos
- INT: Quantidades, contadores
- DECIMAL(10,2): Valores monetários, pesos

**Texto:**
- VARCHAR(n): Textos de tamanho variável
- TEXT: Textos longos (descrições)

**Data/Hora:**
- TIMESTAMP: Data e hora completa
- DATE: Apenas data

**Booleanos:**
- BOOLEAN: Valores verdadeiro/falso

**Enums:**
- ENUM: Valores pré-definidos (status, tipos)

## 16.5 Constraints e Validações

**Primary Keys:**
- Todas as tabelas possuem chave primária auto-incremental

**Foreign Keys:**
- Garantem integridade referencial
- ON DELETE: CASCADE ou RESTRICT conforme regra de negócio

**Unique Constraints:**
- email (usuarios)
- sku (produtos)
- numero_pedido (pedidos)
- codigo_cupom (cupons_desconto)

**Check Constraints:**
- preco_unitario > 0
- estoque_atual >= 0
- quantidade > 0
- valor_total > 0

## 16.6 Índices para Performance

**Índices Primários:**
- Todas as chaves primárias são indexadas automaticamente

**Índices Únicos:**
- Campos com constraint UNIQUE

**Índices de Performance:**
- Campos frequentemente usados em WHERE, JOIN, ORDER BY
- Exemplos: id_cliente, status_pedido, data_pedido, id_categoria


# 17. Script SQL do Banco de Dados

```sql
-- Script de Criação do Banco de Dados
-- Soto Café - E-commerce de Cafeteria Gourmet
-- Versão: 1.0
-- Autor: Tiago Soares Carneiro da Cunha
-- RGM: 44030509

-- ============================================
-- Criação do Banco de Dados
-- ============================================

CREATE DATABASE IF NOT EXISTS sotocafe CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

USE sotocafe;

-- ============================================
-- Tabela: usuarios
-- ============================================

CREATE TABLE usuarios (
    id_usuario BIGINT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    senha_hash VARCHAR(255) NOT NULL,
    telefone VARCHAR(20),
    cpf VARCHAR(14),
    tipo_usuario ENUM('Cliente', 'Administrador', 'Gerente_Conteudo', 'Expedicao', 'Suporte', 'Barista') DEFAULT 'Cliente',
    status ENUM('Ativo', 'Inativo', 'Bloqueado') DEFAULT 'Ativo',
    data_cadastro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    data_ultimo_acesso TIMESTAMP NULL,
    email_verificado BOOLEAN DEFAULT FALSE,
    token_ativacao VARCHAR(255),
    data_expiracao_token TIMESTAMP NULL,
    INDEX idx_email (email),
    INDEX idx_tipo_usuario (tipo_usuario),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: enderecos
-- ============================================

CREATE TABLE enderecos (
    id_endereco BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_usuario BIGINT NOT NULL,
    tipo_endereco ENUM('Residencial', 'Comercial', 'Cobranca') DEFAULT 'Residencial',
    cep VARCHAR(10) NOT NULL,
    rua VARCHAR(255) NOT NULL,
    numero VARCHAR(20) NOT NULL,
    complemento VARCHAR(100),
    bairro VARCHAR(100) NOT NULL,
    cidade VARCHAR(100) NOT NULL,
    estado VARCHAR(2) NOT NULL,
    ponto_referencia VARCHAR(255),
    endereco_principal BOOLEAN DEFAULT FALSE,
    data_cadastro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE CASCADE,
    INDEX idx_usuario (id_usuario),
    INDEX idx_cep (cep)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: categorias
-- ============================================

CREATE TABLE categorias (
    id_categoria BIGINT AUTO_INCREMENT PRIMARY KEY,
    nome_categoria VARCHAR(100) NOT NULL,
    descricao TEXT,
    slug VARCHAR(100) NOT NULL UNIQUE,
    id_categoria_pai BIGINT NULL,
    ordem_exibicao INT DEFAULT 0,
    ativo BOOLEAN DEFAULT TRUE,
    imagem VARCHAR(255),
    FOREIGN KEY (id_categoria_pai) REFERENCES categorias(id_categoria) ON DELETE SET NULL,
    INDEX idx_slug (slug),
    INDEX idx_ativo (ativo)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: produtos
-- ============================================

CREATE TABLE produtos (
    id_produto BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_categoria BIGINT NOT NULL,
    nome_produto VARCHAR(255) NOT NULL,
    descricao TEXT,
    descricao_curta VARCHAR(500),
    slug VARCHAR(255) NOT NULL UNIQUE,
    sku VARCHAR(100) NOT NULL UNIQUE,
    preco_unitario DECIMAL(10, 2) NOT NULL,
    preco_custo DECIMAL(10, 2),
    estoque_atual INT DEFAULT 0,
    estoque_minimo INT DEFAULT 0,
    peso_gramas DECIMAL(10, 2) NOT NULL,
    altura_cm DECIMAL(10, 2),
    largura_cm DECIMAL(10, 2),
    profundidade_cm DECIMAL(10, 2),
    ativo BOOLEAN DEFAULT TRUE,
    destaque BOOLEAN DEFAULT FALSE,
    data_cadastro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    data_atualizacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    origem VARCHAR(100),
    nivel_torra VARCHAR(50),
    notas_sensoriais TEXT,
    tipo_moagem VARCHAR(50),
    FOREIGN KEY (id_categoria) REFERENCES categorias(id_categoria) ON DELETE RESTRICT,
    INDEX idx_categoria (id_categoria),
    INDEX idx_sku (sku),
    INDEX idx_slug (slug),
    INDEX idx_ativo (ativo),
    INDEX idx_destaque (destaque),
    CHECK (preco_unitario > 0),
    CHECK (estoque_atual >= 0)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: imagens_produto
-- ============================================

CREATE TABLE imagens_produto (
    id_imagem BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_produto BIGINT NOT NULL,
    url_imagem VARCHAR(500) NOT NULL,
    ordem INT DEFAULT 0,
    principal BOOLEAN DEFAULT FALSE,
    alt_text VARCHAR(255),
    FOREIGN KEY (id_produto) REFERENCES produtos(id_produto) ON DELETE CASCADE,
    INDEX idx_produto (id_produto)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: carrinho
-- ============================================

CREATE TABLE carrinho (
    id_carrinho BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_usuario BIGINT NULL,
    session_id VARCHAR(255),
    data_criacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    data_atualizacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    data_expiracao TIMESTAMP NULL,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE CASCADE,
    INDEX idx_usuario (id_usuario),
    INDEX idx_session (session_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: item_carrinho
-- ============================================

CREATE TABLE item_carrinho (
    id_item_carrinho BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_carrinho BIGINT NOT NULL,
    id_produto BIGINT NOT NULL,
    quantidade INT NOT NULL,
    data_adicao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (id_carrinho) REFERENCES carrinho(id_carrinho) ON DELETE CASCADE,
    FOREIGN KEY (id_produto) REFERENCES produtos(id_produto) ON DELETE CASCADE,
    INDEX idx_carrinho (id_carrinho),
    CHECK (quantidade > 0)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: cupons_desconto
-- ============================================

CREATE TABLE cupons_desconto (
    id_cupom BIGINT AUTO_INCREMENT PRIMARY KEY,
    codigo_cupom VARCHAR(50) NOT NULL UNIQUE,
    tipo_desconto ENUM('Percentual', 'Valor_Fixo') NOT NULL,
    valor_desconto DECIMAL(10, 2) NOT NULL,
    data_inicio DATE NOT NULL,
    data_fim DATE NOT NULL,
    limite_usos_total INT NULL,
    limite_usos_por_cliente INT NULL,
    usos_atuais INT DEFAULT 0,
    valor_minimo_pedido DECIMAL(10, 2) DEFAULT 0,
    ativo BOOLEAN DEFAULT TRUE,
    aplicavel_todos_produtos BOOLEAN DEFAULT TRUE,
    data_criacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_codigo (codigo_cupom),
    INDEX idx_ativo (ativo),
    CHECK (valor_desconto > 0),
    CHECK (data_fim >= data_inicio)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: cupom_categoria
-- ============================================

CREATE TABLE cupom_categoria (
    id_cupom BIGINT NOT NULL,
    id_categoria BIGINT NOT NULL,
    PRIMARY KEY (id_cupom, id_categoria),
    FOREIGN KEY (id_cupom) REFERENCES cupons_desconto(id_cupom) ON DELETE CASCADE,
    FOREIGN KEY (id_categoria) REFERENCES categorias(id_categoria) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: cupom_produto
-- ============================================

CREATE TABLE cupom_produto (
    id_cupom BIGINT NOT NULL,
    id_produto BIGINT NOT NULL,
    PRIMARY KEY (id_cupom, id_produto),
    FOREIGN KEY (id_cupom) REFERENCES cupons_desconto(id_cupom) ON DELETE CASCADE,
    FOREIGN KEY (id_produto) REFERENCES produtos(id_produto) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: pedidos
-- ============================================

CREATE TABLE pedidos (
    id_pedido BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_cliente BIGINT NOT NULL,
    id_endereco_entrega BIGINT NOT NULL,
    numero_pedido VARCHAR(50) NOT NULL UNIQUE,
    data_pedido TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status_pedido ENUM('Confirmado', 'Em_Preparacao', 'Enviado', 'Em_Transito', 'Entregue', 'Cancelado') DEFAULT 'Confirmado',
    valor_subtotal DECIMAL(10, 2) NOT NULL,
    valor_desconto DECIMAL(10, 2) DEFAULT 0,
    valor_frete DECIMAL(10, 2) DEFAULT 0,
    valor_total DECIMAL(10, 2) NOT NULL,
    metodo_pagamento ENUM('Cartao_Credito', 'Pix', 'Boleto') NOT NULL,
    status_pagamento ENUM('Pendente', 'Aprovado', 'Recusado', 'Estornado') DEFAULT 'Pendente',
    id_cupom BIGINT NULL,
    codigo_rastreamento VARCHAR(100),
    observacoes TEXT,
    data_atualizacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (id_cliente) REFERENCES usuarios(id_usuario) ON DELETE RESTRICT,
    FOREIGN KEY (id_endereco_entrega) REFERENCES enderecos(id_endereco) ON DELETE RESTRICT,
    FOREIGN KEY (id_cupom) REFERENCES cupons_desconto(id_cupom) ON DELETE SET NULL,
    INDEX idx_cliente (id_cliente),
    INDEX idx_numero_pedido (numero_pedido),
    INDEX idx_status_pedido (status_pedido),
    INDEX idx_data_pedido (data_pedido),
    CHECK (valor_total > 0)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: item_pedido
-- ============================================

CREATE TABLE item_pedido (
    id_item_pedido BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_pedido BIGINT NOT NULL,
    id_produto BIGINT NOT NULL,
    quantidade INT NOT NULL,
    preco_unitario_no_pedido DECIMAL(10, 2) NOT NULL,
    subtotal DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (id_pedido) REFERENCES pedidos(id_pedido) ON DELETE CASCADE,
    FOREIGN KEY (id_produto) REFERENCES produtos(id_produto) ON DELETE RESTRICT,
    INDEX idx_pedido (id_pedido),
    CHECK (quantidade > 0),
    CHECK (preco_unitario_no_pedido > 0)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: historico_status_pedido
-- ============================================

CREATE TABLE historico_status_pedido (
    id_historico BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_pedido BIGINT NOT NULL,
    status_anterior VARCHAR(50),
    status_novo VARCHAR(50) NOT NULL,
    data_mudanca TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    id_usuario BIGINT NULL,
    observacoes TEXT,
    FOREIGN KEY (id_pedido) REFERENCES pedidos(id_pedido) ON DELETE CASCADE,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE SET NULL,
    INDEX idx_pedido (id_pedido),
    INDEX idx_data (data_mudanca)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: programa_fidelidade
-- ============================================

CREATE TABLE programa_fidelidade (
    id_fidelidade BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_usuario BIGINT NOT NULL UNIQUE,
    saldo_pontos INT DEFAULT 0,
    pontos_totais_ganhos INT DEFAULT 0,
    pontos_totais_resgatados INT DEFAULT 0,
    data_ultima_atualizacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    data_cadastro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE CASCADE,
    INDEX idx_usuario (id_usuario)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: historico_pontos
-- ============================================

CREATE TABLE historico_pontos (
    id_historico BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_fidelidade BIGINT NOT NULL,
    id_pedido BIGINT NULL,
    tipo_movimentacao ENUM('Ganho', 'Resgate', 'Expiracao') NOT NULL,
    pontos INT NOT NULL,
    descricao VARCHAR(255),
    data_movimentacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (id_fidelidade) REFERENCES programa_fidelidade(id_fidelidade) ON DELETE CASCADE,
    FOREIGN KEY (id_pedido) REFERENCES pedidos(id_pedido) ON DELETE SET NULL,
    INDEX idx_fidelidade (id_fidelidade),
    INDEX idx_data (data_movimentacao)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: configuracoes_frete
-- ============================================

CREATE TABLE configuracoes_frete (
    id_frete BIGINT AUTO_INCREMENT PRIMARY KEY,
    nome_modalidade VARCHAR(100) NOT NULL,
    tipo_calculo ENUM('Por_Peso', 'Por_CEP', 'Tabela_Fixa') NOT NULL,
    valor_base DECIMAL(10, 2) DEFAULT 0,
    valor_por_kg DECIMAL(10, 2) DEFAULT 0,
    prazo_dias INT DEFAULT 0,
    ativo BOOLEAN DEFAULT TRUE,
    frete_gratis_acima DECIMAL(10, 2) NULL,
    regioes_atendidas JSON,
    INDEX idx_ativo (ativo)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: planos_assinatura
-- ============================================

CREATE TABLE planos_assinatura (
    id_plano BIGINT AUTO_INCREMENT PRIMARY KEY,
    nome_plano VARCHAR(100) NOT NULL,
    descricao TEXT,
    valor_mensal DECIMAL(10, 2) NOT NULL,
    quantidade_cafe INT,
    tipo_cafe VARCHAR(100),
    ativo BOOLEAN DEFAULT TRUE,
    beneficios JSON,
    INDEX idx_ativo (ativo)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: assinaturas
-- ============================================

CREATE TABLE assinaturas (
    id_assinatura BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_usuario BIGINT NOT NULL,
    id_plano BIGINT NOT NULL,
    frequencia_entrega ENUM('Mensal', 'Trimestral', 'Semestral', 'Anual') DEFAULT 'Mensal',
    status ENUM('Ativa', 'Pausada', 'Cancelada', 'Expirada') DEFAULT 'Ativa',
    data_inicio DATE NOT NULL,
    data_proxima_entrega DATE,
    data_cancelamento DATE NULL,
    metodo_pagamento VARCHAR(50),
    valor_mensal DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE CASCADE,
    FOREIGN KEY (id_plano) REFERENCES planos_assinatura(id_plano) ON DELETE RESTRICT,
    INDEX idx_usuario (id_usuario),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: pedidos_assinatura
-- ============================================

CREATE TABLE pedidos_assinatura (
    id_pedido_assinatura BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_assinatura BIGINT NOT NULL,
    id_pedido BIGINT NOT NULL,
    data_geracao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status ENUM('Gerado', 'Processado', 'Falhou') DEFAULT 'Gerado',
    FOREIGN KEY (id_assinatura) REFERENCES assinaturas(id_assinatura) ON DELETE CASCADE,
    FOREIGN KEY (id_pedido) REFERENCES pedidos(id_pedido) ON DELETE CASCADE,
    INDEX idx_assinatura (id_assinatura)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: kits
-- ============================================

CREATE TABLE kits (
    id_kit BIGINT AUTO_INCREMENT PRIMARY KEY,
    nome_kit VARCHAR(255) NOT NULL,
    descricao TEXT,
    preco_base DECIMAL(10, 2) DEFAULT 0,
    ativo BOOLEAN DEFAULT TRUE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: kit_produto
-- ============================================

CREATE TABLE kit_produto (
    id_kit BIGINT NOT NULL,
    id_produto BIGINT NOT NULL,
    quantidade INT DEFAULT 1,
    obrigatorio BOOLEAN DEFAULT FALSE,
    PRIMARY KEY (id_kit, id_produto),
    FOREIGN KEY (id_kit) REFERENCES kits(id_kit) ON DELETE CASCADE,
    FOREIGN KEY (id_produto) REFERENCES produtos(id_produto) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: lotes_torra
-- ============================================

CREATE TABLE lotes_torra (
    id_lote BIGINT AUTO_INCREMENT PRIMARY KEY,
    codigo_lote VARCHAR(50) NOT NULL UNIQUE,
    tipo_grao VARCHAR(100),
    origem VARCHAR(100),
    data_torra DATE NOT NULL,
    peso_inicial_kg DECIMAL(10, 2),
    peso_final_kg DECIMAL(10, 2),
    nivel_torra VARCHAR(50),
    temperatura_torra DECIMAL(5, 2),
    tempo_torra INT,
    observacoes TEXT,
    id_barista BIGINT NULL,
    FOREIGN KEY (id_barista) REFERENCES usuarios(id_usuario) ON DELETE SET NULL,
    INDEX idx_codigo (codigo_lote),
    INDEX idx_data (data_torra)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: lote_produto
-- ============================================

CREATE TABLE lote_produto (
    id_lote BIGINT NOT NULL,
    id_produto BIGINT NOT NULL,
    quantidade_kg DECIMAL(10, 2),
    PRIMARY KEY (id_lote, id_produto),
    FOREIGN KEY (id_lote) REFERENCES lotes_torra(id_lote) ON DELETE CASCADE,
    FOREIGN KEY (id_produto) REFERENCES produtos(id_produto) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: artigos_blog
-- ============================================

CREATE TABLE artigos_blog (
    id_artigo BIGINT AUTO_INCREMENT PRIMARY KEY,
    titulo VARCHAR(255) NOT NULL,
    slug VARCHAR(255) NOT NULL UNIQUE,
    conteudo TEXT NOT NULL,
    resumo VARCHAR(500),
    imagem_destaque VARCHAR(500),
    autor VARCHAR(100),
    data_publicacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    data_atualizacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    status ENUM('Rascunho', 'Publicado', 'Arquivado') DEFAULT 'Rascunho',
    categoria VARCHAR(100),
    tags JSON,
    visualizacoes INT DEFAULT 0,
    INDEX idx_slug (slug),
    INDEX idx_status (status),
    INDEX idx_data_publicacao (data_publicacao)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: faq
-- ============================================

CREATE TABLE faq (
    id_faq BIGINT AUTO_INCREMENT PRIMARY KEY,
    pergunta VARCHAR(500) NOT NULL,
    resposta TEXT NOT NULL,
    categoria VARCHAR(100),
    ordem INT DEFAULT 0,
    ativo BOOLEAN DEFAULT TRUE,
    visualizacoes INT DEFAULT 0,
    INDEX idx_categoria (categoria),
    INDEX idx_ativo (ativo)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Tabela: notificacoes_email
-- ============================================

CREATE TABLE notificacoes_email (
    id_notificacao BIGINT AUTO_INCREMENT PRIMARY KEY,
    id_usuario BIGINT NULL,
    tipo VARCHAR(50) NOT NULL,
    destinatario VARCHAR(255) NOT NULL,
    assunto VARCHAR(255) NOT NULL,
    corpo TEXT NOT NULL,
    data_envio TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status ENUM('Enviado', 'Falhou', 'Pendente') DEFAULT 'Pendente',
    id_pedido BIGINT NULL,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE SET NULL,
    FOREIGN KEY (id_pedido) REFERENCES pedidos(id_pedido) ON DELETE SET NULL,
    INDEX idx_usuario (id_usuario),
    INDEX idx_tipo (tipo),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ============================================
-- Fim do Script
-- ============================================


```
# 18. Plano de Testes


## 18.1 Introdução

Este documento apresenta o plano de testes do sistema Soto Café, definindo estratégias, tipos de testes, ambientes e responsabilidades.

## 18.2 Objetivos dos Testes

- Garantir qualidade do software
- Validar funcionalidades conforme requisitos
- Identificar defeitos antes da produção
- Garantir usabilidade e performance
- Validar segurança e integridade de dados

## 18.3 Estratégia de Testes

### 18.3.1 Níveis de Teste

**Testes Unitários:**
- Testar funções e métodos individuais
- Cobertura mínima: 80%
- Execução: Durante desenvolvimento

**Testes de Integração:**
- Testar integração entre módulos
- Testar integração com APIs externas
- Execução: Após cada sprint

**Testes de Sistema:**
- Testar funcionalidades completas
- Testes end-to-end
- Execução: Antes de cada release

**Testes de Aceitação (UAT):**
- Validação com usuários finais
- Execução: Antes do lançamento

### 18.3.2 Tipos de Teste

**Funcionais:**
- Testes de requisitos funcionais
- Testes de regras de negócio
- Testes de casos de uso

**Não Funcionais:**
- Testes de performance
- Testes de segurança
- Testes de usabilidade
- Testes de compatibilidade

## 18.4 Ambiente de Testes

### 18.4.1 Ambientes

**Desenvolvimento:**
- Ambiente local dos desenvolvedores
- Dados de teste básicos

**Homologação:**
- Ambiente similar à produção
- Dados de teste completos
- Acesso para stakeholders

**Produção:**
- Ambiente final
- Dados reais
- Monitoramento contínuo

## 18.5 Ferramentas de Teste

**Testes Unitários:**
- Jest (Node.js)
- pytest (Python)
- JUnit (Java)

**Testes de Integração:**
- Supertest (Node.js)
- Postman
- Newman

**Testes E2E:**
- Cypress
- Playwright
- Selenium

**Testes de Performance:**
- Apache JMeter
- K6
- Artillery

## 18.6 Cobertura de Testes

**Métricas:**
- Cobertura de código: Mínimo 80%
- Cobertura de requisitos: 100%
- Cobertura de casos de uso: 100%

## 18.7 Cronograma de Testes

**Por Sprint:**
- Testes unitários: Durante desenvolvimento
- Testes de integração: Final da sprint
- Testes de sistema: Antes do release

**Antes do Lançamento:**
- Testes de aceitação: 2 semanas
- Testes de performance: 1 semana
- Testes de segurança: 1 semana

## 18.8 Critérios de Aceitação

**Para Release:**
- Todos os testes passando
- Cobertura mínima atingida
- Sem bugs críticos
- Aprovação de UAT
- Documentação atualizada


# 19. Testes de Aceitação


Conteúdo dos testes de aceitação baseado nas HUs...
# 20. Estratégia TDD


Conteúdo sobre TDD e ciclo Red-Green-Refactor...
# 21. Casos de Teste


Casos de teste detalhados para cada funcionalidade...
# 22. Wireframes


Descrição dos wireframes das principais telas...
# 23. Mockups


Descrição dos mockups de interface...
# 24. Protótipos


Descrição dos protótipos interativos...
# 25. Especificação de API


Especificação completa da API REST...
# 26. Endpoints


Lista completa de endpoints da API...
# 27. Integrações


Documentação das integrações externas...
# 28. Manual do Usuário


Manual completo para usuários finais...
# 29. Manual do Administrador


Manual completo para administradores...
# 30. Manual de Expedição


Manual para equipe de expedição...
# 31. Backlog de Produto


Backlog completo do produto...
# 32. Sprint Backlog


Backlog das sprints...
# 33. Cronograma do Projeto


Cronograma detalhado do projeto...
# 34. Glossário


Glossário de termos técnicos e de negócio...
# 35. Referências


Referências bibliográficas e técnicas...
# 36. Apêndices


Apêndices e informações complementares...